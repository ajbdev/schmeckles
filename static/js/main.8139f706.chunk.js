(this.webpackJsonpspender=this.webpackJsonpspender||[]).push([[0],{25:function(e){e.exports=JSON.parse('[{"gem":"onyx","tier":1,"points":null,"diamond":1,"sapphire":1,"emerald":1,"ruby":1,"onyx":null},{"gem":"onyx","tier":1,"points":null,"diamond":1,"sapphire":2,"emerald":1,"ruby":1,"onyx":null},{"gem":"onyx","tier":1,"points":null,"diamond":2,"sapphire":2,"emerald":null,"ruby":1,"onyx":null},{"gem":"onyx","tier":1,"points":null,"diamond":null,"sapphire":null,"emerald":1,"ruby":3,"onyx":1},{"gem":"onyx","tier":1,"points":null,"diamond":null,"sapphire":null,"emerald":2,"ruby":1,"onyx":null},{"gem":"onyx","tier":1,"points":null,"diamond":2,"sapphire":null,"emerald":2,"ruby":null,"onyx":null},{"gem":"onyx","tier":1,"points":null,"diamond":null,"sapphire":null,"emerald":3,"ruby":null,"onyx":null},{"gem":"onyx","tier":1,"points":1,"diamond":null,"sapphire":4,"emerald":null,"ruby":null,"onyx":null},{"gem":"sapphire","tier":1,"points":null,"diamond":1,"sapphire":null,"emerald":1,"ruby":1,"onyx":1},{"gem":"sapphire","tier":1,"points":null,"diamond":1,"sapphire":null,"emerald":1,"ruby":2,"onyx":1},{"gem":"sapphire","tier":1,"points":null,"diamond":1,"sapphire":null,"emerald":2,"ruby":2,"onyx":null},{"gem":"sapphire","tier":1,"points":null,"diamond":null,"sapphire":1,"emerald":3,"ruby":1,"onyx":null},{"gem":"sapphire","tier":1,"points":null,"diamond":1,"sapphire":null,"emerald":null,"ruby":null,"onyx":2},{"gem":"sapphire","tier":1,"points":null,"diamond":null,"sapphire":null,"emerald":2,"ruby":null,"onyx":2},{"gem":"sapphire","tier":1,"points":null,"diamond":null,"sapphire":null,"emerald":null,"ruby":null,"onyx":3},{"gem":"sapphire","tier":1,"points":1,"diamond":null,"sapphire":null,"emerald":null,"ruby":4,"onyx":null},{"gem":"diamond","tier":1,"points":null,"diamond":null,"sapphire":1,"emerald":1,"ruby":1,"onyx":1},{"gem":"diamond","tier":1,"points":null,"diamond":null,"sapphire":1,"emerald":2,"ruby":1,"onyx":1},{"gem":"diamond","tier":1,"points":null,"diamond":null,"sapphire":2,"emerald":2,"ruby":null,"onyx":1},{"gem":"diamond","tier":1,"points":null,"diamond":3,"sapphire":1,"emerald":null,"ruby":null,"onyx":1},{"gem":"diamond","tier":1,"points":null,"diamond":null,"sapphire":null,"emerald":null,"ruby":2,"onyx":1},{"gem":"diamond","tier":1,"points":null,"diamond":null,"sapphire":2,"emerald":null,"ruby":null,"onyx":2},{"gem":"diamond","tier":1,"points":null,"diamond":null,"sapphire":3,"emerald":null,"ruby":null,"onyx":null},{"gem":"diamond","tier":1,"points":1,"diamond":null,"sapphire":null,"emerald":4,"ruby":null,"onyx":null},{"gem":"emerald","tier":1,"points":null,"diamond":1,"sapphire":1,"emerald":null,"ruby":1,"onyx":1},{"gem":"emerald","tier":1,"points":null,"diamond":1,"sapphire":1,"emerald":null,"ruby":1,"onyx":2},{"gem":"emerald","tier":1,"points":null,"diamond":null,"sapphire":1,"emerald":null,"ruby":2,"onyx":2},{"gem":"emerald","tier":1,"points":null,"diamond":1,"sapphire":3,"emerald":1,"ruby":null,"onyx":null},{"gem":"emerald","tier":1,"points":null,"diamond":2,"sapphire":1,"emerald":null,"ruby":null,"onyx":null},{"gem":"emerald","tier":1,"points":null,"diamond":null,"sapphire":2,"emerald":null,"ruby":2,"onyx":null},{"gem":"emerald","tier":1,"points":null,"diamond":null,"sapphire":null,"emerald":null,"ruby":3,"onyx":null},{"gem":"emerald","tier":1,"points":1,"diamond":null,"sapphire":null,"emerald":null,"ruby":null,"onyx":4},{"gem":"ruby","tier":1,"points":null,"diamond":1,"sapphire":1,"emerald":1,"ruby":null,"onyx":1},{"gem":"ruby","tier":1,"points":null,"diamond":2,"sapphire":1,"emerald":1,"ruby":null,"onyx":1},{"gem":"ruby","tier":1,"points":null,"diamond":2,"sapphire":null,"emerald":1,"ruby":null,"onyx":2},{"gem":"ruby","tier":1,"points":null,"diamond":1,"sapphire":null,"emerald":null,"ruby":1,"onyx":3},{"gem":"ruby","tier":1,"points":null,"diamond":null,"sapphire":2,"emerald":1,"ruby":null,"onyx":null},{"gem":"ruby","tier":1,"points":null,"diamond":2,"sapphire":null,"emerald":null,"ruby":2,"onyx":null},{"gem":"ruby","tier":1,"points":null,"diamond":3,"sapphire":null,"emerald":null,"ruby":null,"onyx":null},{"gem":"ruby","tier":1,"points":1,"diamond":4,"sapphire":null,"emerald":null,"ruby":null,"onyx":null},{"gem":"onyx","tier":2,"points":1,"diamond":3,"sapphire":2,"emerald":2,"ruby":null,"onyx":null},{"gem":"onyx","tier":2,"points":1,"diamond":3,"sapphire":null,"emerald":3,"ruby":null,"onyx":2},{"gem":"onyx","tier":2,"points":2,"diamond":null,"sapphire":1,"emerald":4,"ruby":2,"onyx":null},{"gem":"onyx","tier":2,"points":2,"diamond":null,"sapphire":null,"emerald":5,"ruby":3,"onyx":null},{"gem":"onyx","tier":2,"points":2,"diamond":5,"sapphire":null,"emerald":null,"ruby":null,"onyx":null},{"gem":"onyx","tier":2,"points":3,"diamond":null,"sapphire":null,"emerald":null,"ruby":null,"onyx":6},{"gem":"sapphire","tier":2,"points":1,"diamond":null,"sapphire":2,"emerald":2,"ruby":3,"onyx":null},{"gem":"sapphire","tier":2,"points":1,"diamond":null,"sapphire":2,"emerald":3,"ruby":null,"onyx":3},{"gem":"sapphire","tier":2,"points":2,"diamond":5,"sapphire":3,"emerald":null,"ruby":null,"onyx":null},{"gem":"sapphire","tier":2,"points":2,"diamond":2,"sapphire":null,"emerald":null,"ruby":1,"onyx":4},{"gem":"sapphire","tier":2,"points":2,"diamond":null,"sapphire":5,"emerald":null,"ruby":null,"onyx":null},{"gem":"sapphire","tier":2,"points":3,"diamond":null,"sapphire":6,"emerald":null,"ruby":null,"onyx":null},{"gem":"diamond","tier":2,"points":1,"diamond":null,"sapphire":null,"emerald":3,"ruby":2,"onyx":2},{"gem":"diamond","tier":2,"points":1,"diamond":2,"sapphire":3,"emerald":null,"ruby":3,"onyx":null},{"gem":"diamond","tier":2,"points":2,"diamond":null,"sapphire":null,"emerald":1,"ruby":4,"onyx":2},{"gem":"diamond","tier":2,"points":2,"diamond":null,"sapphire":null,"emerald":null,"ruby":5,"onyx":3},{"gem":"diamond","tier":2,"points":2,"diamond":null,"sapphire":null,"emerald":null,"ruby":5,"onyx":null},{"gem":"diamond","tier":2,"points":3,"diamond":6,"sapphire":null,"emerald":null,"ruby":null,"onyx":null},{"gem":"emerald","tier":2,"points":1,"diamond":3,"sapphire":null,"emerald":2,"ruby":3,"onyx":null},{"gem":"emerald","tier":2,"points":1,"diamond":2,"sapphire":3,"emerald":null,"ruby":null,"onyx":2},{"gem":"emerald","tier":2,"points":2,"diamond":4,"sapphire":2,"emerald":null,"ruby":null,"onyx":1},{"gem":"emerald","tier":2,"points":2,"diamond":null,"sapphire":5,"emerald":3,"ruby":null,"onyx":null},{"gem":"emerald","tier":2,"points":2,"diamond":null,"sapphire":null,"emerald":5,"ruby":null,"onyx":null},{"gem":"emerald","tier":2,"points":3,"diamond":null,"sapphire":null,"emerald":6,"ruby":null,"onyx":null},{"gem":"ruby","tier":2,"points":1,"diamond":2,"sapphire":null,"emerald":null,"ruby":2,"onyx":3},{"gem":"ruby","tier":2,"points":1,"diamond":null,"sapphire":3,"emerald":null,"ruby":2,"onyx":3},{"gem":"ruby","tier":2,"points":2,"diamond":1,"sapphire":4,"emerald":2,"ruby":null,"onyx":null},{"gem":"ruby","tier":2,"points":2,"diamond":3,"sapphire":null,"emerald":null,"ruby":null,"onyx":5},{"gem":"ruby","tier":2,"points":2,"diamond":null,"sapphire":null,"emerald":null,"ruby":null,"onyx":5},{"gem":"ruby","tier":2,"points":3,"diamond":null,"sapphire":null,"emerald":null,"ruby":6,"onyx":null},{"gem":"onyx","tier":3,"points":3,"diamond":3,"sapphire":3,"emerald":5,"ruby":3,"onyx":null},{"gem":"onyx","tier":3,"points":4,"diamond":null,"sapphire":null,"emerald":null,"ruby":7,"onyx":null},{"gem":"onyx","tier":3,"points":4,"diamond":null,"sapphire":null,"emerald":3,"ruby":6,"onyx":3},{"gem":"onyx","tier":3,"points":5,"diamond":null,"sapphire":null,"emerald":null,"ruby":7,"onyx":3},{"gem":"sapphire","tier":3,"points":3,"diamond":3,"sapphire":null,"emerald":3,"ruby":3,"onyx":5},{"gem":"sapphire","tier":3,"points":4,"diamond":7,"sapphire":null,"emerald":null,"ruby":null,"onyx":null},{"gem":"sapphire","tier":3,"points":4,"diamond":6,"sapphire":3,"emerald":null,"ruby":null,"onyx":3},{"gem":"sapphire","tier":3,"points":5,"diamond":7,"sapphire":3,"emerald":null,"ruby":null,"onyx":null},{"gem":"diamond","tier":3,"points":3,"diamond":null,"sapphire":3,"emerald":3,"ruby":5,"onyx":3},{"gem":"diamond","tier":3,"points":4,"diamond":null,"sapphire":null,"emerald":null,"ruby":null,"onyx":7},{"gem":"diamond","tier":3,"points":4,"diamond":3,"sapphire":null,"emerald":null,"ruby":3,"onyx":6},{"gem":"diamond","tier":3,"points":5,"diamond":3,"sapphire":null,"emerald":null,"ruby":null,"onyx":7},{"gem":"emerald","tier":3,"points":3,"diamond":5,"sapphire":3,"emerald":null,"ruby":3,"onyx":3},{"gem":"emerald","tier":3,"points":4,"diamond":null,"sapphire":7,"emerald":null,"ruby":null,"onyx":null},{"gem":"emerald","tier":3,"points":4,"diamond":3,"sapphire":6,"emerald":3,"ruby":null,"onyx":null},{"gem":"emerald","tier":3,"points":5,"diamond":null,"sapphire":7,"emerald":3,"ruby":null,"onyx":null},{"gem":"ruby","tier":3,"points":3,"diamond":3,"sapphire":5,"emerald":3,"ruby":null,"onyx":3},{"gem":"ruby","tier":3,"points":4,"diamond":null,"sapphire":null,"emerald":7,"ruby":null,"onyx":null},{"gem":"ruby","tier":3,"points":4,"diamond":null,"sapphire":3,"emerald":6,"ruby":3,"onyx":null},{"gem":"ruby","tier":3,"points":5,"diamond":null,"sapphire":null,"emerald":7,"ruby":3,"onyx":null}]')},26:function(e){e.exports=JSON.parse('[{"points":3,"diamond":null,"sapphire":null,"emerald":null,"ruby":4,"onyx":4},{"points":3,"diamond":null,"sapphire":null,"emerald":4,"ruby":4,"onyx":null},{"points":3,"diamond":4,"sapphire":null,"emerald":null,"ruby":null,"onyx":4},{"points":3,"diamond":4,"sapphire":4,"emerald":null,"ruby":null,"onyx":null},{"points":3,"diamond":null,"sapphire":3,"emerald":3,"ruby":3,"onyx":null},{"points":3,"diamond":null,"sapphire":null,"emerald":3,"ruby":3,"onyx":3},{"points":3,"diamond":3,"sapphire":null,"emerald":null,"ruby":3,"onyx":3},{"points":3,"diamond":null,"sapphire":4,"emerald":4,"ruby":null,"onyx":null},{"points":3,"diamond":3,"sapphire":3,"emerald":3,"ruby":null,"onyx":null},{"points":3,"diamond":3,"sapphire":3,"emerald":null,"ruby":null,"onyx":3}]')},32:function(e,n,t){},37:function(e,n){function t(e){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}t.keys=function(){return[]},t.resolve=t,e.exports=t,t.id=37},38:function(e,n,t){"use strict";t.r(n);var r,i,a,l,o,s,u,d,c,p,m,h,b,y=t(1),x=t.n(y),f=t(18),g=t.n(f),j=(t(32),t(9)),v=t(3),O=t(4),k=t(13),I=t(5),w=t(6),C=t(8),S=t(7),L=t(15),D=t.n(L),E=t(19),P=t(20),G=t(0),N=O.a.div(r||(r=Object(v.a)(["\n  width: 100%;\n  background: #999;\n  text-align: center;\n  height: 100%;\n"]))),A=O.a.div.attrs((function(e){return{imageSrc:e.imageSrc,bgColor:e.bgColor||"#555555"}}))(i||(i=Object(v.a)(["\n  background-image: url(",");\n  background-color: ",";\n  background-size: contain;\n  background-position: center center;\n  background-repeat: no-repeat;\n  height: 100%;\n"])),(function(e){return e.imageSrc}),(function(e){return e.bgColor})),B=O.a.h1(a||(a=Object(v.a)(["\n  font-size: 70px;\n  color: #FFDC73;\n  -webkit-text-stroke: 1px #BF9B30;\n  margin: 0;\n  padding: 20px 0 50px 0;\n"]))),R=O.a.h2(l||(l=Object(v.a)(["\n  font-size: 36px;\n  color: #FFDC73;\n  -webkit-text-stroke: 0.5px #BF9B30;\n  text-shadow: 1px 1px 1px #000;\n  margin: 0;\n  text-align: center;\n"]))),M=function(){return Object(G.jsx)(R,{children:"Schmeckles"})},T=O.a.button(o||(o=Object(v.a)(["\n  border-radius: 0;\n  font-size: 28px;\n  padding: 10px;\n  background: #91a4e6;\n  border: 2px solid #3451b3;\n  width: 400px;\n"]))),F=O.a.div(s||(s=Object(v.a)(["\n  display: flex;\n  margin: 20px auto;\n  width: 400px;\n"]))),J=O.a.input(u||(u=Object(v.a)(["\n  font-size: 28px;\n  padding: 10px;\n  border: 2px solid #ccc;\n  text-align: center;\n  text-transform: uppercase;\n  width: 150px;\n"]))),z=O.a.button(d||(d=Object(v.a)(["\n  border-radius: 0;\n  font-size: 28px;\n  padding: 10px;\n  border: 2px solid #2f8a33;\n  background: #5ee465;\n  margin-left: 20px;\n  width: 230px;\n"]))),U=function(e){Object(C.a)(t,e);var n=Object(S.a)(t);function t(e){var r;return Object(I.a)(this,t),(r=n.call(this,e)).state=void 0,r.state={background:{src:e.src||"",color:""}},r}return Object(w.a)(t,[{key:"componentDidMount",value:function(){this.loadBackground()}},{key:"loadBackground",value:function(){var e=Object(E.a)(D.a.mark((function e(){var n,t,r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props.src||"".concat("","/splash/splash").concat(Math.floor(16*Math.random())+1,".jpg"),t=new P.a,e.next=4,t.getColorAsync(n);case 4:r=e.sent,this.setState({background:{src:n,color:r.hex}});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(G.jsx)(A,{imageSrc:this.state.background.src,bgColor:this.state.background.color,children:this.props.children})}}]),t}(x.a.Component),Y=O.a.a(c||(c=Object(v.a)(["\n  color: #00d9ff;\n  text-decoration: underline;\n  cursor: pointer;\n"]))),W=O.a.p(p||(p=Object(v.a)(["\n  color: #fff;\n  font-size: 24px;\n  text-shadow: 1px 1px 1px #000;\n  font-weight: bold;\n  user-select: none;\n"]))),H=O.a.a(m||(m=Object(v.a)(["\n  border-bottom: 1px dashed #fff;\n  cursor: pointer;\n"]))),_=O.a.input(h||(h=Object(v.a)(["\n  padding: 2px;\n  font-size: 20px;\n  text-align: center;\n  margin-left: 10px;\n  width: 140px;\n"]))),Q=O.a.div(b||(b=Object(v.a)(["\n  font-size: 20px;\n  color: #fff;\n  display: inline-block;\n  padding: 8px;\n  border-radius: 8px;\n  background: rgba(255, 0, 0, 0.5);\n"]))),V=["Helgi","Finnbogi","Abu","Jean","Samo","Giovanni","Lu\xeds","Jeanne","Gregorio","Domini","Andres","Guglielmo","Hugo","Muhammad","Eldad","Wulfstan","Joseph","Aldo","Alessio","Cosimo","Fabritio","Francesca","Galileo","Isabetta","Lavinia","Madalena","Minerva","Nencia","Vinci"],K=V[Math.floor(Math.random()*V.length)];function q(e){var n=Object(y.useState)(!1),t=Object(j.a)(n,2),r=t[0],i=t[1],a=Object(y.useState)(K),l=Object(j.a)(a,2),o=l[0],s=l[1],u=Object(y.useState)(""),d=Object(j.a)(u,2),c=d[0],p=d[1];return Object(y.useEffect)((function(){if(window.location.pathname.length>1){var e=window.location.pathname.replace("/","");4===e.length&&p(e)}}),[]),Object(G.jsx)(N,{children:Object(G.jsxs)(U,{src:"".concat("","/splash/splash17.jpg"),children:[Object(G.jsx)(B,{children:"Schmeckles"}),e.errorMessage?Object(G.jsx)(Q,{children:e.errorMessage}):null,Object(G.jsxs)(W,{children:["Welcome,",r?Object(G.jsx)(_,{type:"text",placeholder:o,autoFocus:!0,onChange:function(e){return s(e.target.value)},onKeyPress:function(e){13===e.which&&i(!1)}}):Object(G.jsxs)(G.Fragment,{children:["\xa0",Object(G.jsx)(H,{onClick:function(){return i(!0)},children:o}),"! \xa0",Object(G.jsx)(Y,{onClick:function(){return i(!0)},children:"Change Name"})]})]}),Object(G.jsx)(T,{onClick:function(){return e.hostLobby(o)},children:"Host a game"}),Object(G.jsxs)(F,{children:[Object(G.jsx)(J,{type:"text",placeholder:"Code",value:c,onChange:function(e){return p(e.target.value)}}),Object(G.jsx)(z,{disabled:4!==c.length,onClick:function(){return e.joinLobby(c,o)},children:"Join Game"})]})]})})}var X,Z,$=t(24),ee=t.n($);!function(e){e.DISBANDED="DISBANDED",e.DISCONNECTED="DISCONNECTED",e.LOBBY_PLAYERS="LOBBY_PLAYERS"}(X||(X={})),function(e){e.DISCONNECTING="DISCONNECTING"}(Z||(Z={}));var ne,te=function(){function e(n,t){Object(I.a)(this,e),this.onError=function(e){},this.player=void 0,this.connectionId=void 0,this.peer=void 0,this.debugLevel=void 0,this.player=n,this.debugLevel=3,this.connectionId=this.createConnectionId(),this.peer=new ee.a(this.fullyQualifiedId(this.connectionId),{debug:this.debugLevel}),this.peer.on("error",t)}return Object(w.a)(e,[{key:"fullyQualifiedId",value:function(e){return"schmeckles_".concat(e)}}]),e}(),re=function(e){Object(C.a)(t,e);var n=Object(S.a)(t);function t(){var e;Object(I.a)(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=n.call.apply(n,[this].concat(i))).clients=[],e.players=[],e}return Object(w.a)(t,[{key:"createConnectionId",value:function(){return Math.random().toString(20).substr(2,4).toUpperCase()}},{key:"host",value:function(e,n){var t=this;this.player.connected=!0,this.players=[this.player],this.peer.on("open",(function(r){e(t.connectionId),t.peer.on("connection",(function(e){var r=e.metadata;t.players.length<4&&r.name.length>0&&(t.players.push(r),t.clients.push(e),n(t.players),t.broadcast({type:X.LOBBY_PLAYERS,meta:t.players})),e.on("open",(function(){e.metadata.connected=!0,t.broadcast({type:X.LOBBY_PLAYERS,meta:t.players}),n(t.players)})),e.on("close",(function(){console.log("closed connection with "+e.metadata.name),t.players.splice(t.players.findIndex((function(n){return n.connectionId===e.peer})),1),t.broadcast({type:X.LOBBY_PLAYERS,meta:t.players}),n(t.players)})),e.on("data",(function(e){console.log("Received",e)}))}))}))}},{key:"broadcast",value:function(e){console.log("Broadcasting: ",e),this.clients.forEach((function(n){n.send(e)}))}},{key:"disconnect",value:function(){this.broadcast({type:X.DISBANDED}),this.peer.disconnect()}}]),t}(te),ie=function(e){Object(C.a)(t,e);var n=Object(S.a)(t);function t(){var e;Object(I.a)(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=n.call.apply(n,[this].concat(i))).code="",e}return Object(w.a)(t,[{key:"createConnectionId",value:function(){return Math.random().toString(20).substr(2,10)}},{key:"join",value:function(e,n){var t=this;this.peer.on("open",(function(r){t.player.connectionId=t.fullyQualifiedId(t.connectionId);var i=t.peer.connect(t.fullyQualifiedId(e),{metadata:t.player});t.code=e,i.on("open",(function(){i.on("data",(function(e){console.log("Received broadcast: ",e),n(e)})),i.on("close",(function(){n({type:X.DISCONNECTED})}))}))}))}},{key:"disconnect",value:function(){this.peer.connections[this.fullyQualifiedId(this.code)][0].close()}}]),t}(te),ae=t(2),le=t(25),oe=t(26),se=t(27),ue=function(e){return{passed:e.length>1,message:"There must be at least two players to start"}},de=function(e){return{passed:!e,message:"Game has already started."}},ce=function(e){return{passed:e,message:"Game must be started first."}},pe=function(e,n,t){return{passed:n.indexOf(e)+1===t,message:"Players can only act when it is their turn."}};!function(e){e.JoinGame="JoinGame",e.StartGame="StartGame",e.TakeGems="TakeGems",e.ReserveCard="ReserveCard",e.PurchaseCard="PurchaseCard"}(ne||(ne={}));var me,he,be=function(){function e(n){Object(I.a)(this,e),this.type=void 0,this.player=void 0,this.rules=void 0,this.failedRules=void 0,this.player=n,this.rules=[],this.failedRules=[]}return Object(w.a)(e,[{key:"checkRules",value:function(e){var n=this;return this.rules.forEach((function(t){var r=t(e);r.passed||n.failedRules.push(r)})),!(this.failedRules.length>0)}},{key:"nextTurn",value:function(e){var n=e.turn+1;n>e.players.length&&(n=1),e.turn=n}}],[{key:"create",value:function(e,n,t){var r;return new(0,(r={},Object(ae.a)(r,ne.JoinGame,fe),Object(ae.a)(r,ne.StartGame,xe),Object(ae.a)(r,ne.TakeGems,ge),Object(ae.a)(r,ne.PurchaseCard,je),Object(ae.a)(r,ne.ReserveCard,ve),r)[n])(e,Object(se.a)({},t))}}]),e}(),ye=function(e,n,t){Object.keys(e).forEach((function(r){e[r]-=t[r],n[r]+=t[r]}))},xe=function(e){Object(C.a)(t,e);var n=Object(S.a)(t);function t(e,r){var i;return Object(I.a)(this,t),(i=n.call(this,e)).type=ne.StartGame,i.rules=[function(e){return ue(e.players)},function(e){return de(e.started)}],i}return Object(w.a)(t,[{key:"act",value:function(e){e.started=!0,e.turn=1}}]),t}(be),fe=function(e){Object(C.a)(t,e);var n=Object(S.a)(t);function t(e,r){var i;return Object(I.a)(this,t),(i=n.call(this,e)).isContextPlayer=void 0,i.type=ne.JoinGame,i.isContextPlayer=r.isContextPlayer,i.rules=[function(e){return{passed:e.players.length<4,message:"This game is full."}},function(e){return de(e.started)}],i}return Object(w.a)(t,[{key:"act",value:function(e){e.players.push(this.player),this.isContextPlayer&&(e.contextPlayer=this.player)}}]),t}(be),ge=function(e){Object(C.a)(t,e);var n=Object(S.a)(t);function t(e,r){var i;return Object(I.a)(this,t),(i=n.call(this,e)).gems=void 0,i.type=ne.TakeGems,i.gems=r.gems,i.rules=[function(e){return ce(e.started)},function(e){return ue(e.players)},function(e){return pe(i.player,e.players,e.turn)},function(e){return n=i.gems,t=e.gems,{passed:0===Object.keys(n).filter((function(e){return n[e]>t[e]})).length,message:"Not enough gems in the bank to complete this action."};var n,t},function(e){return{passed:0===i.gems.star,message:"Only valid gems can be selected."}},function(e){var n,t=Object.values(i.gems).reduce((function(e,n){return e+n}));if(2===t){var r=(n=i.gems,{passed:1===Object.values(n).filter((function(e){return e>0})).length,message:"Gems must be of the same type when taking two gems."});return r.passed?function(e,n){return{passed:n[e]>=4,message:"There must be at least four gems of the desired type in the bank to take two gems."}}(Object.keys(i.gems).filter((function(e){return 2==i.gems[e]}))[0],e.gems):r}return 3===t?function(e){return{passed:0===Object.keys(e).filter((function(n){return e[n]>1})).length,message:"Gems must be of different types to take three gems."}}(i.gems):function(e){return{passed:e>=2&&e<=3,message:"Only two or three gems can be taken per turn."}}(t)}],i}return Object(w.a)(t,[{key:"act",value:function(e){ye(e.gems,this.player.gems,this.gems),this.nextTurn(e)}}]),t}(be),je=function(e){Object(C.a)(t,e);var n=Object(S.a)(t);function t(e,r){var i;return Object(I.a)(this,t),(i=n.call(this,e)).cards=void 0,i.index=void 0,i.type=ne.PurchaseCard,i.index=r.index,i.cards=r.cards,i.rules=[function(e){return ce(e.started)},function(e){return ue(e.players)},function(e){return pe(i.player,e.players,e.turn)},function(e){return function(e,n){return{passed:0===Object.keys(e.costs).filter((function(t){return e.costs[t]>n.gems[t]+n.cards.cards.filter((function(e){return e.gem===me[t]})).length})).length,message:"Not enough gems to purchase this card."}}(i.cards[i.index],i.player)}],i}return Object(w.a)(t,[{key:"act",value:function(e){var n=this.cards.splice(this.index,1)[0];ye(this.player.gems,e.gems,n.costs),n.reserved&&(n.reserved=!1),this.player.cards.cards.push(n),this.nextTurn(e)}}]),t}(be),ve=function(e){Object(C.a)(t,e);var n=Object(S.a)(t);function t(e,r){var i;return Object(I.a)(this,t),(i=n.call(this,e)).cards=void 0,i.index=void 0,i.type=ne.ReserveCard,i.cards=r.cards,i.index=r.index,i.rules=[function(e){return ce(e.started)},function(e){return ue(e.players)},function(e){return pe(i.player,e.players,e.turn)},function(e){return{passed:i.player.reservedCards.length<3,message:"A maximum of three cards may be reserved."}}],i}return Object(w.a)(t,[{key:"act",value:function(e){var n=this.cards.splice(this.index,1)[0],t=Pe();t.star=1,ye(e.gems,this.player.gems,t),n.reserved=!0,this.player.reservedCards.push(n),this.nextTurn(e)}}]),t}(be);!function(e){e.Ruby="ruby",e.Sapphire="sapphire",e.Onyx="onyx",e.Emerald="emerald",e.Diamond="diamond",e.Star="star"}(me||(me={})),function(e){e[e.I=1]="I",e[e.II=2]="II",e[e.III=3]="III"}(he||(he={}));var Oe,ke,Ie,we,Ce,Se,Le,De,Ee,Pe=function(){var e;return e={},Object(ae.a)(e,me.Ruby,0),Object(ae.a)(e,me.Sapphire,0),Object(ae.a)(e,me.Diamond,0),Object(ae.a)(e,me.Onyx,0),Object(ae.a)(e,me.Emerald,0),Object(ae.a)(e,me.Star,0),e},Ge=function(e){return Object(k.a)(e).reduceRight((function(e,n,t,r){return e.push(r.splice(0|Math.random()*r.length,1)[0]),e}),[])},Ne=function e(n,t,r,i){Object(I.a)(this,e),this.points=void 0,this.gem=void 0,this.tier=void 0,this.costs=void 0,this.reserved=void 0,this.points=n,this.gem=t,this.tier=r,this.costs=i},Ae=function(){function e(n,t){Object(I.a)(this,e),this.cards=void 0,this.tier=void 0,n&&(this.tier=n),this.cards=t?Ge(t):[]}return Object(w.a)(e,[{key:"draw",value:function(e,n){this.cards.splice(0,e).forEach((function(e){return n.cards.push(e)}))}}]),e}(),Be=function(){function e(){var n;Object(I.a)(this,e),this.tierICards=void 0,this.tierIICards=void 0,this.tierIIICards=void 0,this.tierIDrawPile=void 0,this.tierIIDrawPile=void 0,this.tierIIIDrawPile=void 0,this.nobles=void 0,this.gems=void 0,this.players=void 0,this.started=void 0,this.contextPlayer=void 0,this.turn=void 0;var t=le.map((function(e){var n;return new Ne(e.points||0,e.gem,e.tier,(n={},Object(ae.a)(n,me.Ruby,e.ruby||0),Object(ae.a)(n,me.Sapphire,e.sapphire||0),Object(ae.a)(n,me.Diamond,e.diamond||0),Object(ae.a)(n,me.Onyx,e.onyx||0),Object(ae.a)(n,me.Emerald,e.emerald||0),Object(ae.a)(n,me.Star,0),n))})),r=Ge(oe.map((function(e){var n;return{points:e.points,costs:(n={},Object(ae.a)(n,me.Ruby,e.ruby||0),Object(ae.a)(n,me.Sapphire,e.sapphire||0),Object(ae.a)(n,me.Diamond,e.diamond||0),Object(ae.a)(n,me.Onyx,e.onyx||0),Object(ae.a)(n,me.Emerald,e.emerald||0),n)}})));this.players=[],this.nobles=r.splice(0,3),this.tierICards=new Ae(he.I,[]),this.tierIICards=new Ae(he.II,[]),this.tierIIICards=new Ae(he.III,[]),this.tierIDrawPile=new Ae(he.I,t.filter((function(e){return e.tier===he.I}))),this.tierIIDrawPile=new Ae(he.II,t.filter((function(e){return e.tier===he.II}))),this.tierIIIDrawPile=new Ae(he.III,t.filter((function(e){return e.tier===he.III}))),this.drawVisibleCards(),this.turn=1,this.started=!1,this.gems=(n={},Object(ae.a)(n,me.Ruby,7),Object(ae.a)(n,me.Sapphire,7),Object(ae.a)(n,me.Diamond,7),Object(ae.a)(n,me.Onyx,7),Object(ae.a)(n,me.Emerald,7),Object(ae.a)(n,me.Star,5),n)}return Object(w.a)(e,[{key:"drawVisibleCards",value:function(){this.tierIDrawPile.draw(4-this.tierICards.cards.length,this.tierICards),this.tierIIDrawPile.draw(4-this.tierIICards.cards.length,this.tierIICards),this.tierIIIDrawPile.draw(4-this.tierIIICards.cards.length,this.tierIIICards)}}]),e}(),Re=function e(n){Object(I.a)(this,e),this.id=void 0,this.name=void 0,this.gems=void 0,this.cards=void 0,this.reservedCards=void 0,this.nobles=void 0,this.connected=void 0,this.connectionId=void 0,this.id=n,this.name=n,this.gems=Pe(),this.cards=new Ae,this.reservedCards=[],this.nobles=[],this.connected=!1,this.connectionId=""};(function(){function e(){Object(I.a)(this,e),this.gameState=void 0,this.onStateUpdateCallback=void 0,this.gameState=new Be,this.onStateUpdateCallback=null}return Object(w.a)(e,[{key:"getPlayer",value:function(e){return this.gameState.players.filter((function(n){return n.id===e}))[0]}},{key:"onStateUpdate",value:function(e){this.onStateUpdateCallback=e}},{key:"sendAction",value:function(e,n,t){var r=be.create(e,n,t);this.receiveAction(r)}},{key:"receiveAction",value:function(e){e.checkRules(this.gameState)?e.act(this.gameState):e.failedRules.map((function(e){return alert(e.message)})),this.onStateUpdateCallback&&this.onStateUpdateCallback(this.gameState)}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}},{key:"reset",value:function(){return e.instance=void 0,this.getInstance()}}]),e}()).instance=void 0;var Me,Te=O.a.div(Oe||(Oe=Object(v.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n"]))),Fe=O.a.div(ke||(ke=Object(v.a)(["\n  flex-direction: column;\n  display: flex;\n  justify-content: center;\n  text-shadow: 1px 1px 1px #000;\n  text-align: center;\n  color: #fff;\n"]))),Je=O.a.div(Ie||(Ie=Object(v.a)(["\n  width: 450px;\n  display: flex;\n  flex-wrap: wrap;\n"]))),ze=O.a.div(we||(we=Object(v.a)(["\n  width: 200px;\n  border: 2px solid #ccc;\n  height: 200px;\n  margin: 10px;\n  background: rgba(55,55,55,0.5);\n  text-align: center;\n  color: #fff;\n  text-shadow: 1px 1px 1px #000;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n"]))),Ue=O.a.div(Ce||(Ce=Object(v.a)(["\n  font-size: 24px;\n  padding: 20px;\n"]))),Ye=O.a.input(Se||(Se=Object(v.a)(["\n  background: rgba(55,55,55,0.6);\n  font-size: 24px;\n  text-align: center;\n  color: #fff;\n  border: 0;\n  display: inline;\n  width: 80px;\n  text-shadow: 1px 1px 1px #000;\n  text-decoration: underline;\n  padding: 4px 8px;\n  border-radius: 4px;\n  cursor: pointer;\n"]))),We=O.a.a(Le||(Le=Object(v.a)(["\n  font-size: 14px;\n  cursor: pointer;\n  border: 1px solid #ff0000;\n  border-radius: 3px;\n  color: #eee;\n  background: rgba(214, 38, 15, 0.5);\n  margin-left: 10px;\n  padding: 4px;\n"]))),He=O.a.button(De||(De=Object(v.a)(["\n  border-radius: 0;\n  font-size: 28px;\n  padding: 10px;\n  background: #91a4e6;\n  border: 2px solid #3451b3;\n  margin: 10px;\n  width: auto;\n"]))),_e=O.a.span(Ee||(Ee=Object(v.a)(["\n  color: #aaa;\n"]))),Qe={players:[],code:""},Ve=function(e){Object(C.a)(t,e);var n=Object(S.a)(t);function t(e){var r;return Object(I.a)(this,t),(r=n.call(this,e)).player=void 0,r.host=void 0,r.player=new Re(e.playerName),r.state=Qe,r.host=new re(r.player,(function(e){return r.networkErrorHandler(e)})),r}return Object(w.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({players:[this.player]}),this.setWindowCloseDialog(),window.onunload=function(){return e.host.disconnect()},this.host.host((function(n){return e.setState({code:n})}),(function(n){return e.setState({players:n})}))}},{key:"disbandLobby",value:function(){window.confirm("Are you sure you want to disband this lobby? Players will not be able to join with this lobby code.")&&this.props.setIsHostingLobby&&(this.props.setIsHostingLobby(!1),window.history.pushState({},"Schmeckles","/"),document.title="Schmeckles")}},{key:"cleanupLobby",value:function(){window.onbeforeunload=null,this.host.disconnect()}},{key:"componentWillUnmount",value:function(){this.cleanupLobby()}},{key:"setWindowCloseDialog",value:function(){window.onbeforeunload=function(e){var n="Are you sure you want to disband this lobby?";return(e=e||window.event)&&(e.returnValue=n),n}}},{key:"startGame",value:function(){}},{key:"networkErrorHandler",value:function(e){}},{key:"render",value:function(){var e=this;return Object(G.jsx)(Xe,{code:this.state.code,players:this.state.players,disbandLobby:function(){return e.disbandLobby()},startGame:function(){return e.startGame()}})}}]),t}(x.a.Component),Ke={players:[],code:""},qe=function(e){Object(C.a)(t,e);var n=Object(S.a)(t);function t(e){var r;return Object(I.a)(this,t),(r=n.call(this,e)).player=void 0,r.client=void 0,r.state=Ke,r.player=new Re(e.playerName),r.client=new ie(r.player,(function(e){return r.networkErrorHandler(e)})),r}return Object(w.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({code:this.props.joinLobbyCode}),window.onunload=function(){return e.client.disconnect()},this.client.join(this.props.joinLobbyCode,(function(n){switch(n.type){case X.DISBANDED:e.exitWithErrorMessage("Lobby was disbanded by host");break;case X.DISCONNECTED:e.exitWithErrorMessage("Disconnected");break;case X.LOBBY_PLAYERS:e.setState({players:n.meta})}}))}},{key:"componentWillUnmount",value:function(){this.cleanupLobby()}},{key:"exitWithErrorMessage",value:function(e){this.props.setErrorMessage(e),this.props.setJoinLobbyCode("")}},{key:"networkErrorHandler",value:function(e){"peer-unavailable"===e.type&&this.exitWithErrorMessage("Lobby not found")}},{key:"cleanupLobbyAndExit",value:function(){this.cleanupLobby(),this.client.disconnect(),this.props.setJoinLobbyCode("")}},{key:"cleanupLobby",value:function(){window.history.pushState({},"Schmeckles","/"),document.title="Schmeckles"}},{key:"render",value:function(){var e=this;return Object(G.jsx)(Xe,{code:this.state.code,players:this.state.players,exitLobby:function(){return e.cleanupLobbyAndExit()}})}}]),t}(x.a.Component),Xe=function(e){Object(C.a)(t,e);var n=Object(S.a)(t);function t(e){var r;return Object(I.a)(this,t),(r=n.call(this,e)).codeInput=void 0,r.updateBrowserLocation=function(e){window.history.pushState({},"[".concat(e,"] Schmeckles"),"/".concat(e)),document.title="[".concat(e,"] Schmeckles")},r.copyCodeToClipboard=function(){r.codeInput.current.select(),document.execCommand("copy")},r.codeInput=x.a.createRef(),r}return Object(w.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.code!==e.code&&this.updateBrowserLocation(this.props.code)}},{key:"render",value:function(){var e=this;return Object(G.jsx)(Te,{children:Object(G.jsxs)(Fe,{children:[Object(G.jsx)(M,{}),this.props.code?Object(G.jsx)(G.Fragment,{children:Object(G.jsxs)(Ue,{children:["Lobby Code: ",Object(G.jsx)(Ye,{ref:this.codeInput,type:"text",value:this.props.code,readOnly:!0,onClick:this.copyCodeToClipboard}),this.props.disbandLobby?Object(G.jsx)(We,{onClick:function(){return e.props.disbandLobby&&e.props.disbandLobby()},children:"Disband Lobby"}):null,this.props.exitLobby?Object(G.jsx)(We,{onClick:function(){return e.props.exitLobby&&e.props.exitLobby()},children:"Exit Lobby"}):null]})}):Object(G.jsx)(G.Fragment,{children:"Establishing P2P network connection..."}),Object(G.jsx)(Je,{children:Object(k.a)(Array(4)).map((function(n,t){return Object(G.jsx)(ze,{children:e.props.players[t]?Object(G.jsx)(G.Fragment,{children:e.props.players[t].connected?Object(G.jsx)(G.Fragment,{children:e.props.players[t].name}):Object(G.jsx)(_e,{children:e.props.players[t].name})}):Object(G.jsx)(G.Fragment,{children:"Waiting for players..."})},t)}))}),this.props.players.length<2?Object(G.jsx)("p",{children:"At least two players needed to start game."}):null,this.props.startGame?Object(G.jsx)(He,{disabled:this.props.players.length<2,onClick:function(){return e.props.startGame&&e.props.startGame()},children:"Start Game"}):null]})})}}]),t}(x.a.Component),Ze=O.a.div(Me||(Me=Object(v.a)(["\n  height: 100%;\n"]))),$e=function(){var e=Object(y.useState)(!1),n=Object(j.a)(e,2),t=n[0],r=n[1],i=Object(y.useState)(""),a=Object(j.a)(i,2),l=a[0],o=a[1],s=Object(y.useState)(""),u=Object(j.a)(s,2),d=u[0],c=u[1],p=Object(y.useState)(""),m=Object(j.a)(p,2),h=m[0],b=m[1];return Object(G.jsx)(U,{children:Object(G.jsxs)(Ze,{children:[t?Object(G.jsx)(Ve,{playerName:l,setIsHostingLobby:r,setErrorMessage:b}):null,d?Object(G.jsx)(qe,{playerName:l,joinLobbyCode:d,setErrorMessage:b,setJoinLobbyCode:c}):null,t||d?null:Object(G.jsx)(q,{hostLobby:function(e){r(!0),o(e)},joinLobby:function(e,n){c(e),o(n)},errorMessage:h})]})})},en=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,39)).then((function(n){var t=n.getCLS,r=n.getFID,i=n.getFCP,a=n.getLCP,l=n.getTTFB;t(e),r(e),i(e),a(e),l(e)}))};g.a.render(Object(G.jsx)(x.a.StrictMode,{children:Object(G.jsx)($e,{})}),document.getElementById("root")),en()}},[[38,1,2]]]);
//# sourceMappingURL=main.8139f706.chunk.js.map