(this.webpackJsonpspender=this.webpackJsonpspender||[]).push([[0],{28:function(e){e.exports=JSON.parse('[{"gem":"onyx","tier":1,"points":null,"diamond":1,"sapphire":1,"emerald":1,"ruby":1,"onyx":null},{"gem":"onyx","tier":1,"points":null,"diamond":1,"sapphire":2,"emerald":1,"ruby":1,"onyx":null},{"gem":"onyx","tier":1,"points":null,"diamond":2,"sapphire":2,"emerald":null,"ruby":1,"onyx":null},{"gem":"onyx","tier":1,"points":null,"diamond":null,"sapphire":null,"emerald":1,"ruby":3,"onyx":1},{"gem":"onyx","tier":1,"points":null,"diamond":null,"sapphire":null,"emerald":2,"ruby":1,"onyx":null},{"gem":"onyx","tier":1,"points":null,"diamond":2,"sapphire":null,"emerald":2,"ruby":null,"onyx":null},{"gem":"onyx","tier":1,"points":null,"diamond":null,"sapphire":null,"emerald":3,"ruby":null,"onyx":null},{"gem":"onyx","tier":1,"points":1,"diamond":null,"sapphire":4,"emerald":null,"ruby":null,"onyx":null},{"gem":"sapphire","tier":1,"points":null,"diamond":1,"sapphire":null,"emerald":1,"ruby":1,"onyx":1},{"gem":"sapphire","tier":1,"points":null,"diamond":1,"sapphire":null,"emerald":1,"ruby":2,"onyx":1},{"gem":"sapphire","tier":1,"points":null,"diamond":1,"sapphire":null,"emerald":2,"ruby":2,"onyx":null},{"gem":"sapphire","tier":1,"points":null,"diamond":null,"sapphire":1,"emerald":3,"ruby":1,"onyx":null},{"gem":"sapphire","tier":1,"points":null,"diamond":1,"sapphire":null,"emerald":null,"ruby":null,"onyx":2},{"gem":"sapphire","tier":1,"points":null,"diamond":null,"sapphire":null,"emerald":2,"ruby":null,"onyx":2},{"gem":"sapphire","tier":1,"points":null,"diamond":null,"sapphire":null,"emerald":null,"ruby":null,"onyx":3},{"gem":"sapphire","tier":1,"points":1,"diamond":null,"sapphire":null,"emerald":null,"ruby":4,"onyx":null},{"gem":"diamond","tier":1,"points":null,"diamond":null,"sapphire":1,"emerald":1,"ruby":1,"onyx":1},{"gem":"diamond","tier":1,"points":null,"diamond":null,"sapphire":1,"emerald":2,"ruby":1,"onyx":1},{"gem":"diamond","tier":1,"points":null,"diamond":null,"sapphire":2,"emerald":2,"ruby":null,"onyx":1},{"gem":"diamond","tier":1,"points":null,"diamond":3,"sapphire":1,"emerald":null,"ruby":null,"onyx":1},{"gem":"diamond","tier":1,"points":null,"diamond":null,"sapphire":null,"emerald":null,"ruby":2,"onyx":1},{"gem":"diamond","tier":1,"points":null,"diamond":null,"sapphire":2,"emerald":null,"ruby":null,"onyx":2},{"gem":"diamond","tier":1,"points":null,"diamond":null,"sapphire":3,"emerald":null,"ruby":null,"onyx":null},{"gem":"diamond","tier":1,"points":1,"diamond":null,"sapphire":null,"emerald":4,"ruby":null,"onyx":null},{"gem":"emerald","tier":1,"points":null,"diamond":1,"sapphire":1,"emerald":null,"ruby":1,"onyx":1},{"gem":"emerald","tier":1,"points":null,"diamond":1,"sapphire":1,"emerald":null,"ruby":1,"onyx":2},{"gem":"emerald","tier":1,"points":null,"diamond":null,"sapphire":1,"emerald":null,"ruby":2,"onyx":2},{"gem":"emerald","tier":1,"points":null,"diamond":1,"sapphire":3,"emerald":1,"ruby":null,"onyx":null},{"gem":"emerald","tier":1,"points":null,"diamond":2,"sapphire":1,"emerald":null,"ruby":null,"onyx":null},{"gem":"emerald","tier":1,"points":null,"diamond":null,"sapphire":2,"emerald":null,"ruby":2,"onyx":null},{"gem":"emerald","tier":1,"points":null,"diamond":null,"sapphire":null,"emerald":null,"ruby":3,"onyx":null},{"gem":"emerald","tier":1,"points":1,"diamond":null,"sapphire":null,"emerald":null,"ruby":null,"onyx":4},{"gem":"ruby","tier":1,"points":null,"diamond":1,"sapphire":1,"emerald":1,"ruby":null,"onyx":1},{"gem":"ruby","tier":1,"points":null,"diamond":2,"sapphire":1,"emerald":1,"ruby":null,"onyx":1},{"gem":"ruby","tier":1,"points":null,"diamond":2,"sapphire":null,"emerald":1,"ruby":null,"onyx":2},{"gem":"ruby","tier":1,"points":null,"diamond":1,"sapphire":null,"emerald":null,"ruby":1,"onyx":3},{"gem":"ruby","tier":1,"points":null,"diamond":null,"sapphire":2,"emerald":1,"ruby":null,"onyx":null},{"gem":"ruby","tier":1,"points":null,"diamond":2,"sapphire":null,"emerald":null,"ruby":2,"onyx":null},{"gem":"ruby","tier":1,"points":null,"diamond":3,"sapphire":null,"emerald":null,"ruby":null,"onyx":null},{"gem":"ruby","tier":1,"points":1,"diamond":4,"sapphire":null,"emerald":null,"ruby":null,"onyx":null},{"gem":"onyx","tier":2,"points":1,"diamond":3,"sapphire":2,"emerald":2,"ruby":null,"onyx":null},{"gem":"onyx","tier":2,"points":1,"diamond":3,"sapphire":null,"emerald":3,"ruby":null,"onyx":2},{"gem":"onyx","tier":2,"points":2,"diamond":null,"sapphire":1,"emerald":4,"ruby":2,"onyx":null},{"gem":"onyx","tier":2,"points":2,"diamond":null,"sapphire":null,"emerald":5,"ruby":3,"onyx":null},{"gem":"onyx","tier":2,"points":2,"diamond":5,"sapphire":null,"emerald":null,"ruby":null,"onyx":null},{"gem":"onyx","tier":2,"points":3,"diamond":null,"sapphire":null,"emerald":null,"ruby":null,"onyx":6},{"gem":"sapphire","tier":2,"points":1,"diamond":null,"sapphire":2,"emerald":2,"ruby":3,"onyx":null},{"gem":"sapphire","tier":2,"points":1,"diamond":null,"sapphire":2,"emerald":3,"ruby":null,"onyx":3},{"gem":"sapphire","tier":2,"points":2,"diamond":5,"sapphire":3,"emerald":null,"ruby":null,"onyx":null},{"gem":"sapphire","tier":2,"points":2,"diamond":2,"sapphire":null,"emerald":null,"ruby":1,"onyx":4},{"gem":"sapphire","tier":2,"points":2,"diamond":null,"sapphire":5,"emerald":null,"ruby":null,"onyx":null},{"gem":"sapphire","tier":2,"points":3,"diamond":null,"sapphire":6,"emerald":null,"ruby":null,"onyx":null},{"gem":"diamond","tier":2,"points":1,"diamond":null,"sapphire":null,"emerald":3,"ruby":2,"onyx":2},{"gem":"diamond","tier":2,"points":1,"diamond":2,"sapphire":3,"emerald":null,"ruby":3,"onyx":null},{"gem":"diamond","tier":2,"points":2,"diamond":null,"sapphire":null,"emerald":1,"ruby":4,"onyx":2},{"gem":"diamond","tier":2,"points":2,"diamond":null,"sapphire":null,"emerald":null,"ruby":5,"onyx":3},{"gem":"diamond","tier":2,"points":2,"diamond":null,"sapphire":null,"emerald":null,"ruby":5,"onyx":null},{"gem":"diamond","tier":2,"points":3,"diamond":6,"sapphire":null,"emerald":null,"ruby":null,"onyx":null},{"gem":"emerald","tier":2,"points":1,"diamond":3,"sapphire":null,"emerald":2,"ruby":3,"onyx":null},{"gem":"emerald","tier":2,"points":1,"diamond":2,"sapphire":3,"emerald":null,"ruby":null,"onyx":2},{"gem":"emerald","tier":2,"points":2,"diamond":4,"sapphire":2,"emerald":null,"ruby":null,"onyx":1},{"gem":"emerald","tier":2,"points":2,"diamond":null,"sapphire":5,"emerald":3,"ruby":null,"onyx":null},{"gem":"emerald","tier":2,"points":2,"diamond":null,"sapphire":null,"emerald":5,"ruby":null,"onyx":null},{"gem":"emerald","tier":2,"points":3,"diamond":null,"sapphire":null,"emerald":6,"ruby":null,"onyx":null},{"gem":"ruby","tier":2,"points":1,"diamond":2,"sapphire":null,"emerald":null,"ruby":2,"onyx":3},{"gem":"ruby","tier":2,"points":1,"diamond":null,"sapphire":3,"emerald":null,"ruby":2,"onyx":3},{"gem":"ruby","tier":2,"points":2,"diamond":1,"sapphire":4,"emerald":2,"ruby":null,"onyx":null},{"gem":"ruby","tier":2,"points":2,"diamond":3,"sapphire":null,"emerald":null,"ruby":null,"onyx":5},{"gem":"ruby","tier":2,"points":2,"diamond":null,"sapphire":null,"emerald":null,"ruby":null,"onyx":5},{"gem":"ruby","tier":2,"points":3,"diamond":null,"sapphire":null,"emerald":null,"ruby":6,"onyx":null},{"gem":"onyx","tier":3,"points":3,"diamond":3,"sapphire":3,"emerald":5,"ruby":3,"onyx":null},{"gem":"onyx","tier":3,"points":4,"diamond":null,"sapphire":null,"emerald":null,"ruby":7,"onyx":null},{"gem":"onyx","tier":3,"points":4,"diamond":null,"sapphire":null,"emerald":3,"ruby":6,"onyx":3},{"gem":"onyx","tier":3,"points":5,"diamond":null,"sapphire":null,"emerald":null,"ruby":7,"onyx":3},{"gem":"sapphire","tier":3,"points":3,"diamond":3,"sapphire":null,"emerald":3,"ruby":3,"onyx":5},{"gem":"sapphire","tier":3,"points":4,"diamond":7,"sapphire":null,"emerald":null,"ruby":null,"onyx":null},{"gem":"sapphire","tier":3,"points":4,"diamond":6,"sapphire":3,"emerald":null,"ruby":null,"onyx":3},{"gem":"sapphire","tier":3,"points":5,"diamond":7,"sapphire":3,"emerald":null,"ruby":null,"onyx":null},{"gem":"diamond","tier":3,"points":3,"diamond":null,"sapphire":3,"emerald":3,"ruby":5,"onyx":3},{"gem":"diamond","tier":3,"points":4,"diamond":null,"sapphire":null,"emerald":null,"ruby":null,"onyx":7},{"gem":"diamond","tier":3,"points":4,"diamond":3,"sapphire":null,"emerald":null,"ruby":3,"onyx":6},{"gem":"diamond","tier":3,"points":5,"diamond":3,"sapphire":null,"emerald":null,"ruby":null,"onyx":7},{"gem":"emerald","tier":3,"points":3,"diamond":5,"sapphire":3,"emerald":null,"ruby":3,"onyx":3},{"gem":"emerald","tier":3,"points":4,"diamond":null,"sapphire":7,"emerald":null,"ruby":null,"onyx":null},{"gem":"emerald","tier":3,"points":4,"diamond":3,"sapphire":6,"emerald":3,"ruby":null,"onyx":null},{"gem":"emerald","tier":3,"points":5,"diamond":null,"sapphire":7,"emerald":3,"ruby":null,"onyx":null},{"gem":"ruby","tier":3,"points":3,"diamond":3,"sapphire":5,"emerald":3,"ruby":null,"onyx":3},{"gem":"ruby","tier":3,"points":4,"diamond":null,"sapphire":null,"emerald":7,"ruby":null,"onyx":null},{"gem":"ruby","tier":3,"points":4,"diamond":null,"sapphire":3,"emerald":6,"ruby":3,"onyx":null},{"gem":"ruby","tier":3,"points":5,"diamond":null,"sapphire":null,"emerald":7,"ruby":3,"onyx":null}]')},29:function(e){e.exports=JSON.parse('[{"points":3,"diamond":null,"sapphire":null,"emerald":null,"ruby":4,"onyx":4},{"points":3,"diamond":null,"sapphire":null,"emerald":4,"ruby":4,"onyx":null},{"points":3,"diamond":4,"sapphire":null,"emerald":null,"ruby":null,"onyx":4},{"points":3,"diamond":4,"sapphire":4,"emerald":null,"ruby":null,"onyx":null},{"points":3,"diamond":null,"sapphire":3,"emerald":3,"ruby":3,"onyx":null},{"points":3,"diamond":null,"sapphire":null,"emerald":3,"ruby":3,"onyx":3},{"points":3,"diamond":3,"sapphire":null,"emerald":null,"ruby":3,"onyx":3},{"points":3,"diamond":null,"sapphire":4,"emerald":4,"ruby":null,"onyx":null},{"points":3,"diamond":3,"sapphire":3,"emerald":3,"ruby":null,"onyx":null},{"points":3,"diamond":3,"sapphire":3,"emerald":null,"ruby":null,"onyx":3}]')},40:function(e,n,t){},49:function(e,n){function t(e){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}t.keys=function(){return[]},t.resolve=t,e.exports=t,t.id=49},50:function(e,n,t){"use strict";t.r(n);var r,a=t(1),i=t.n(a),l=t(25),o=t.n(l),s=(t(40),t(12)),c=t(2),d=t(3),u=t(13),p=t(5),b=t(6),h=t(10),m=t(9),y=t(20),x=t.n(y),f=t(26),j=t(27),g=t(4),O=t(28),v=t(29),w=t(7),k=function(e){return{passed:e.length>1,message:"There must be at least two players to start"}},I=function(e){return{passed:!e,message:"Game has already started."}},E=function(e){return{passed:e,message:"Game must be started first."}},S=function(e,n,t){return{passed:n.findIndex((function(n){return n.id===e.id}))+1===t,message:"Players can only act when it is their turn."}};!function(e){e.JoinGame="JoinGame",e.StartGame="StartGame",e.TakeGems="TakeGems",e.ReserveCard="ReserveCard",e.PurchaseCard="PurchaseCard"}(r||(r={}));var C,z,P=function(){function e(n,t){Object(p.a)(this,e),this.type=void 0,this.player=void 0,this.rules=void 0,this.meta=void 0,this.failedRules=void 0,this.player=n,this.rules=[],this.meta=t,this.failedRules=[]}return Object(b.a)(e,[{key:"checkRules",value:function(e){var n=this;return this.rules.forEach((function(t){var r=t(e);r.passed||n.failedRules.push(r)})),!(this.failedRules.length>0)}},{key:"nextTurn",value:function(e){var n=e.turn+1;n>e.players.length&&(n=1),e.turn=n}}],[{key:"create",value:function(e,n,t){var a;return new(0,(a={},Object(g.a)(a,r.JoinGame,L),Object(g.a)(a,r.StartGame,A),Object(g.a)(a,r.TakeGems,D),Object(g.a)(a,r.PurchaseCard,B),Object(g.a)(a,r.ReserveCard,N),a)[n])(e,Object(w.a)({},t))}}]),e}(),G=function(e,n,t){Object.keys(e).forEach((function(r){e[r]-=t[r],n[r]+=t[r]}))},A=function(e){Object(h.a)(t,e);var n=Object(m.a)(t);function t(e,a){var i;return Object(p.a)(this,t),(i=n.call(this,e,a)).type=r.StartGame,i.rules=[function(e){return k(e.players)},function(e){return I(e.started)}],i}return Object(b.a)(t,[{key:"act",value:function(e){e.started=!0,e.turn=1}}]),t}(P),L=function(e){Object(h.a)(t,e);var n=Object(m.a)(t);function t(e,a){var i;return Object(p.a)(this,t),(i=n.call(this,e,a)).joiningPlayer=void 0,i.type=r.JoinGame,i.joiningPlayer=a.joiningPlayer?a.joiningPlayer:e,i.rules=[function(e){return{passed:e.players.length<4,message:"This game is full."}},function(e){return I(e.started)}],i}return Object(b.a)(t,[{key:"act",value:function(e){e.players.push(this.joiningPlayer)}}]),t}(P),D=function(e){Object(h.a)(t,e);var n=Object(m.a)(t);function t(e,a){var i;return Object(p.a)(this,t),(i=n.call(this,e,a)).gems=void 0,i.type=r.TakeGems,i.gems=a.gems,i.rules=[function(e){return E(e.started)},function(e){return k(e.players)},function(e){return S(i.player,e.players,e.turn)},function(e){return n=i.gems,t=e.gems,{passed:0===Object.keys(n).filter((function(e){return n[e]>t[e]})).length,message:"Not enough gems in the bank to complete this action."};var n,t},function(e){return{passed:0===i.gems.star,message:"Only valid gems can be selected."}},function(e){var n,t=Object.values(i.gems).reduce((function(e,n){return e+n}));if(2===t){var r=(n=i.gems,{passed:1===Object.values(n).filter((function(e){return e>0})).length,message:"Gems must be of the same type when taking two gems."});return r.passed?function(e,n){return{passed:n[e]>=4,message:"There must be at least four gems of the desired type in the bank to take two gems."}}(Object.keys(i.gems).filter((function(e){return 2===i.gems[e]}))[0],e.gems):r}return 3===t?function(e){return{passed:0===Object.keys(e).filter((function(n){return e[n]>1})).length,message:"Gems must be of different types to take three gems."}}(i.gems):function(e){return{passed:e>=2&&e<=3,message:"Only two or three gems can be taken per turn."}}(t)}],i}return Object(b.a)(t,[{key:"act",value:function(e){G(e.gems,this.player.gems,this.gems),this.nextTurn(e)}}]),t}(P),B=function(e){Object(h.a)(t,e);var n=Object(m.a)(t);function t(e,a){var i;return Object(p.a)(this,t),(i=n.call(this,e,a)).cards=void 0,i.index=void 0,i.type=r.PurchaseCard,i.index=a.index,i.cards=a.cards,i.rules=[function(e){return E(e.started)},function(e){return k(e.players)},function(e){return S(i.player,e.players,e.turn)},function(e){return function(e,n){return{passed:0===Object.keys(e.costs).filter((function(t){return e.costs[t]>n.gems[t]+n.cards.cards.filter((function(e){return e.gem===C[t]})).length})).length,message:"Not enough gems to purchase this card."}}(i.cards[i.index],i.player)}],i}return Object(b.a)(t,[{key:"act",value:function(e){var n=this.cards.splice(this.index,1)[0];G(this.player.gems,e.gems,n.costs),n.reserved&&(n.reserved=!1),this.player.cards.cards.push(n),this.nextTurn(e)}}]),t}(P),N=function(e){Object(h.a)(t,e);var n=Object(m.a)(t);function t(e,a){var i;return Object(p.a)(this,t),(i=n.call(this,e,a)).cards=void 0,i.index=void 0,i.type=r.ReserveCard,i.cards=a.cards,i.index=a.index,i.rules=[function(e){return E(e.started)},function(e){return k(e.players)},function(e){return S(i.player,e.players,e.turn)},function(e){return{passed:i.player.reservedCards.length<3,message:"A maximum of three cards may be reserved."}}],i}return Object(b.a)(t,[{key:"act",value:function(e){var n=this.cards.splice(this.index,1)[0],t=T();t.star=1,G(e.gems,this.player.gems,t),n.reserved=!0,this.player.reservedCards.push(n),this.nextTurn(e)}}]),t}(P),R=t(22);!function(e){e.Ruby="ruby",e.Sapphire="sapphire",e.Onyx="onyx",e.Emerald="emerald",e.Diamond="diamond",e.Star="star"}(C||(C={})),function(e){e[e.I=1]="I",e[e.II=2]="II",e[e.III=3]="III"}(z||(z={}));var T=function(){var e;return e={},Object(g.a)(e,C.Ruby,0),Object(g.a)(e,C.Sapphire,0),Object(g.a)(e,C.Diamond,0),Object(g.a)(e,C.Onyx,0),Object(g.a)(e,C.Emerald,0),Object(g.a)(e,C.Star,0),e},M=function(e){return Object(u.a)(e).reduceRight((function(e,n,t,r){return e.push(r.splice(0|Math.random()*r.length,1)[0]),e}),[])},F=function e(n,t,r,a){Object(p.a)(this,e),this.points=void 0,this.gem=void 0,this.tier=void 0,this.costs=void 0,this.reserved=void 0,this.points=n,this.gem=t,this.tier=r,this.costs=a},U=function(){function e(n,t){Object(p.a)(this,e),this.cards=void 0,this.tier=void 0,n&&(this.tier=n),this.cards=t?M(t):[]}return Object(b.a)(e,[{key:"draw",value:function(e,n){this.cards.splice(0,e).forEach((function(e){return n.cards.push(e)}))}}]),e}(),H=function(){function e(){var n;Object(p.a)(this,e),this.tierICards=void 0,this.tierIICards=void 0,this.tierIIICards=void 0,this.tierIDrawPile=void 0,this.tierIIDrawPile=void 0,this.tierIIIDrawPile=void 0,this.nobles=void 0,this.gems=void 0,this.players=void 0,this.started=void 0,this.turn=void 0,this.background=void 0;var t=O.map((function(e){var n;return new F(e.points||0,e.gem,e.tier,(n={},Object(g.a)(n,C.Ruby,e.ruby||0),Object(g.a)(n,C.Sapphire,e.sapphire||0),Object(g.a)(n,C.Diamond,e.diamond||0),Object(g.a)(n,C.Onyx,e.onyx||0),Object(g.a)(n,C.Emerald,e.emerald||0),Object(g.a)(n,C.Star,0),n))})),r=M(v.map((function(e){var n;return{points:e.points,costs:(n={},Object(g.a)(n,C.Ruby,e.ruby||0),Object(g.a)(n,C.Sapphire,e.sapphire||0),Object(g.a)(n,C.Diamond,e.diamond||0),Object(g.a)(n,C.Onyx,e.onyx||0),Object(g.a)(n,C.Emerald,e.emerald||0),n)}})));this.players=[],this.nobles=r.splice(0,3),this.tierICards=new U(z.I,[]),this.tierIICards=new U(z.II,[]),this.tierIIICards=new U(z.III,[]),this.tierIDrawPile=new U(z.I,t.filter((function(e){return e.tier===z.I}))),this.tierIIDrawPile=new U(z.II,t.filter((function(e){return e.tier===z.II}))),this.tierIIIDrawPile=new U(z.III,t.filter((function(e){return e.tier===z.III}))),this.drawVisibleCards(),this.turn=1,this.started=!1,this.gems=(n={},Object(g.a)(n,C.Ruby,7),Object(g.a)(n,C.Sapphire,7),Object(g.a)(n,C.Diamond,7),Object(g.a)(n,C.Onyx,7),Object(g.a)(n,C.Emerald,7),Object(g.a)(n,C.Star,5),n)}return Object(b.a)(e,[{key:"drawVisibleCards",value:function(){this.tierIDrawPile.draw(4-this.tierICards.cards.length,this.tierICards),this.tierIIDrawPile.draw(4-this.tierIICards.cards.length,this.tierIICards),this.tierIIIDrawPile.draw(4-this.tierIIICards.cards.length,this.tierIIICards)}}]),e}(),_=["Helgi","Finnbogi","Abu","Jean","Samo","Giovanni","Lu\xeds","Jeanne","Gregorio","Domini","Andres","Guglielmo","Hugo","Muhammad","Eldad","Wulfstan","Joseph","Aldo","Alessio","Cosimo","Fabritio","Francesca","Galileo","Isabetta","Lavinia","Madalena","Minerva","Nencia","Vinci"];var J=function e(n){Object(p.a)(this,e),this.id=void 0,this.name=void 0,this.gems=void 0,this.cards=void 0,this.reservedCards=void 0,this.nobles=void 0,this.connected=void 0,this.connectionId=void 0,this.computer=void 0,this.id=n,this.name=n,this.gems=T(),this.cards=new U,this.reservedCards=[],this.nobles=[],this.connected=!1,this.connectionId="",this.computer=!1},Y=function(){function e(){Object(p.a)(this,e),this.gameState=void 0,this.onStateUpdateCallback=void 0,this.onActionCallback=void 0,this.gameState=new H,this.onStateUpdateCallback=null,this.onActionCallback=null}return Object(b.a)(e,[{key:"serialize",value:function(){return Object(R.a)(this.gameState)}},{key:"updateGameState",value:function(e){this.gameState=e,this.onStateUpdateCallback&&this.onStateUpdateCallback(e)}},{key:"getPlayer",value:function(e){return this.gameState.players.filter((function(n){return n.id===e}))[0]}},{key:"onStateUpdate",value:function(e){this.onStateUpdateCallback=e}},{key:"onAction",value:function(e){this.onActionCallback=e}},{key:"cleanup",value:function(){this.onStateUpdateCallback=null,this.onActionCallback=null}},{key:"sendAction",value:function(e,n,t){var r=P.create(e,n,t);return this.onActionCallback&&this.onActionCallback(r),this.receiveAction(r),r}},{key:"receiveAction",value:function(e){e.checkRules(this.gameState)?e.act(this.gameState):e.failedRules.map((function(e){return alert(e.message)})),this.onStateUpdateCallback&&this.onStateUpdateCallback(this.gameState)}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}},{key:"unserialize",value:function(e){return Object(R.b)(H,e)}},{key:"reset",value:function(){return e.instance=void 0,this.getInstance()}}]),e}();Y.instance=void 0;var W,Q,V,X,K,q,Z,$,ee,ne,te,re,ae,ie,le,oe=t(0),se=d.a.div(W||(W=Object(c.a)(["\n  width: 100%;\n  background: #999;\n  text-align: center;\n  height: 100%;\n"]))),ce=d.a.div.attrs((function(e){return{imageSrc:e.imageSrc,bgColor:e.bgColor||"#555555"}}))(Q||(Q=Object(c.a)(["\n  background-image: url(",");\n  background-color: ",";\n  background-size: contain;\n  background-position: center center;\n  background-repeat: no-repeat;\n  height: 100%;\n"])),(function(e){return e.imageSrc}),(function(e){return e.bgColor})),de=d.a.h1(V||(V=Object(c.a)(["\n  font-size: 70px;\n  color: #FFDC73;\n  -webkit-text-stroke: 1px #BF9B30;\n  margin: 0;\n  padding: 20px 0 50px 0;\n"]))),ue=d.a.h2(X||(X=Object(c.a)(["\n  font-size: 36px;\n  color: #FFDC73;\n  -webkit-text-stroke: 0.5px #BF9B30;\n  text-shadow: 1px 1px 1px #000;\n  margin: 0;\n  text-align: center;\n"]))),pe=function(){return Object(oe.jsx)(ue,{children:"Schmeckles"})},be=d.a.button(K||(K=Object(c.a)(["\n  border-radius: 0;\n  font-size: 28px;\n  padding: 10px;\n  background: #91a4e6;\n  border: 2px solid #3451b3;\n  width: 400px;\n"]))),he=d.a.div(q||(q=Object(c.a)(["\n  display: flex;\n  margin: 20px auto;\n  width: 400px;\n"]))),me=d.a.input(Z||(Z=Object(c.a)(["\n  font-size: 28px;\n  padding: 10px;\n  border: 2px solid #ccc;\n  text-align: center;\n  text-transform: uppercase;\n  width: 150px;\n"]))),ye=d.a.button($||($=Object(c.a)(["\n  border-radius: 0;\n  font-size: 28px;\n  padding: 10px;\n  border: 2px solid #2f8a33;\n  background: #5ee465;\n  margin-left: 20px;\n  width: 230px;\n"])));function xe(e){return"".concat("","/splash/").concat(e).concat(Math.floor(8*Math.random())+1,".jpg")}!function(e){e.Menu="menu",e.Board="board"}(le||(le={}));var fe=function(e){Object(h.a)(t,e);var n=Object(m.a)(t);function t(e){var r;return Object(p.a)(this,t),(r=n.call(this,e)).state=void 0,r.state={background:{src:e.src||"",color:""}},r}return Object(b.a)(t,[{key:"componentDidMount",value:function(){this.loadBackground()}},{key:"loadBackground",value:function(){var e=Object(f.a)(x.a.mark((function e(){var n,t,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props.src||xe(this.props.type),t=new j.a,e.next=4,t.getColorAsync(n);case 4:r=e.sent,this.setState({background:{src:n,color:r.hex}});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(oe.jsx)(ce,{imageSrc:this.props.src||this.state.background.src,bgColor:this.state.background.color,children:this.props.children})}}]),t}(i.a.Component),je=d.a.a(ee||(ee=Object(c.a)(["\n  color: #00d9ff;\n  text-decoration: underline;\n  cursor: pointer;\n"]))),ge=d.a.p(ne||(ne=Object(c.a)(["\n  color: #fff;\n  font-size: 24px;\n  text-shadow: 1px 1px 1px #000;\n  font-weight: bold;\n  user-select: none;\n"]))),Oe=d.a.a(te||(te=Object(c.a)(["\n  border-bottom: 1px dashed #fff;\n  cursor: pointer;\n"]))),ve=d.a.input(re||(re=Object(c.a)(["\n  padding: 2px;\n  font-size: 20px;\n  text-align: center;\n  margin-left: 10px;\n  width: 140px;\n"]))),we=d.a.div(ae||(ae=Object(c.a)(["\n  font-size: 20px;\n  color: #fff;\n  display: inline-block;\n  padding: 8px;\n  border-radius: 8px;\n  background: rgba(255, 0, 0, 0.5);\n"]))),ke=d.a.div(ie||(ie=Object(c.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: space-around;\n  height: 100%;\n"]))),Ie=_[Math.floor(Math.random()*_.length)];function Ee(e){var n=Object(a.useState)(!1),t=Object(s.a)(n,2),r=t[0],i=t[1],l=Object(a.useState)(Ie),o=Object(s.a)(l,2),c=o[0],d=o[1],u=Object(a.useState)(""),p=Object(s.a)(u,2),b=p[0],h=p[1];return Object(a.useEffect)((function(){if(window.location.pathname.length>1){var e=window.location.pathname.replace("/","");4===e.length&&h(e)}}),[]),Object(oe.jsx)(se,{children:Object(oe.jsx)(fe,{type:le.Menu,children:Object(oe.jsxs)(ke,{children:[Object(oe.jsx)("div",{children:Object(oe.jsx)(de,{children:"Schmeckles"})}),Object(oe.jsxs)("div",{children:[e.errorMessage?Object(oe.jsx)(we,{children:e.errorMessage}):null,Object(oe.jsxs)(ge,{children:["Welcome,",r?Object(oe.jsx)(ve,{type:"text",placeholder:c,autoFocus:!0,onChange:function(e){return d(e.target.value)},onKeyPress:function(e){13===e.which&&i(!1)}}):Object(oe.jsxs)(oe.Fragment,{children:["\xa0",Object(oe.jsx)(Oe,{onClick:function(){return i(!0)},children:c}),"! \xa0",Object(oe.jsx)(je,{onClick:function(){return i(!0)},children:"Change Name"})]})]}),Object(oe.jsx)(be,{onClick:function(){return e.hostLobby(c)},children:"Host a game"}),Object(oe.jsxs)(he,{children:[Object(oe.jsx)(me,{type:"text",placeholder:"Code",value:b,onChange:function(e){return h(e.target.value)}}),Object(oe.jsx)(ye,{disabled:4!==b.length,onClick:function(){return e.joinLobby(b,c)},children:"Join Game"})]})]})]})})})}var Se,Ce,ze=t(33),Pe=t.n(ze);!function(e){e.DISBANDED="DISBANDED",e.DISCONNECTED="DISCONNECTED",e.LOBBY_PLAYERS="LOBBY_PLAYERS",e.ACTION="ACTION",e.GAMESTATE="GAMESTATE"}(Se||(Se={})),function(e){e.DISCONNECTING="DISCONNECTING",e.ACTION="ACTION"}(Ce||(Ce={}));var Ge=function(){function e(n,t){Object(p.a)(this,e),this.onError=function(e){},this.player=void 0,this.connectionId=void 0,this.peer=void 0,this.debugLevel=void 0,this.player=n,this.debugLevel=3,this.connectionId=this.createConnectionId(),this.peer=new Pe.a(this.fullyQualifiedId(this.connectionId),{debug:this.debugLevel}),this.onError=t,this.peer.on("error",this.onError)}return Object(b.a)(e,[{key:"fullyQualifiedId",value:function(e){return"schmeckles_".concat(e)}}]),e}(),Ae=function(e){Object(h.a)(t,e);var n=Object(m.a)(t);function t(){var e;Object(p.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=n.call.apply(n,[this].concat(a))).clients=[],e.players=[],e}return Object(b.a)(t,[{key:"createConnectionId",value:function(){return Math.random().toString(20).substr(2,4).toUpperCase()}},{key:"host",value:function(e,n,t){var r=this;this.player.connected=!0,this.players=[this.player],this.peer.on("open",(function(a){e(r.connectionId),r.peer.on("connection",(function(e){e.peerConnection.onconnectionstatechange=function(t){"failed"===t.target.connectionState&&(r.players.splice(r.players.findIndex((function(n){return n.id===e.metadata.id}))),r.broadcast({type:Se.LOBBY_PLAYERS,payload:r.players}),n(r.players))};var a=e.metadata;r.players.length<4&&a.name.length>0&&(r.players.push(a),r.clients.push(e),n(r.players),r.broadcast({type:Se.LOBBY_PLAYERS,payload:r.players})),e.on("open",(function(){e.metadata.connected=!0,r.broadcast({type:Se.LOBBY_PLAYERS,payload:r.players}),n(r.players)})),e.on("close",(function(){console.log("closed connection with "+e.metadata.name),r.players.splice(r.players.findIndex((function(n){return n.id===e.peer})),1),r.broadcast({type:Se.LOBBY_PLAYERS,payload:r.players}),n(r.players)})),e.on("data",(function(e){console.log("Received from client: ",e),t(e)}))}))}))}},{key:"broadcast",value:function(e,n){var t=this.clients,r=null===n||void 0===n?void 0:n.map((function(e){return e.id}));n&&r.length>0&&(t=this.clients.filter((function(e){return-1===r.indexOf(e.metadata.id)}))),console.log("Broadcasting to "+t.length+" clients: ",e),t.forEach((function(n){n.send(e)}))}},{key:"disconnect",value:function(){this.broadcast({type:Se.DISBANDED}),this.peer.disconnect()}}]),t}(Ge),Le=function(e){Object(h.a)(t,e);var n=Object(m.a)(t);function t(){var e;Object(p.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=n.call.apply(n,[this].concat(a))).code="",e.host=null,e}return Object(b.a)(t,[{key:"createConnectionId",value:function(){return Math.random().toString(20).substr(2,10)}},{key:"send",value:function(e){var n;console.log("Sending to host: ",e),null===(n=this.host)||void 0===n||n.send(e)}},{key:"join",value:function(e,n){var t=this;this.peer.on("open",(function(r){t.player.id=t.fullyQualifiedId(t.connectionId),t.host=t.peer.connect(t.fullyQualifiedId(e),{metadata:t.player}),t.code=e,t.host.peerConnection.onconnectionstatechange=function(e){"failed"===e.target.connectionState&&t.onError(e.target)},t.host.on("open",(function(){})),t.host.on("data",(function(e){console.log("Received broadcast: ",e),n(e)})),t.host.on("close",(function(){console.log("closed"),n({type:Se.DISCONNECTED})})),t.host.on("error",(function(e){console.log(e)}))})),this.peer.on("disconnected",(function(){console.log("disconnected")}))}},{key:"disconnect",value:function(){this.host&&this.host.close()}}]),t}(Ge);function De(){return(De=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function Be(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var Ne=a.createElement("g",null,a.createElement("path",{d:"m140.566 180.519 39.953-39.953-74.638-34.685z"}),a.createElement("path",{d:"m121 284.25v-56.5l-77.3 28.25z"}),a.createElement("path",{d:"m180.519 371.434-39.953-39.953-34.685 74.638z"}),a.createElement("path",{d:"m284.25 391h-56.5l28.25 77.3z"}),a.createElement("path",{d:"m396.479 197.812 115.521 42.218v-83.44c0-3.978-1.581-7.793-4.394-10.606l-59.426-59.426z"}),a.createElement("path",{d:"m227.75 121h56.5l-28.25-77.3z"}),a.createElement("path",{d:"m331.482 140.566 39.952 39.953 34.685-74.638z"}),a.createElement("path",{d:"m361 212.511-61.511-61.511h-86.978l-61.511 61.511v86.978l61.511 61.511h86.978l61.511-61.511z"}),a.createElement("path",{d:"m391 227.75v56.5l77.3-28.25z"}),a.createElement("path",{d:"m197.812 396.479-111.255 51.702 59.426 59.426c2.813 2.813 6.628 4.394 10.606 4.394h83.44z"}),a.createElement("path",{d:"m314.189 396.479-42.219 115.521h83.441c3.978 0 7.793-1.581 10.606-4.394l59.426-59.426z"}),a.createElement("path",{d:"m115.521 314.189-115.521-42.218v83.44c0 3.978 1.581 7.793 4.394 10.606l59.426 59.426z"}),a.createElement("path",{d:"m396.479 314.188 51.702 111.255 59.426-59.426c2.813-2.813 4.394-6.628 4.394-10.606v-83.441z"}),a.createElement("path",{d:"m197.811 115.521 42.218-115.521h-83.44c-3.978 0-7.793 1.581-10.606 4.394l-59.426 59.426z"}),a.createElement("path",{d:"m314.189 115.521 111.255-51.701-59.426-59.426c-2.813-2.813-6.629-4.394-10.607-4.394h-83.441z"}),a.createElement("path",{d:"m115.521 197.812-51.701-111.255-59.426 59.426c-2.813 2.813-4.394 6.628-4.394 10.606v83.44z"}),a.createElement("path",{d:"m371.434 331.481-39.953 39.953 74.638 34.685z"}));function Re(e,n){var t=e.title,r=e.titleId,i=Be(e,["title","titleId"]);return a.createElement("svg",De({id:"Capa_1",enableBackground:"new 0 0 512 512",height:512,viewBox:"0 0 512 512",width:512,xmlns:"http://www.w3.org/2000/svg",ref:n,"aria-labelledby":r},i),t?a.createElement("title",{id:r},t):null,Ne)}var Te=a.forwardRef(Re);t.p;function Me(){return(Me=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function Fe(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var Ue=a.createElement("g",null,a.createElement("path",{d:"m120 120h272v272h-272z"}),a.createElement("path",{d:"m21.211 0 90 90h289.578l90-90z"}),a.createElement("path",{d:"m90 111.211-90-90v469.578l90-90z"}),a.createElement("path",{d:"m422 111.211v289.578l90 90v-469.578z"}),a.createElement("path",{d:"m400.789 422h-289.578l-90 90h469.578z"}));function He(e,n){var t=e.title,r=e.titleId,i=Fe(e,["title","titleId"]);return a.createElement("svg",Me({id:"Capa_1",enableBackground:"new 0 0 512 512",height:512,viewBox:"0 0 512 512",width:512,xmlns:"http://www.w3.org/2000/svg",ref:n,"aria-labelledby":r},i),t?a.createElement("title",{id:r},t):null,Ue)}var _e=a.forwardRef(He);t.p;function Je(){return(Je=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function Ye(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var We=a.createElement("g",null,a.createElement("path",{d:"m194.028 159.123h123.944l-61.972-92.958z"}),a.createElement("path",{d:"m274.028 39.123 70.115 105.174 52.587-105.174z"}),a.createElement("path",{d:"m326.114 189.123h-140.228l70.114 245.4z"}),a.createElement("path",{d:"m141.729 159.123-53.316-106.633-88.413 106.633z"}),a.createElement("path",{d:"m357.314 189.123-81.072 283.754 235.498-283.754z"}),a.createElement("path",{d:"m167.857 144.296 70.115-105.173h-122.701z"}),a.createElement("path",{d:"m370.27 159.123h141.73l-88.413-106.633z"}),a.createElement("path",{d:"m154.686 189.123h-154.426l235.498 283.754z"}));function Qe(e,n){var t=e.title,r=e.titleId,i=Ye(e,["title","titleId"]);return a.createElement("svg",Je({id:"Capa_1",enableBackground:"new 0 0 512 512",height:512,viewBox:"0 0 512 512",width:512,xmlns:"http://www.w3.org/2000/svg",ref:n,"aria-labelledby":r},i),t?a.createElement("title",{id:r},t):null,We)}var Ve=a.forwardRef(Qe);t.p;function Xe(){return(Xe=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function Ke(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var qe=a.createElement("g",null,a.createElement("path",{d:"m186.611 280.288-94.384 62.922 143.469 168.79 4.843-15.999z"}),a.createElement("path",{d:"m78 195.362v121.278l90.959-60.64z"}),a.createElement("path",{d:"m325.39 280.288-53.928 215.713 4.843 16 143.469-168.791z"}),a.createElement("path",{d:"m186.611 231.713 53.928-215.713-4.843-16-143.469 168.791z"}),a.createElement("path",{d:"m215.212 241h81.576l-40.787-163.153z"}),a.createElement("path",{d:"m343.042 256 90.958 60.639v-121.277z"}),a.createElement("path",{d:"m325.39 231.713 94.384-62.922-143.469-168.791-4.843 16.001z"}),a.createElement("path",{d:"m296.788 271h-81.576l40.788 163.155z"}));function Ze(e,n){var t=e.title,r=e.titleId,i=Ke(e,["title","titleId"]);return a.createElement("svg",Xe({id:"Capa_1",enableBackground:"new 0 0 512.001 512.001",height:512,viewBox:"0 0 512.001 512.001",width:512,xmlns:"http://www.w3.org/2000/svg",ref:n,"aria-labelledby":r},i),t?a.createElement("title",{id:r},t):null,qe)}var $e=a.forwardRef(Ze);t.p;function en(){return(en=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function nn(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var tn=a.createElement("g",null,a.createElement("path",{d:"m241 390.692c-38.763-1.159-65.283-6.786-83.243-15.238l-87.513 87.513c40.348 29.433 97.84 47.061 170.756 49.033z"}),a.createElement("path",{d:"m121 316c0-14.258 3.444-29.526 9.148-45h-124.019c-3.1 15.154-6.129 30.244-6.129 45 0 52.657 17.086 95.257 47.624 127.165l85.849-85.849c-9.948-12.389-12.473-26.9-12.473-41.316z"}),a.createElement("path",{d:"m143.859 241c8.589-15.899 18.964-31.419 30.106-45.824l-85.864-85.864c-32.246 39.121-59.119 85.077-74.126 131.688z"}),a.createElement("path",{d:"m354.243 375.454c-17.961 8.452-44.48 14.079-83.243 15.238v121.308c72.916-1.972 130.408-19.6 170.757-49.032z"}),a.createElement("path",{d:"m151 316c0 15.732 0 45 105 45s105-29.268 105-45c0-53.73-67.222-135.967-105-160.415-37.778 24.448-105 106.685-105 160.415z"}),a.createElement("path",{d:"m381.852 271c5.704 15.474 9.148 30.742 9.148 45 0 14.416-2.525 28.927-12.473 41.316l85.849 85.849c30.538-31.908 47.624-74.508 47.624-127.165 0-14.756-3.029-29.846-6.129-45z"}),a.createElement("path",{d:"m193.292 172.081c16.75-18.45 33.734-33.514 47.708-42.442v-129.639c-41.356 6.555-90.145 41.311-133.028 86.761z"}),a.createElement("path",{d:"m271 129.639c13.975 8.928 30.958 23.992 47.708 42.442l85.32-85.32c-42.883-45.45-91.672-80.206-133.028-86.761z"}),a.createElement("path",{d:"m423.899 109.312-85.864 85.864c11.142 14.405 21.517 29.925 30.106 45.824h129.884c-15.007-46.611-41.88-92.567-74.126-131.688z"}));function rn(e,n){var t=e.title,r=e.titleId,i=nn(e,["title","titleId"]);return a.createElement("svg",en({id:"Capa_1",enableBackground:"new 0 0 512 512",height:512,viewBox:"0 0 512 512",width:512,xmlns:"http://www.w3.org/2000/svg",ref:n,"aria-labelledby":r},i),t?a.createElement("title",{id:r},t):null,tn)}var an=a.forwardRef(rn);t.p;function ln(){return(ln=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function on(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var sn=a.createElement("g",null,a.createElement("path",{d:"m10.201,.758l2.478,5.865 6.344,.545c0.44,0.038 0.619,0.587 0.285,0.876l-4.812,4.169 1.442,6.202c0.1,0.431-0.367,0.77-0.745,0.541l-5.452-3.288-5.452,3.288c-0.379,0.228-0.845-0.111-0.745-0.541l1.442-6.202-4.813-4.17c-0.334-0.289-0.156-0.838 0.285-0.876l6.344-.545 2.478-5.864c0.172-0.408 0.749-0.408 0.921,0z"}));function cn(e,n){var t=e.title,r=e.titleId,i=on(e,["title","titleId"]);return a.createElement("svg",ln({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 19.481 19.481",xmlnsXlink:"http://www.w3.org/1999/xlink",enableBackground:"new 0 0 19.481 19.481",ref:n,"aria-labelledby":r},i),t?a.createElement("title",{id:r},t):null,sn)}var dn,un,pn,bn,hn,mn,yn,xn,fn,jn,gn,On,vn,wn,kn,In,En,Sn,Cn,zn=a.forwardRef(cn);t.p;!function(e){e.xs="12px",e.sm="24px",e.md="32px",e.lg="48px",e.xl="64px"}(Cn||(Cn={}));var Pn,Gn=d.a.div.attrs((function(e){return{size:e.size||Cn.md}}))(dn||(dn=Object(c.a)(["\n  svg {\n    width: ",";\n    height: ",";\n  }\n"])),(function(e){return e.size}),(function(e){return e.size})),An=Object(d.a)(Te)(un||(un=Object(c.a)(["\n  fill: var(--ruby);\n"]))),Ln=Object(d.a)(_e)(pn||(pn=Object(c.a)(["\nfill: var(--emerald);\n"]))),Dn=Object(d.a)(Ve)(bn||(bn=Object(c.a)(["\n  fill: var(--diamond);\n  stroke-width: 10;\n  stroke: #666;\n"]))),Bn=Object(d.a)(an)(hn||(hn=Object(c.a)(["\n  fill: var(--sapphire);\n"]))),Nn=Object(d.a)($e)(mn||(mn=Object(c.a)(["\n  fill: var(--onyx);\n"]))),Rn=Object(d.a)(zn)(yn||(yn=Object(c.a)(["\n  fill: var(--star);\n"]))),Tn=function(e){return Object(oe.jsx)(Gn,Object(w.a)(Object(w.a)({},e),{},{children:Object(oe.jsx)(An,{})}))},Mn=function(e){return Object(oe.jsx)(Gn,Object(w.a)(Object(w.a)({},e),{},{children:Object(oe.jsx)(Ln,{})}))},Fn=function(e){return Object(oe.jsx)(Gn,Object(w.a)(Object(w.a)({},e),{},{children:Object(oe.jsx)(Dn,{})}))},Un=function(e){return Object(oe.jsx)(Gn,Object(w.a)(Object(w.a)({},e),{},{children:Object(oe.jsx)(Nn,{})}))},Hn=function(e){return Object(oe.jsx)(Gn,Object(w.a)(Object(w.a)({},e),{},{children:Object(oe.jsx)(Bn,{})}))},_n=function(e){return Object(oe.jsx)(Gn,Object(w.a)(Object(w.a)({},e),{},{children:Object(oe.jsx)(Rn,{})}))},Jn=function(e){var n,t=(n={},Object(g.a)(n,C.Diamond,Fn),Object(g.a)(n,C.Emerald,Mn),Object(g.a)(n,C.Onyx,Un),Object(g.a)(n,C.Ruby,Tn),Object(g.a)(n,C.Sapphire,Hn),Object(g.a)(n,C.Star,_n),n)[e.gem];return Object(oe.jsx)(t,Object(w.a)({},e))};!function(e){e.xs="11px",e.sm="15px",e.md="18px",e.lg="25px",e.xl="32px"}(Pn||(Pn={}));var Yn,Wn,Qn,Vn,Xn,Kn,qn=d.a.div.attrs((function(e){return{size:e.size||Pn.md}}))(xn||(xn=Object(c.a)(["\n  width: ",";\n  height: ",";\n  border-radius: 100%;\n  text-align: center;\n  font-family: Courgette;\n  position: relative;\n  border: 1px solid #000;\n  margin: 2px;\n"])),(function(e){return e.size}),(function(e){return e.size})),Zn=Object(d.a)(qn)(fn||(fn=Object(c.a)(["\n  background: var(--ruby);\n"]))),$n=Object(d.a)(qn)(jn||(jn=Object(c.a)(["\n  background: var(--emerald);\n"]))),et=Object(d.a)(qn)(gn||(gn=Object(c.a)(["\n  background: var(--diamond);\n"]))),nt=Object(d.a)(qn)(On||(On=Object(c.a)(["\n  background: var(--sapphire);\n"]))),tt=Object(d.a)(qn)(vn||(vn=Object(c.a)(["\n  background: var(--onyx);\n"]))),rt=d.a.span(wn||(wn=Object(c.a)(["\n  font-size: 22px;\n  font-weight: bold;\n  line-height: 22px;\n  color: #fff;\n  -webkit-text-fill-color: white;\n  -webkit-text-stroke-width: 1px;\n  -webkit-text-stroke-color: #555;\n"]))),at=Object(d.a)(rt)(kn||(kn=Object(c.a)(["\n-webkit-text-stroke-color: #bbb;\n"]))),it=d.a.div(In||(In=Object(c.a)(["\n  position: absolute;\n  left: 20px;\n  top: 2px;\n  svg {\n    width: 16px;\n    height: 16px;\n  }\n"]))),lt=Object(d.a)(it)(En||(En=Object(c.a)(["\n  svg {\n    stroke-width: 5;\n    stroke: #222;\n  }\n"]))),ot=function(e){return Object(oe.jsxs)(Zn,{children:[Object(oe.jsx)(rt,{children:e.cost}),Object(oe.jsx)(it,{children:Object(oe.jsx)(An,{})})]})},st=function(e){return Object(oe.jsxs)($n,{children:[Object(oe.jsx)(rt,{children:e.cost}),Object(oe.jsx)(it,{children:Object(oe.jsx)(Ln,{})})]})},ct=function(e){return Object(oe.jsxs)(nt,{children:[Object(oe.jsx)(rt,{children:e.cost}),Object(oe.jsx)(it,{children:Object(oe.jsx)(Bn,{})})]})},dt=function(e){return Object(oe.jsxs)(tt,{children:[Object(oe.jsx)(at,{children:e.cost}),Object(oe.jsx)(it,{children:Object(oe.jsx)(Nn,{})})]})},ut=function(e){return Object(oe.jsxs)(et,{children:[Object(oe.jsx)(rt,{children:e.cost}),Object(oe.jsx)(lt,{children:Object(oe.jsx)(Dn,{})})]})},pt=d.a.div(Sn||(Sn=Object(c.a)(["\n  display: flex;\n  flex-direction: column;\n  position: absolute;\n  bottom: 0;\n"]))),bt=function(e){return Object(oe.jsxs)(pt,{children:[e.gems.diamond>0?Object(oe.jsx)(ut,{cost:e.gems.diamond}):null,e.gems.ruby>0?Object(oe.jsx)(ot,{cost:e.gems.ruby}):null,e.gems.emerald>0?Object(oe.jsx)(st,{cost:e.gems.emerald}):null,e.gems.onyx>0?Object(oe.jsx)(dt,{cost:e.gems.onyx}):null,e.gems.sapphire>0?Object(oe.jsx)(ct,{cost:e.gems.sapphire}):null]})};!function(e){e.xs="xs",e.sm="sm",e.md="md",e.lg="lg",e.xl="xl"}(Kn||(Kn={}));var ht,mt,yt={xs:["50px","72x"],sm:["68px","97px"],md:["90px","129px"],lg:["120px","172px"],xl:["160px","230px"]},xt=d.a.div.attrs((function(e){return{size:e.size||Kn.md}}))(Yn||(Yn=Object(c.a)(["\n  width: ",";\n  height ",";\n  border: 1px solid #000;\n  border-radius: 5px;\n  background: #fff;\n  margin: 5px;\n  position: relative;\n  user-select: none;\n"])),(function(e){return yt[e.size][0]}),(function(e){return yt[e.size][1]})),ft=d.a.div(Wn||(Wn=Object(c.a)(["\n  font-size: 30px;\n  font-weight: bold;\n  color: #000;\n  margin-left: 3px;\n"]))),jt=d.a.div(Qn||(Qn=Object(c.a)(["\n  position: absolute;\n  right: 2px;\n  top: 2px;\n  svg {\n    width: 25px;\n    height: 25px;\n  }\n"]))),gt=function(e){return e.flipped?Object(oe.jsx)(wt,Object(w.a)({},e)):Object(oe.jsxs)(xt,{size:e.size?e.size:Kn.md,children:[e.card.points?Object(oe.jsx)(ft,{children:e.card.points}):null,e.card.costs?Object(oe.jsx)(bt,{gems:e.card.costs}):null,e.card.gem?Object(oe.jsx)(jt,{children:Object(oe.jsx)(Jn,{gem:e.card.gem})}):null]})},Ot=d.a.div(Vn||(Vn=Object(c.a)(["\n  display: flex;\n  height: 100%;\n  width: 100%;\n  align-items: stretch;\n"]))),vt=d.a.div(Xn||(Xn=Object(c.a)(["\n  font-size: 36px;\n  background: #715027;\n  margin: 10px;\n  width: 100%;\n  border-radius: 2px;\n  justify-content: center;\n  align-items: center;\n  color: #fff;\n  display: flex;\n"]))),wt=function(e){return Object(oe.jsx)(xt,{size:e.size,children:Object(oe.jsx)(Ot,{children:Object(oe.jsx)(vt,{children:e.children})})})},kt=function(e){return Object(oe.jsx)(wt,{children:e.tier?Object(oe.jsx)(oe.Fragment,{children:e.tier===z.I?Object(oe.jsx)(oe.Fragment,{children:"\u2022"}):e.tier===z.II?Object(oe.jsx)(oe.Fragment,{children:"\u2022\u2022"}):e.tier===z.III?Object(oe.jsx)(oe.Fragment,{children:"\u2022\u2022\u2022"}):null}):null})};!function(e){e.xs="50px",e.sm="68px",e.md="90px",e.lg="120px",e.xl="160px"}(mt||(mt={}));var It=d.a.div.attrs((function(e){return{size:e.size||mt.md}}))(ht||(ht=Object(c.a)(["\n  width: ",";\n  height: ","};\n  border: 1px solid #000;\n  border-radius: 4px;\n  margin: 5px;\n  background: #fff;\n  position: relative;\n"])),(function(e){return e.size}),(function(e){return e.size})),Et=function(e){return Object(oe.jsxs)(It,{children:[Object(oe.jsx)(ft,{children:e.noble.points}),e.noble.costs?Object(oe.jsx)(bt,{gems:e.noble.costs}):null]})};function St(){return(St=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function Ct(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var zt=a.createElement("g",null,a.createElement("path",{d:"m512.001 84.853-84.853-84.853-171.147 171.147-171.148-171.147-84.853 84.853 171.148 171.147-171.148 171.148 84.853 84.853 171.148-171.147 171.147 171.147 84.853-84.853-171.148-171.148z"}));function Pt(e,n){var t=e.title,r=e.titleId,i=Ct(e,["title","titleId"]);return a.createElement("svg",St({id:"Capa_1",enableBackground:"new 0 0 512.001 512.001",height:512,viewBox:"0 0 512.001 512.001",width:512,xmlns:"http://www.w3.org/2000/svg",ref:n,"aria-labelledby":r},i),t?a.createElement("title",{id:r},t):null,zt)}var Gt=a.forwardRef(Pt);t.p;function At(){return(At=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function Lt(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var Dt=a.createElement("path",{d:"M208.789,29.972l31.819,31.82L91.763,210.637L0,118.876l31.819-31.82l59.944,59.942L208.789,29.972z"}),Bt=a.createElement("g",null),Nt=a.createElement("g",null),Rt=a.createElement("g",null),Tt=a.createElement("g",null),Mt=a.createElement("g",null),Ft=a.createElement("g",null),Ut=a.createElement("g",null),Ht=a.createElement("g",null),_t=a.createElement("g",null),Jt=a.createElement("g",null),Yt=a.createElement("g",null),Wt=a.createElement("g",null),Qt=a.createElement("g",null),Vt=a.createElement("g",null),Xt=a.createElement("g",null);function Kt(e,n){var t=e.title,r=e.titleId,i=Lt(e,["title","titleId"]);return a.createElement("svg",At({id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 240.608 240.608",style:{enableBackground:"new 0 0 240.608 240.608"},xmlSpace:"preserve",ref:n,"aria-labelledby":r},i),t?a.createElement("title",{id:r},t):null,Dt,Bt,Nt,Rt,Tt,Mt,Ft,Ut,Ht,_t,Jt,Yt,Wt,Qt,Vt,Xt)}var qt,Zt,$t,er,nr,tr,rr,ar,ir,lr,or,sr,cr,dr,ur,pr,br,hr,mr,yr,xr,fr,jr,gr,Or,vr,wr,kr,Ir,Er,Sr,Cr,zr,Pr,Gr,Ar,Lr,Dr,Br,Nr,Rr,Tr,Mr,Fr,Ur,Hr,_r=a.forwardRef(Kt),Jr=(t.p,Y.getInstance()),Yr=d.a.div(qt||(qt=Object(c.a)(["\n  display: flex;\n  flex-direction: row;\n"]))),Wr=d.a.div(Zt||(Zt=Object(c.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n"]))),Qr=d.a.div($t||($t=Object(c.a)(["\n  position: relative;\n  cursor: pointer;\n  border-radius: 4px;\n  border: 1px solid transparent;\n\n  &:hover {\n    border-color: #999;\n    background: #999;\n\n    & > div {\n      display: block;\n    }\n  }\n"]))),Vr=d.a.div(er||(er=Object(c.a)(["\n  position: absolute;\n  display: none;\n  background: #999;\n  z-index: 101;\n  border-radius: 4px;\n  border: 1px solid #999;\n  margin-top: -4px;\n  padding: 4px;\n  margin-left: -1px;\n  margin-right: -1px;\n\n  & button {\n    width: 100%;\n    padding: 5px;\n\n    &:first-child {\n      margin-bottom: 4px;\n    }\n  }\n"]))),Xr=function(e){return Object(oe.jsxs)(Qr,{children:[Object(oe.jsx)(gt,Object(w.a)({},e)),Object(oe.jsxs)(Vr,{children:[Object(oe.jsx)("button",{onClick:function(){return n=e.player,t=e.cards,a=e.index,void Jr.sendAction(n,r.PurchaseCard,{cards:t,index:a});var n,t,a},children:"Buy"}),e.card.reserved?null:Object(oe.jsx)("button",{onClick:function(){return n=e.player,t=e.cards,a=e.index,void Jr.sendAction(n,r.ReserveCard,{cards:t,index:a});var n,t,a},children:"Reserve"})]})]})},Kr=function(e){return Object(oe.jsxs)(Yr,{children:[Object(oe.jsx)(kt,{tier:e.drawPile.tier,numberOfCards:e.drawPile.cards.length}),e.visibleCards.map((function(n,t){return Object(oe.jsx)(Xr,{card:n,index:t,player:e.player,cards:e.visibleCards},t)}))]})},qr=d.a.div(nr||(nr=Object(c.a)(["\n  display: flex;\n  flex-direction: row;\n  align-self: center;\n"]))),Zr=d.a.div(tr||(tr=Object(c.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-end;\n"]))),$r=d.a.div(rr||(rr=Object(c.a)(["\n  background: #708090;\n  border-radius: 5px;\n  border-bottom: 6px solid #434d57;\n  padding: 6px;\n"]))),ea=d.a.div(ar||(ar=Object(c.a)(["\n  display: flex;\n  flex-direction: column;\n  background: rgba(55,55,55,0.5);\n  border-radius: 4px;\n"]))),na=d.a.div(ir||(ir=Object(c.a)(["\n  width: 46px;\n  height: 46px;\n  margin: 2px 0;\n  position: relative;\n\n  svg {\n    background: #fff;\n    position: absolute;\n    z-index: 100;\n    border: 2px solid #666;\n    border-radius: 100%;\n    padding: 5px;\n  }\n"]))),ta=Object(d.a)(na)(lr||(lr=Object(c.a)(["\n  svg {\n    border-color: var(--ruby);\n  }\n"]))),ra=Object(d.a)(na)(or||(or=Object(c.a)(["\n  svg {\n    border-color: var(--emerald);\n  }\n"]))),aa=Object(d.a)(na)(sr||(sr=Object(c.a)(["\n  svg {\n    border-color: #999;\n    background: #fff;\n    stroke-width: 10;\n    stroke: #666;\n  }\n"]))),ia=Object(d.a)(na)(cr||(cr=Object(c.a)(["\n  svg { border-color: var(--onyx); }\n"]))),la=Object(d.a)(na)(dr||(dr=Object(c.a)(["\n  svg { border-color: var(--sapphire); }\n"]))),oa=Object(d.a)(na)(ur||(ur=Object(c.a)(["\n  svg { border-color: var(--star); }\n  cursor: default;\n\n  &:hover {\n    border: 0;\n    svg {\n      stroke-width: 0;\n      stroke: #000;\n    }\n  }\n"]))),sa=d.a.div(pr||(pr=Object(c.a)(["\n  display: flex;\n  flex-direction: row;\n  max-width: 80px;\n  background: #666;\n  border-radius: 46px;\n  padding-left: 2px;\n  box-shadow: -1px -1px 1px #4d4d4d;\n\n  &:not(:last-child) {\n    margin-bottom: 6px;\n  }\n  padding-right: 36px;\n\n  &:hover {\n    cursor: pointer;\n    svg {\n      border-color: #ffd900;\n      fill: #ffd900;\n      stroke: #ffd900;\n    }\n  }\n"]))),ca=function(e){var n,t=(n={},Object(g.a)(n,C.Diamond,aa),Object(g.a)(n,C.Emerald,ra),Object(g.a)(n,C.Onyx,ia),Object(g.a)(n,C.Sapphire,la),Object(g.a)(n,C.Ruby,ta),Object(g.a)(n,C.Star,oa),n)[e.gem];return Object(oe.jsx)(t,{children:Object(oe.jsx)(Jn,{gem:e.gem,size:e.size?e.size:Cn.md})})},da=function(e){return Object(oe.jsx)(sa,{onClick:function(){return e.holdGem(e.gem)},children:Object(u.a)(Array(e.amount)).map((function(n,t){return Object(oe.jsx)(ca,{gem:e.gem},t)}))})},ua=function(e){var n=e.heldGems.filter((function(e){return e===C.Diamond})).length,t=e.heldGems.filter((function(e){return e===C.Ruby})).length,r=e.heldGems.filter((function(e){return e===C.Emerald})).length,a=e.heldGems.filter((function(e){return e===C.Onyx})).length,i=e.heldGems.filter((function(e){return e===C.Sapphire})).length,l=e.heldGems.filter((function(e){return e===C.Star})).length,o=function(n){if(e.heldGems.length<3){var t=e.heldGems;t.push(n),e.setHeldGems(t)}};return Object(oe.jsx)(Zr,{children:Object(oe.jsxs)($r,{children:[e.gems.diamond>0?Object(oe.jsx)(da,{gem:C.Diamond,amount:e.gems.diamond-n,holdGem:o}):null,e.gems.ruby>0?Object(oe.jsx)(da,{gem:C.Ruby,amount:e.gems.ruby-t,holdGem:o}):null,e.gems.emerald>0?Object(oe.jsx)(da,{gem:C.Emerald,amount:e.gems.emerald-r,holdGem:o}):null,e.gems.onyx>0?Object(oe.jsx)(da,{gem:C.Onyx,amount:e.gems.onyx-a,holdGem:o}):null,e.gems.sapphire>0?Object(oe.jsx)(da,{gem:C.Sapphire,amount:e.gems.sapphire-i,holdGem:o}):null,e.gems.star>0?Object(oe.jsx)(da,{gem:C.Star,amount:e.gems.star-l,holdGem:o}):null]})})},pa=d.a.div(br||(br=Object(c.a)(["\n  display: flex;\n  justify-content: center;\n  height: 130px;\n"]))),ba=d.a.div(hr||(hr=Object(c.a)(["\n  align-self: center;\n"]))),ha=d.a.div(mr||(mr=Object(c.a)(["\n  display: flex;\n  border-radius: 40px;\n  background: #708090;\n  border-bottom: 6px solid #434d57;\n  padding: 5px;\n"]))),ma=d.a.div(yr||(yr=Object(c.a)(["\n  border-radius: 100%;\n  background: #666;\n  box-shadow: -1px -1px 1px #4d4d4d;\n  width: 41px;\n  height: 41px;\n  padding: 5px;\n  margin-right: 5px;\n\n  svg {\n    top: -5px;\n    left: -3px;\n    cursor: pointer;\n  }\n"]))),ya=d.a.div(xr||(xr=Object(c.a)(["\n  width: 40px;\n  height: 40px;\n  padding: 5px;\n  cursor: pointer;\n\n  svg {\n    width: 40px;\n    height: 40px;\n    fill: var(--confirm);\n  }\n\n  &:hover {\n    svg { fill: var(--confirm-hover) }\n  }\n  "]))),xa=d.a.div(fr||(fr=Object(c.a)(["\n  width: 40px;\n  height: 40px;\n  padding: 5px;\n  cursor: pointer;\n\n  svg {\n    margin-top: 4px;\n    width: 32px;\n    height: 32px;\n    fill: var(--cancel);\n  }\n\n  &:hover {\n    svg { fill: var(--cancel-hover) }\n  }\n"]))),fa=function(e){return Object(oe.jsx)(ba,{children:Object(oe.jsxs)(ha,{children:[e.gems.map((function(n,t){return Object(oe.jsx)(ma,{onClick:function(){return function(n){var t=e.gems.slice();t.splice(n,1),e.setHeldGems(t)}(t)},children:Object(oe.jsx)(ca,{gem:n})},t)})),Object(u.a)(Array(3-e.gems.length)).map((function(e,n){return Object(oe.jsx)(ma,{},n)})),Object(oe.jsx)(ya,{children:Object(oe.jsx)(_r,{onClick:function(){return function(){var n=T();e.gems.forEach((function(e){n[e]++})),Jr.sendAction(e.player,r.TakeGems,{gems:n}),e.setHeldGems([])}()}})}),Object(oe.jsx)(xa,{onClick:function(){return e.setHeldGems([])},children:Object(oe.jsx)(Gt,{})})]})})},ja={heldGems:[]},ga=function(e){Object(h.a)(t,e);var n=Object(m.a)(t);function t(e){var r;return Object(p.a)(this,t),(r=n.call(this,e)).state=ja,r}return Object(b.a)(t,[{key:"setHeldGems",value:function(e){this.setState({heldGems:e})}},{key:"render",value:function(){var e=this;return Object(oe.jsxs)(oe.Fragment,{children:[Object(oe.jsxs)(qr,{children:[Object(oe.jsx)(ua,{gems:this.props.gameState.gems,setHeldGems:function(n){return e.setHeldGems(n)},heldGems:this.state.heldGems}),Object(oe.jsxs)(ea,{children:[Object(oe.jsx)(Wr,{children:this.props.gameState.nobles.map((function(e,n){return Object(oe.jsx)(Et,{noble:e},n)}))}),Object(oe.jsx)(Kr,{player:this.props.contextPlayer,tier:z.III,drawPile:this.props.gameState.tierIIIDrawPile,visibleCards:this.props.gameState.tierIIICards.cards}),Object(oe.jsx)(Kr,{player:this.props.contextPlayer,tier:z.II,drawPile:this.props.gameState.tierIIDrawPile,visibleCards:this.props.gameState.tierIICards.cards}),Object(oe.jsx)(Kr,{player:this.props.contextPlayer,tier:z.I,drawPile:this.props.gameState.tierIDrawPile,visibleCards:this.props.gameState.tierICards.cards})]})]}),Object(oe.jsx)(pa,{children:this.state.heldGems.length>0?Object(oe.jsx)(fa,{player:this.props.contextPlayer,gems:this.state.heldGems,setHeldGems:function(n){return e.setHeldGems(n)}}):null})]})}}]),t}(i.a.Component),Oa=d.a.div(jr||(jr=Object(c.a)(["\n  z-index: 101;\n  display: flex;\n  justify-content: center;\n  min-height: 230px;\n  align-self: center;\n"]))),va=d.a.div(gr||(gr=Object(c.a)(["\n  border-radius: 4px;\n  background: rgb(25,25,25,0.7);\n  border: 4px solid #FFDC73;\n  box-shadow: -1px -1px 1px #BF9B30;\n  display: flex;\n"]))),wa=d.a.div(Or||(Or=Object(c.a)(["\n  width: 110px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]))),ka=d.a.div(vr||(vr=Object(c.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  width: 80px;\n  margin-left: -10px;\n  \n  & > div:nth-child(2n) {\n    margin-top: 8px;\n  }\n"]))),Ia=d.a.div(wr||(wr=Object(c.a)(["\n  position: absolute;\n  margin-left: -80px;\n  margin-top: 45px;\n"]))),Ea=d.a.div(kr||(kr=Object(c.a)(["\n  height: 35px;\n  & > div {\n    position: absolute;\n    z-index: 99;\n\n    &:hover {\n      opacity: 1.0;\n      z-index: 101;\n    }\n  }\n"]))),Sa=d.a.div(Ir||(Ir=Object(c.a)(["\n  position: absolute;\n  margin-top: -34px;\n  display: flex;\n  flex-direction: row;\n  color: #fff;\n  font-size: 28px;\n  -webkit-text-stroke: 1px #000;\n  font-weight: bold;\n\n  svg {\n    margin-right: 10px;\n  }\n"]))),Ca=(d.a.div(Er||(Er=Object(c.a)(["\n  width: 200px;\n"]))),function(e){var n=Object(a.useState)(!1),t=Object(s.a)(n,2),r=t[0],i=t[1];Object.keys(C).filter((function(n){return e.player.gems[C[n]]>0||e.player.cards.cards.filter((function(e){return e.gem===C[n]})).length>0}));return Object(oe.jsx)(Oa,{children:Object(oe.jsx)(va,{children:Object.keys(C).map((function(n,t){return Object(oe.jsxs)(wa,{children:[Object(oe.jsxs)(Sa,{children:[Object(oe.jsx)(Jn,{gem:C[n],size:Cn.sm}),e.player.gems[C[n]]+e.player.cards.cards.filter((function(e){return e.gem===C[n]})).length]}),Object(oe.jsx)(ka,{children:Object(u.a)(Array(e.player.gems[C[n]])).map((function(t,r){return Object(oe.jsx)(ca,{gem:C[n],size:Cn.sm},"".concat(e.player.id,"_").concat(n,"_").concat(r))}))}),Object(oe.jsxs)(Ia,{children:[e.player.cards.cards.sort((function(e,n){return e.points>n.points?-1:1})).filter((function(e){return e.gem===C[n]})).map((function(e){return Object(oe.jsx)(Ea,{children:Object(oe.jsx)(gt,{card:e,size:Kn.sm})})})),C[n]===C.Star?Object(oe.jsx)(oe.Fragment,{children:e.player.reservedCards.map((function(n,t){return Object(oe.jsx)(Ea,{onMouseEnter:function(){return i(!0)},onMouseLeave:function(){return i(!1)},children:Object(oe.jsx)(Xr,{player:e.player,index:t,card:n,size:Kn.sm,flipped:!r,cards:e.player.reservedCards})})}))}):null]})]},t)}))})})}),za={gameState:null},Pa=d.a.ul(Sr||(Sr=Object(c.a)(["\n  list-style-type: none;\n  margin: 0;\n  padding: 0;\n"]))),Ga=d.a.li.attrs((function(e){return{isContextPlayer:e.isContextPlayer||!1}}))(Cr||(Cr=Object(c.a)(["\n  font-size: 20px;\n  font-weight: bold;\n  color: ",";\n"])),(function(e){return e.isContextPlayer?"#fff":"#000"})),Aa=d.a.div(zr||(zr=Object(c.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-around;\n"]))),La=d.a.div(Pr||(Pr=Object(c.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 670px;\n"]))),Da=d.a.div(Gr||(Gr=Object(c.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 200px;\n  align-self: flex-start;\n"]))),Ba=function(e){Object(h.a)(t,e);var n=Object(m.a)(t);function t(e){var r;return Object(p.a)(this,t),(r=n.call(this,e)).state=za,r}return Object(b.a)(t,[{key:"render",value:function(){var e=this;return Object(oe.jsx)(Aa,{children:this.props.gameState?Object(oe.jsxs)(oe.Fragment,{children:[Object(oe.jsx)(Da,{}),Object(oe.jsxs)(La,{children:[Object(oe.jsx)(ga,{gameState:this.props.gameState,contextPlayer:this.props.contextPlayer}),this.props.contextPlayer?Object(oe.jsx)(Ca,{player:this.props.contextPlayer}):null]}),Object(oe.jsx)(Da,{children:Object(oe.jsx)(Pa,{children:this.props.gameState.players.map((function(n,t){return Object(oe.jsxs)(Ga,{isContextPlayer:n.id===e.props.contextPlayer.id,children:[e.props.gameState.turn===t+1?"\u25b8 ":null,n.name]},n.id)}))})})]}):null})}}]),t}(i.a.Component),Na=d.a.div(Ar||(Ar=Object(c.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n"]))),Ra=d.a.div(Lr||(Lr=Object(c.a)(["\n  flex-direction: column;\n  display: flex;\n  justify-content: center;\n  text-shadow: 1px 1px 1px #000;\n  text-align: center;\n  color: #fff;\n"]))),Ta=d.a.div(Dr||(Dr=Object(c.a)(["\n  width: 450px;\n  display: flex;\n  flex-wrap: wrap;\n"]))),Ma=d.a.div(Br||(Br=Object(c.a)(["\n  width: 200px;\n  border: 2px solid #ccc;\n  height: 200px;\n  margin: 10px;\n  background: rgba(55,55,55,0.5);\n  text-align: center;\n  color: #fff;\n  text-shadow: 1px 1px 1px #000;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n"]))),Fa=d.a.div(Nr||(Nr=Object(c.a)(["\n  font-size: 24px;\n  padding: 20px;\n"]))),Ua=d.a.input(Rr||(Rr=Object(c.a)(["\n  background: rgba(55,55,55,0.6);\n  font-size: 24px;\n  text-align: center;\n  color: #fff;\n  border: 0;\n  display: inline;\n  width: 80px;\n  text-shadow: 1px 1px 1px #000;\n  text-decoration: underline;\n  padding: 4px 8px;\n  border-radius: 4px;\n  cursor: pointer;\n"]))),Ha=d.a.a(Tr||(Tr=Object(c.a)(["\n  font-size: 14px;\n  cursor: pointer;\n  border: 1px solid #ff0000;\n  border-radius: 3px;\n  color: #eee;\n  background: rgba(214, 38, 15, 0.5);\n  margin-left: 10px;\n  padding: 4px;\n"]))),_a=d.a.button(Mr||(Mr=Object(c.a)(["\n  border-radius: 0;\n  font-size: 28px;\n  padding: 10px;\n  background: #91a4e6;\n  border: 2px solid #3451b3;\n  margin: 10px;\n  width: auto;\n"]))),Ja=d.a.span(Fr||(Fr=Object(c.a)(["\n  color: #aaa;\n"]))),Ya=d.a.select(Ur||(Ur=Object(c.a)(["\n  display: inline;\n  width: auto;\n"]))),Wa={players:[],code:"",gameState:null,contextPlayer:null},Qa=Y.getInstance(),Va=function(e){Object(h.a)(t,e);var n=Object(m.a)(t);function t(e){var r;return Object(p.a)(this,t),(r=n.call(this,e)).player=void 0,r.host=void 0,r.player=new J(e.playerName),r.state=Wa,r.host=new Ae(r.player,(function(e){return r.networkErrorHandler(e)})),r}return Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({players:[this.player],contextPlayer:this.player});var n=xe(le.Board);this.props.setBgSrc(n),Qa.gameState.background=n,this.setWindowCloseDialog(),window.onunload=function(){return e.host.disconnect()},this.host.host((function(n){return e.setState({code:n})}),(function(n){return e.setState({players:n})}),(function(e){switch(e.type){case Ce.DISCONNECTING:break;case Ce.ACTION:Qa.sendAction(e.payload.player,r[e.payload.action],e.payload.meta)}})),Qa.onStateUpdate((function(n){e.setState({gameState:n})})),Qa.onAction((function(n){e.broadcastAction(n.player,n.type,n.meta,[n.player])}))}},{key:"componentWillUnmount",value:function(){this.cleanupLobby(),Qa.cleanup()}},{key:"disbandLobby",value:function(){window.confirm("Are you sure you want to disband this lobby? Players will not be able to join with this lobby code.")&&this.props.setIsHostingLobby&&(this.props.setIsHostingLobby(!1),window.history.pushState({},"Schmeckles","/"),document.title="Schmeckles")}},{key:"cleanupLobby",value:function(){window.onbeforeunload=null,this.host.disconnect()}},{key:"setWindowCloseDialog",value:function(){window.onbeforeunload=function(e){var n="Are you sure you want to disband this lobby?";return(e=e||window.event)&&(e.returnValue=n),n}}},{key:"addBot",value:function(){}},{key:"sendGameState",value:function(){this.host.broadcast({type:Se.GAMESTATE,payload:Qa.serialize()})}},{key:"broadcastAction",value:function(e,n,t,r){this.host.broadcast({type:Se.ACTION,payload:{player:e,action:n,meta:t}},r)}},{key:"startGame",value:function(){var e=this;this.host.players.forEach((function(n){Qa.sendAction(e.player,r.JoinGame,{joiningPlayer:n})})),Qa.sendAction(this.player,r.StartGame,{}),this.sendGameState()}},{key:"networkErrorHandler",value:function(e){console.error(e)}},{key:"render",value:function(){var e=this;return this.state.gameState&&this.state.gameState.started?Object(oe.jsx)(Ba,{gameState:this.state.gameState,contextPlayer:this.state.contextPlayer}):Object(oe.jsx)(qa,{code:this.state.code,players:this.state.players,disbandLobby:function(){return e.disbandLobby()},startGame:function(){return e.startGame()}})}}]),t}(i.a.Component),Xa={players:[],code:"",contextPlayer:null,gameState:null},Ka=function(e){Object(h.a)(t,e);var n=Object(m.a)(t);function t(e){var r;return Object(p.a)(this,t),(r=n.call(this,e)).player=void 0,r.client=void 0,r.state=Xa,r.player=new J(e.playerName),r.client=new Le(r.player,(function(e){return r.networkErrorHandler(e)})),r}return Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({code:this.props.joinLobbyCode.toUpperCase(),contextPlayer:this.player}),Qa.onStateUpdate((function(n){e.setState({gameState:n})})),Qa.onAction((function(n){e.client.send({type:Ce.ACTION,payload:{player:n.player,action:n.type,meta:n.meta}})})),window.onunload=function(){return e.client.disconnect()},this.client.join(this.props.joinLobbyCode,(function(n){switch(n.type){case Se.DISBANDED:e.exitWithErrorMessage("Lobby was disbanded by host");break;case Se.DISCONNECTED:e.exitWithErrorMessage("Disconnected");break;case Se.LOBBY_PLAYERS:e.setState({players:n.payload});break;case Se.ACTION:Qa.receiveAction(P.create(n.payload.player,r[n.payload.action],n.payload.meta));break;case Se.GAMESTATE:console.log("Updating game state: ",n.payload),Qa.updateGameState(Y.unserialize(n.payload)),Qa.gameState.background&&e.props.setBgSrc(Qa.gameState.background)}}))}},{key:"componentWillUnmount",value:function(){this.cleanupLobby()}},{key:"exitWithErrorMessage",value:function(e){this.props.setErrorMessage(e),this.props.setJoinLobbyCode("")}},{key:"networkErrorHandler",value:function(e){"peer-unavailable"===e.type&&this.exitWithErrorMessage("Lobby not found"),this.exitWithErrorMessage("Network error"),console.error(e)}},{key:"cleanupLobbyAndExit",value:function(){this.cleanupLobby(),this.client.disconnect(),this.props.setJoinLobbyCode("")}},{key:"cleanupLobby",value:function(){window.history.pushState({},"Schmeckles","/"),document.title="Schmeckles"}},{key:"render",value:function(){var e=this;return this.state.gameState&&this.state.gameState.started?Object(oe.jsx)(Ba,{gameState:this.state.gameState,contextPlayer:this.state.contextPlayer}):Object(oe.jsx)(qa,{code:this.state.code,players:this.state.players,exitLobby:function(){return e.cleanupLobbyAndExit()}})}}]),t}(i.a.Component),qa=function(e){Object(h.a)(t,e);var n=Object(m.a)(t);function t(e){var r;return Object(p.a)(this,t),(r=n.call(this,e)).codeInput=void 0,r.updateBrowserLocation=function(e){window.history.pushState({},"[".concat(e,"] Schmeckles"),"/".concat(e)),document.title="[".concat(e,"] Schmeckles")},r.copyCodeToClipboard=function(){r.codeInput.current.select(),document.execCommand("copy")},r.codeInput=i.a.createRef(),r}return Object(b.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.code!==e.code&&this.updateBrowserLocation(this.props.code)}},{key:"render",value:function(){var e=this;return Object(oe.jsx)(Na,{children:Object(oe.jsxs)(Ra,{children:[Object(oe.jsx)(pe,{}),this.props.code?Object(oe.jsx)(oe.Fragment,{children:Object(oe.jsxs)(Fa,{children:["Lobby Code: ",Object(oe.jsx)(Ua,{ref:this.codeInput,type:"text",value:this.props.code,readOnly:!0,onClick:this.copyCodeToClipboard}),this.props.disbandLobby?Object(oe.jsx)(Ha,{onClick:function(){return e.props.disbandLobby&&e.props.disbandLobby()},children:"Disband Lobby"}):null,this.props.exitLobby?Object(oe.jsx)(Ha,{onClick:function(){return e.props.exitLobby&&e.props.exitLobby()},children:"Exit Lobby"}):null]})}):Object(oe.jsx)(oe.Fragment,{children:"Establishing P2P network connection..."}),Object(oe.jsx)(Ta,{children:Object(u.a)(Array(4)).map((function(n,t){return Object(oe.jsx)(Ma,{children:e.props.players[t]?Object(oe.jsx)(oe.Fragment,{children:e.props.players[t].connected?Object(oe.jsx)(oe.Fragment,{children:e.props.players[t].name}):Object(oe.jsx)(Ja,{children:e.props.players[t].name})}):e.props.startGame?Object(oe.jsxs)("span",{children:["Waiting for ",Object(oe.jsxs)(Ya,{children:[Object(oe.jsx)("option",{children:"Player"}),Object(oe.jsx)("option",{children:"Computer"})]})]}):Object(oe.jsx)(oe.Fragment,{children:"Waiting for players..."})},t)}))}),this.props.players.length<2?Object(oe.jsx)("p",{children:"At least two players needed to start game."}):null,this.props.startGame?Object(oe.jsx)(_a,{disabled:this.props.players.length<2,onClick:function(){return e.props.startGame&&e.props.startGame()},children:"Start Game"}):Object(oe.jsx)("p",{children:"Game will begin when the host start the game."})]})})}}]),t}(i.a.Component),Za=d.a.div(Hr||(Hr=Object(c.a)(["\n  height: 100%;\n"]))),$a=function(){var e=Object(a.useState)(!1),n=Object(s.a)(e,2),t=n[0],r=n[1],i=Object(a.useState)(""),l=Object(s.a)(i,2),o=l[0],c=l[1],d=Object(a.useState)(""),u=Object(s.a)(d,2),p=u[0],b=u[1],h=Object(a.useState)(""),m=Object(s.a)(h,2),y=m[0],x=m[1],f=Object(a.useState)(""),j=Object(s.a)(f,2),g=j[0],O=j[1];return Object(oe.jsx)(fe,{type:le.Board,src:g,children:Object(oe.jsxs)(Za,{children:[t?Object(oe.jsx)(Va,{playerName:o,setIsHostingLobby:r,setErrorMessage:x,setBgSrc:O}):null,p?Object(oe.jsx)(Ka,{playerName:o,joinLobbyCode:p,setErrorMessage:x,setJoinLobbyCode:function(e){b(e.toUpperCase())},setBgSrc:O}):null,t||p?null:Object(oe.jsx)(Ee,{hostLobby:function(e){r(!0),c(e)},joinLobby:function(e,n){b(e.toUpperCase()),c(n)},errorMessage:y})]})})},ei=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,54)).then((function(n){var t=n.getCLS,r=n.getFID,a=n.getFCP,i=n.getLCP,l=n.getTTFB;t(e),r(e),a(e),i(e),l(e)}))};o.a.render(Object(oe.jsx)(i.a.StrictMode,{children:Object(oe.jsx)($a,{})}),document.getElementById("root")),ei()}},[[50,1,2]]]);
//# sourceMappingURL=main.dda9926d.chunk.js.map