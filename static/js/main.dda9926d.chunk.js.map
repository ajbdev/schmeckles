{"version":3,"sources":["../node_modules/peerjs/dist sync","Actions.ts","Rules.ts","Game.ts","Ui/Splash.tsx","Network.ts","Ui/svg/ruby.svg","Ui/svg/emerald.svg","Ui/svg/diamond.svg","Ui/svg/onyx.svg","Ui/svg/sapphire.svg","Ui/svg/star.svg","Ui/Gems.tsx","Ui/Cards.tsx","Ui/Nobles.tsx","Ui/svg/cancel.svg","Ui/svg/confirm.svg","Ui/Board.tsx","Ui/Player.tsx","Ui/Game.tsx","Ui/Lobby.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["webpackEmptyContext","req","e","Error","code","keys","resolve","module","exports","id","Action","gameHasEnoughPlayers","players","passed","length","message","gameHasNotStarted","started","gameHasStarted","isPlayersTurn","player","turn","findIndex","p","Gem","Tier","BaseAction","meta","type","rules","failedRules","this","gameState","forEach","r","result","push","t","ActionToBePerformed","JoinGame","StartGame","TakeGems","PurchaseCard","ReserveCard","moveGems","from","to","amount","Object","gemType","g","joiningPlayer","gems","desired","filter","star","totalGems","values","reduce","a","b","result1","v","gem","bank","canTakeTwoGems","canTakeThreeGems","isTakingTwoOrThreeGems","nextTurn","cards","index","card","costs","c","canAffordCard","splice","reserved","reservedCards","emptyGemStash","Ruby","Sapphire","Diamond","Onyx","Emerald","Star","shuffle","arr","reduceRight","res","_","__","s","Math","random","Card","points","tier","CardPile","n","destination","GameState","tierICards","tierIICards","tierIIICards","tierIDrawPile","tierIIDrawPile","tierIIIDrawPile","nobles","background","cardsJson","map","ruby","sapphire","diamond","onyx","emerald","noblesJson","I","II","III","drawVisibleCards","draw","names","Player","name","connected","connectionId","computer","Game","onStateUpdateCallback","onActionCallback","classToPlain","gs","playerId","callback","actionType","data","action","create","receiveAction","checkRules","act","alert","instance","serializedGameState","plainToClass","undefined","getInstance","BackgroundType","SplashScreenStyle","styled","div","SplashBackgroundStyle","attrs","props","imageSrc","bgColor","SplashTitle","h1","GameTitleStyle","h2","GameTitle","HostButton","button","JoinGameArea","JoinGameInput","input","JoinGameButton","getRandomBackground","process","floor","SplashBackground","state","src","color","loadBackground","fac","FastAverageColor","getColorAsync","setState","hex","children","React","Component","ChangeNameLink","WelcomeStyle","ChosenNameStyle","ChangeNameInput","ErrorMessage","ColumnStyle","randomName","Splash","useState","isChangingName","setIsChangingName","setName","setCode","useEffect","window","location","pathname","replace","Menu","errorMessage","placeholder","autoFocus","onChange","target","value","onKeyPress","i","which","onClick","hostLobby","disabled","joinLobby","HostBroadcastType","ClientMessageType","Network","onError","err","peer","debugLevel","createConnectionId","Peer","fullyQualifiedId","debug","on","Host","clients","toString","substr","toUpperCase","onConnect","onPlayerUpdate","onClientAction","client","peerConnection","onconnectionstatechange","ev","connectionState","metadata","broadcast","LOBBY_PLAYERS","payload","console","log","m","exclude","ids","indexOf","send","DISBANDED","disconnect","Client","host","onHostBroadcast","connect","DISCONNECTED","close","_extends","assign","arguments","source","key","prototype","hasOwnProperty","call","apply","_objectWithoutProperties","excluded","sourceKeys","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_ref2","d","SvgRuby","_ref","svgRef","title","titleId","enableBackground","height","viewBox","width","xmlns","ref","ForwardRef","SvgEmerald","SvgDiamond","SvgOnyx","SvgSapphire","SvgStar","xmlnsXlink","IconSize","GemCostSize","Icon","size","md","RubyIcon","RubySvg","EmeraldIcon","EmeraldSvg","DiamondIcon","DiamondSvg","SapphireIcon","SapphireSvg","OnyxIcon","OnyxSvg","StarIcon","StarSvg","GemUI","GemIconType","CardSize","GemCostStyle","RubyCostStyle","EmeraldCostStyle","DiamondCostStyle","SapphireCostStyle","OnyxCostStyle","PointValueStyle","span","OnyxPointValueStyle","CostGemIcon","CostDiamondIcon","RubyCostUI","cost","EmeraldCostUI","SapphireCostUI","OnyxCostUI","DiamondCostUI","GemGroupedCostStyle","GemCostsUI","NobleSize","CardSizes","xs","sm","lg","xl","CardStyle","VictoryPointsStyle","GemAwardStyle","CardUI","flipped","FlippedCardStyle","FlippedCardInnerStyle","FlippedCardUI","DrawPileUI","NobleStyle","NobleUI","noble","SvgCancel","_ref3","_ref4","_ref5","_ref6","_ref7","_ref8","_ref9","_ref10","_ref11","_ref12","_ref13","_ref14","_ref15","_ref16","_ref17","SvgConfirm","x","y","style","xmlSpace","game","CardRowStyle","NobleRowStyle","InteractiveCardStyle","CardButtonGutter","InteractiveCardUI","ix","sendAction","CardRowUI","drawPile","numberOfCards","visibleCards","BoardStyle","GemBankStyle","GemBankHolderStyle","TilesStyle","SchmeckleStyle","RubySchmeckleStyle","EmeraldSchmeckleStyle","DiamondSchmeckleStyle","OnyxSchmeckleStyle","SapphireSchmeckleStyle","StarSchmeckleStyle","SchmeckleGemStash","SchmeckleGemCoinUI","SchmeckleCoinWrapUI","SchmeckleStackUI","holdGem","Array","GemBankUI","subtracted","heldGems","setHeldGems","HudGutterAreaStyle","HoldUIStyle","HoldGemSlotsStyle","GemSlotStyle","ConfirmButtonStyle","CancelButtonStyle","HoldGemUI","slice","removeGem","confirmTakeGems","defaultState","BoardUI","contextPlayer","HudStyle","DashChromeStyle","GemColumnStyle","GemSchmeckleStashStyle","CardStackStyle","StackedCardStyle","GemHudIndicatorStyle","HudUI","isReservedCardFacing","setIsReservedCardFacing","sort","c1","c2","onMouseEnter","onMouseLeave","PlayerListStyle","ul","PlayerListItemStyle","li","isContextPlayer","GameStyle","SideColumnStyle","GameUI","LobbyPageStyle","ContentColumnStyle","PlayerBoxes","PlayerBoxStyle","LobbyCode","CodeUnderline","ExitLink","StartGameButtonStyle","PlayerNameConnectingStyle","PlayerTypeDropdownStyle","select","defaultLobbyHostState","LobbyHost","playerName","networkErrorHandler","bgSrc","Board","setBgSrc","setWindowCloseDialog","onunload","msg","DISCONNECTING","ACTION","onStateUpdate","onAction","broadcastAction","cleanupLobby","cleanup","confirm","setIsHostingLobby","history","pushState","document","onbeforeunload","event","returnValue","GAMESTATE","serialize","sendGameState","error","disbandLobby","startGame","defaultLobbyClientState","LobbyClient","joinLobbyCode","join","exitWithErrorMessage","updateGameState","unserialize","setErrorMessage","setJoinLobbyCode","exitLobby","cleanupLobbyAndExit","Lobby","codeInput","updateBrowserLocation","copyCodeToClipboard","current","execCommand","createRef","prevProps","readOnly","AppStyle","App","isHostingLobby","setPlayerName","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.dda9926d.chunk.js","sourcesContent":["function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 49;","import { GameState, Player, GemStash, Gem, Card, Tier, CardPile, emptyGemStash } from './Game';\nimport { Rule, isPlayersTurn, Result, gameIsNotFull, canAffordCard, bankHasEnoughGems, isTakingTwoOrThreeGems, canTakeThreeGems, gemsAreOfSameType, canTakeTwoGems, canReserveCard, gameHasEnoughPlayers, gameHasNotStarted, gameHasStarted, isValidGems } from './Rules';\n\nexport enum Action {\n  JoinGame = 'JoinGame',\n  StartGame = 'StartGame',\n  TakeGems = 'TakeGems',\n  ReserveCard = 'ReserveCard',\n  PurchaseCard = 'PurchaseCard',\n}\n\nexport interface IAction {\n  type?: Action\n  player: Player\n  rules: Rule[]\n  failedRules: Result[]\n  checkRules: (gameState: Readonly<GameState>) => boolean\n  act(gameState: GameState): void;\n}\n\nexport abstract class BaseAction implements IAction {\n  type?: Action\n  player: Player\n  rules: Rule[]\n  meta: any\n  failedRules: Result[]\n\n  constructor(p: Player, meta: any) {\n    this.player = p;\n    this.rules = [];\n    this.meta = meta;\n    this.failedRules = [];\n  }\n\n  static create(p: Player, t: Action, meta: any) {\n    const actionFactoryMap = {\n      [Action.JoinGame]: JoinGame,\n      [Action.StartGame]: StartGame,\n      [Action.TakeGems]: TakeGems,\n      [Action.PurchaseCard]: PurchaseCard,\n      [Action.ReserveCard]: ReserveCard\n    }\n\n    const ActionToBePerformed = actionFactoryMap[t];\n\n    return new ActionToBePerformed(p, {...meta})\n  }\n\n  checkRules(gameState: Readonly<GameState>): boolean {\n    this.rules.forEach(r => {\n      const result = r(gameState);\n\n      if (!result.passed) {\n        this.failedRules.push(result);\n      }\n    });\n\n    if (this.failedRules.length > 0) {\n      return false;\n    }\n    return true;\n  }\n\n  nextTurn(gameState: GameState) {\n    let turn = gameState.turn + 1;\n\n    if (turn > gameState.players.length) {\n      turn = 1;\n    }\n\n    gameState.turn = turn;\n  }\n\n  abstract act(gameState: GameState): void;\n}\n\nconst moveGems = (from: GemStash, to: GemStash, amount: GemStash) => {\n  Object.keys(from).forEach(gemType => {\n    from[gemType as Gem] -= amount[gemType as Gem];\n    to[gemType as Gem] += amount[gemType as Gem];\n  })\n}\n\nexport class StartGame extends BaseAction {\n  constructor(p: Player, meta: {}) {\n    super(p, meta);\n    this.type = Action.StartGame;\n\n    this.rules = [\n      (g: Readonly<GameState>) => gameHasEnoughPlayers(g.players),\n      (g: Readonly<GameState>) => gameHasNotStarted(g.started)\n    ]\n  }\n\n\n  act(gameState: GameState) {\n    gameState.started = true;\n    gameState.turn = 1;\n  }\n}\n\nexport class JoinGame extends BaseAction {\n  joiningPlayer: Player;\n\n  constructor(p: Player, meta: { joiningPlayer?: Player }) {\n    super(p, meta)\n    this.type = Action.JoinGame;\n    this.joiningPlayer = meta.joiningPlayer ? meta.joiningPlayer : p;\n    this.rules = [\n      (g: Readonly<GameState>) => gameIsNotFull(g.players),\n      (g: Readonly<GameState>) => gameHasNotStarted(g.started)\n    ]\n  }\n\n  act(gameState: GameState) {\n    gameState.players.push(this.joiningPlayer);\n  }\n}\n\nexport class TakeGems extends BaseAction {\n  gems: GemStash;\n\n  constructor(p: Player, meta: { gems: GemStash }) {\n    super(p, meta);\n\n    this.type = Action.TakeGems;\n    this.gems = meta.gems;\n    this.rules = [\n      (g: Readonly<GameState>) => gameHasStarted(g.started),\n      (g: Readonly<GameState>) => gameHasEnoughPlayers(g.players),\n      (g: Readonly<GameState>) => isPlayersTurn(this.player, g.players, g.turn),\n      (g: Readonly<GameState>) => bankHasEnoughGems(this.gems, g.gems),\n      (g: Readonly<GameState>) => isValidGems(this.gems),\n      (g: Readonly<GameState>) => {\n        const totalGems = Object.values(this.gems).reduce((a,b) => a+b);\n\n        if (totalGems === 2) {\n          const result1 = gemsAreOfSameType(this.gems);\n\n          if (!result1.passed) {\n            return result1;\n          }\n\n          const gem = Object.keys(this.gems).filter(g => this.gems[g as Gem] === 2)[0]\n\n          return canTakeTwoGems(gem as Gem, g.gems);\n        }\n        if (totalGems === 3) {\n          return canTakeThreeGems(this.gems);\n        }\n\n        return isTakingTwoOrThreeGems(totalGems);\n      }\n    ];\n  }\n\n  act(gameState: GameState) {\n    moveGems(gameState.gems, this.player.gems, this.gems);\n    this.nextTurn(gameState);\n  }\n}\n\nexport class PurchaseCard extends BaseAction {\n  cards: Card[];\n  index: number;\n\n  constructor(p: Player, meta: { cards: Card[], index: number }) {\n    super(p, meta);\n\n    this.type = Action.PurchaseCard;\n    this.index = meta.index;\n    this.cards = meta.cards;\n\n    this.rules = [\n      (g: Readonly<GameState>) => gameHasStarted(g.started),\n      (g: Readonly<GameState>) => gameHasEnoughPlayers(g.players),\n      (g: Readonly<GameState>) => isPlayersTurn(this.player, g.players, g.turn),\n      (g: Readonly<GameState>) => { \n        const card = this.cards[this.index];\n\n        return canAffordCard(card, this.player);\n      }\n    ]\n  }\n\n  act(gameState: GameState) {\n    const card = this.cards.splice(this.index,1)[0];\n\n    moveGems(this.player.gems, gameState.gems, card.costs);\n\n    if (card.reserved) {\n      card.reserved = false;\n    }\n\n    this.player.cards.cards.push(card);\n    this.nextTurn(gameState);\n  }\n}\n\nexport class ReserveCard extends BaseAction {\n  cards: Card[];\n  index: number;\n\n  constructor(p: Player, meta: { cards: Card[], index: number }) {\n    super(p, meta);\n\n    this.type = Action.ReserveCard;\n    this.cards = meta.cards;\n    this.index = meta.index;\n\n    this.rules = [\n      (g: Readonly<GameState>) => gameHasStarted(g.started),\n      (g: Readonly<GameState>) => gameHasEnoughPlayers(g.players),\n      (g: Readonly<GameState>) => isPlayersTurn(this.player, g.players, g.turn),\n      (g: Readonly<GameState>) => canReserveCard(this.player)\n    ];\n  }\n\n  act(gameState: GameState) {\n    const card = this.cards.splice(this.index,1)[0];\n\n    const gems = emptyGemStash();\n    gems.star = 1;\n\n    moveGems(gameState.gems, this.player.gems, gems);\n\n    card.reserved = true;\n\n    this.player.reservedCards.push(card);\n    this.nextTurn(gameState);\n  }\n}","import { GameState, Player, PlayerTurn, GemStash, Gem, Card } from './Game';\n\nexport interface Result {\n  passed: boolean;\n  message: string;\n}\n\nexport type Rule = (gameState: Readonly<GameState>) => Result\n\nexport const playerHasJoinedGame = (player: Player, players: Player[]): Result => {\n  return {\n    passed: players.filter(p => p.id === player.id).length > 0,\n    message: 'Player has not joined game'\n  }\n}\n\nexport const gameHasEnoughPlayers = (players: Player[]): Result => {\n  return {\n    passed: players.length > 1,\n    message: 'There must be at least two players to start'\n  }\n}\n\nexport const gameHasNotStarted = (started: boolean): Result => {\n  return {\n    passed: !started,\n    message: 'Game has already started.'\n  }\n}\n\nexport const gameHasStarted = (started: boolean): Result => {\n  return {\n    passed: started,\n    message: 'Game must be started first.'\n  }\n}\n\nexport const isPlayersTurn = (player: Player, players: Player[], turn: PlayerTurn): Result => {\n  return {\n    passed: (players.findIndex((p) => p.id === player.id)+1) === turn,\n    message: 'Players can only act when it is their turn.'\n  }\n}\n\nexport const gameIsNotFull = (players: Player[]): Result => {\n  const PLAYER_LIMIT = 4;\n\n  return {\n    passed: players.length < PLAYER_LIMIT,\n    message: 'This game is full.'\n  }\n}\n\nexport const canAffordCard = (card: Card, player: Player): Result => {\n  const overdrawn = Object.keys(card.costs).filter(gemType => card.costs[gemType as Gem] > player.gems[gemType as Gem]+player.cards.cards.filter(c => c.gem === Gem[gemType as keyof typeof Gem]).length).length;\n\n  return {\n    passed: overdrawn === 0,\n    message: 'Not enough gems to purchase this card.'\n  }\n}\n\n\nexport const gemsAreOfSameType = (desired: GemStash): Result => {\n  return {\n    passed: Object.values(desired).filter(v => v > 0).length === 1,\n    message: 'Gems must be of the same type when taking two gems.'\n  }\n}\n\nexport const canTakeTwoGems = (gem: Gem, bank: GemStash): Result => {\n  return {\n    passed: bank[gem] >= 4,\n    message: 'There must be at least four gems of the desired type in the bank to take two gems.'\n  }\n}\n\nexport const canTakeThreeGems = (desired: GemStash): Result => {\n  return {\n    passed: Object.keys(desired).filter(g => desired[g as Gem] > 1).length === 0,\n    message: 'Gems must be of different types to take three gems.'\n  }\n}\n\nexport const isValidGems = (desired: GemStash): Result => {\n  return {\n    passed: desired.star === 0,\n    message: 'Only valid gems can be selected.'\n  }\n}\n\nexport const canReserveCard = (player: Player): Result => {\n  return {\n    passed: player.reservedCards.length < 3,\n    message: 'A maximum of three cards may be reserved.'\n  }\n}\n\nexport const isTakingTwoOrThreeGems = (totalGems:number): Result => {\n  return {\n    passed: totalGems >= 2 && totalGems <= 3,\n    message: 'Only two or three gems can be taken per turn.'\n  }\n}\n\nexport const bankHasEnoughGems = (desired: GemStash, from: GemStash): Result => {\n  const overdrawn = Object.keys(desired).filter(gemType => desired[gemType as Gem] > from[gemType as Gem]).length;\n\n  return {\n    passed: overdrawn === 0,\n    message: 'Not enough gems in the bank to complete this action.'\n  }\n}\n","import cardsJson from './cards.json';\nimport noblesJson from './nobles.json';\nimport { BaseAction, IAction, Action } from './Actions';\nimport { classToPlain, plainToClass } from 'class-transformer';\n\ninterface NobleJsonValues {\n  points: number;\n  diamond: number | null;\n  sapphire: number | null;\n  emerald: number | null;\n  ruby: number | null;\n  onyx: number | null;\n}\n\ninterface CardJsonValues {\n  gem: string;\n  tier: number;\n  points: number | null;\n  diamond: number | null;\n  sapphire: number | null;\n  emerald: number | null;\n  ruby: number | null;\n  onyx: number | null;\n}\n\nexport enum Gem {\n  Ruby = 'ruby', \n  Sapphire = 'sapphire', \n  Onyx = 'onyx', \n  Emerald = 'emerald', \n  Diamond = 'diamond',\n  Star = 'star'\n}\n\nexport enum Tier {\n  I = 1, \n  II = 2, \n  III = 3\n}\nexport interface Noble {\n  points: number;\n  costs: GemStash;\n}\n\nexport interface GemStash {\n  [Gem.Ruby]: number;\n  [Gem.Sapphire]: number;\n  [Gem.Diamond]: number;\n  [Gem.Onyx]: number;\n  [Gem.Emerald]: number;\n  [Gem.Star]: number;\n}\n\nexport const emptyGemStash = () => {\n  return {\n    [Gem.Ruby]: 0,\n    [Gem.Sapphire]: 0,\n    [Gem.Diamond]: 0,\n    [Gem.Onyx]: 0,\n    [Gem.Emerald]: 0,\n    [Gem.Star]: 0\n  }\n}\n\nconst mapNobleValuesJsonToNobleType = (noblesValues: NobleJsonValues[]) => noblesValues.map(\n  n => {\n    return {\n      points: n.points,\n      costs: {\n        [Gem.Ruby]: n.ruby || 0,\n        [Gem.Sapphire]: n.sapphire || 0,\n        [Gem.Diamond]: n.diamond || 0,\n        [Gem.Onyx]: n.onyx || 0,\n        [Gem.Emerald]: n.emerald || 0\n      }\n    }\n  }\n);\n\nconst mapCardValuesJsonToCardType = (cardValues: CardJsonValues[]) => cardValues.map(\n  c => new Card(\n    c.points || 0,\n    c.gem as Gem,\n    c.tier as Tier,\n    {\n      [Gem.Ruby]: c.ruby || 0,\n      [Gem.Sapphire]: c.sapphire || 0,\n      [Gem.Diamond]: c.diamond || 0,\n      [Gem.Onyx]: c.onyx || 0,\n      [Gem.Emerald]: c.emerald || 0,\n      [Gem.Star]: 0\n    }\n  )\n)\n\nconst shuffle = (arr:Array<any>) => \n  [...arr].reduceRight((res,_,__,s) => \n    (res.push(s.splice(0|Math.random()*s.length,1)[0]), res), []);\n\nexport class Card {\n  points: number;\n  gem: Gem;\n  tier: Tier;\n  costs: GemStash;\n  reserved?: boolean\n\n  constructor(points: number, gem: Gem, tier: Tier, costs: GemStash) {\n    this.points = points;\n    this.gem = gem;\n    this.tier = tier;\n    this.costs = costs;\n  }\n}\n\nexport class CardPile {\n  cards: Card[];\n  tier?: Tier;\n  \n  constructor(tier?: Tier, cards?: Card[]) {\n    if (tier) this.tier = tier;\n\n    if (cards) {\n      this.cards = shuffle(cards);\n    } else {\n      this.cards = [];\n    }\n  }\n\n  draw(n: number, destination: CardPile) {\n    this.cards.splice(0, n).forEach(c => destination.cards.push(c));\n  }\n}\n\nexport type PlayerTurn = number;\n\nexport class GameState  {\n  tierICards: CardPile;\n  tierIICards: CardPile;\n  tierIIICards: CardPile;\n  tierIDrawPile: CardPile;\n  tierIIDrawPile: CardPile;\n  tierIIIDrawPile: CardPile;\n  nobles: Noble[];\n  gems: GemStash;\n  players: Player[];\n  started: boolean;\n  turn: PlayerTurn;\n  background?: string;\n\n  constructor() {\n    const cards = mapCardValuesJsonToCardType(cardsJson);\n    const nobles = shuffle(mapNobleValuesJsonToNobleType(noblesJson));\n\n    this.players = [];\n    this.nobles = nobles.splice(0, 3);\n\n    this.tierICards = new CardPile(Tier.I, []);\n    this.tierIICards = new CardPile(Tier.II, []);\n    this.tierIIICards = new CardPile(Tier.III, []);\n\n    this.tierIDrawPile = new CardPile(Tier.I, cards.filter(c => c.tier === Tier.I));\n    this.tierIIDrawPile = new CardPile(Tier.II, cards.filter(c => c.tier === Tier.II));\n    this.tierIIIDrawPile = new CardPile(Tier.III, cards.filter(c => c.tier === Tier.III));\n\n    this.drawVisibleCards();\n    this.turn = 1;\n    this.started = false;\n\n    this.gems = {\n      [Gem.Ruby]: 7,\n      [Gem.Sapphire]: 7,\n      [Gem.Diamond]: 7,\n      [Gem.Onyx]: 7,\n      [Gem.Emerald]: 7,\n      [Gem.Star]: 5\n    }\n  }\n\n  drawVisibleCards() {\n    this.tierIDrawPile.draw(4-this.tierICards.cards.length, this.tierICards);\n    this.tierIIDrawPile.draw(4-this.tierIICards.cards.length, this.tierIICards);\n    this.tierIIIDrawPile.draw(4-this.tierIIICards.cards.length, this.tierIIICards);\n  }\n}\n\n\nconst names = ['Helgi','Finnbogi','Abu','Jean','Samo','Giovanni','Lus','Jeanne','Gregorio','Domini','Andres','Guglielmo','Hugo','Muhammad', 'Eldad', 'Wulfstan', 'Joseph', 'Aldo', 'Alessio', 'Cosimo', 'Fabritio', 'Francesca', 'Galileo', 'Isabetta', 'Lavinia', 'Madalena', 'Minerva', 'Nencia', 'Vinci'];\n\nexport function generateRandomName() {\n  return names[Math.floor(Math.random()*names.length)];;\n}\n\nexport class Player {\n  id: string;\n  name: string;\n  gems: GemStash;\n  cards: CardPile;\n  reservedCards: Card[];\n  nobles: Noble[];\n  connected: boolean;\n  connectionId: string;\n  computer: boolean;\n\n  constructor(name: string) {    \n    this.id = name;\n    this.name = name;\n    this.gems = emptyGemStash();\n    this.cards = new CardPile();\n    this.reservedCards = [];\n    this.nobles = [];\n    this.connected = false;\n    this.connectionId = '';\n    this.computer = false;\n  }\n}\n\n\nexport default class Game {\n  gameState: GameState;\n  private static instance: Game | undefined;\n  private onStateUpdateCallback: ((gameState: GameState) => void) | null;\n  private onActionCallback: ((a: BaseAction) => void) | null;\n\n  private constructor() {\n    this.gameState = new GameState();\n    this.onStateUpdateCallback = null;\n    this.onActionCallback = null;\n  }\n\n  public static getInstance(): Game {\n    if (!Game.instance) {\n      Game.instance = new Game();\n    }\n\n    return Game.instance;\n  }\n\n  serialize() {\n    return classToPlain(this.gameState);\n  }\n\n  public static unserialize(serializedGameState: any) {\n     return plainToClass(GameState, serializedGameState);\n  }\n\n  updateGameState(gs: GameState) {\n    this.gameState = gs;\n    if (this.onStateUpdateCallback) {\n      this.onStateUpdateCallback(gs);\n    }\n  }\n\n  getPlayer(playerId: string) {\n    return this.gameState.players.filter(p => p.id === playerId)[0];\n  }\n\n  onStateUpdate(callback: (gameState: GameState) => void | null):void {\n    this.onStateUpdateCallback = callback;\n  }\n\n  onAction(callback: (a: BaseAction) => void | null):void {\n    this.onActionCallback = callback;\n  }\n\n  cleanup() {\n    this.onStateUpdateCallback = null;\n    this.onActionCallback = null;\n  }\n\n  sendAction(player: Player, actionType: Action, data: any): BaseAction {\n    const action = BaseAction.create(\n      player,\n      actionType,\n      data\n    );  \n\n    if (this.onActionCallback) {\n      this.onActionCallback(action);\n    }\n\n    this.receiveAction(action);\n\n    return action;\n  }\n\n  public static reset(): Game {\n    Game.instance = undefined;\n\n    return this.getInstance();\n  }\n\n  receiveAction(action: IAction) {\n    if (action.checkRules(this.gameState)) {\n      action.act(this.gameState);\n    } else {\n      action.failedRules.map(a => alert(a.message));\n    }\n    if (this.onStateUpdateCallback) {\n      this.onStateUpdateCallback(this.gameState);\n    }\n  }\n}","import styled from 'styled-components';\nimport React, { useEffect, useState } from 'react';\nimport FastAverageColor from 'fast-average-color';\nimport { generateRandomName } from '../Game';\n\n\nconst SplashScreenStyle = styled.div`\n  width: 100%;\n  background: #999;\n  text-align: center;\n  height: 100%;\n`\n\ninterface SplashScreenProps {\n  imageSrc: string;\n  bgColor?: string;\n}\n\nexport const SplashBackgroundStyle = styled.div.attrs((props: SplashScreenProps) => ({\n  imageSrc: props.imageSrc,\n  bgColor: props.bgColor || '#555555'\n}))`\n  background-image: url(${props => props.imageSrc});\n  background-color: ${props => props.bgColor};\n  background-size: contain;\n  background-position: center center;\n  background-repeat: no-repeat;\n  height: 100%;\n`\n\nconst SplashTitle = styled.h1`\n  font-size: 70px;\n  color: #FFDC73;\n  -webkit-text-stroke: 1px #BF9B30;\n  margin: 0;\n  padding: 20px 0 50px 0;\n`\n\nconst GameTitleStyle = styled.h2`\n  font-size: 36px;\n  color: #FFDC73;\n  -webkit-text-stroke: 0.5px #BF9B30;\n  text-shadow: 1px 1px 1px #000;\n  margin: 0;\n  text-align: center;\n`\n\nexport const GameTitle = () => (\n  <GameTitleStyle>Schmeckles</GameTitleStyle>\n)\n\nconst HostButton = styled.button`\n  border-radius: 0;\n  font-size: 28px;\n  padding: 10px;\n  background: #91a4e6;\n  border: 2px solid #3451b3;\n  width: 400px;\n`\n\nconst JoinGameArea = styled.div`\n  display: flex;\n  margin: 20px auto;\n  width: 400px;\n`\n\nconst JoinGameInput = styled.input`\n  font-size: 28px;\n  padding: 10px;\n  border: 2px solid #ccc;\n  text-align: center;\n  text-transform: uppercase;\n  width: 150px;\n`\n\nconst JoinGameButton = styled.button`\n  border-radius: 0;\n  font-size: 28px;\n  padding: 10px;\n  border: 2px solid #2f8a33;\n  background: #5ee465;\n  margin-left: 20px;\n  width: 230px;\n`\n\nexport enum BackgroundType { Menu = 'menu', Board = 'board'}\n\ninterface SplashBackgroundProps {\n  children: React.ReactNode\n  type: BackgroundType\n  src?: string\n}\ninterface SplashBackgroundState {\n  background: {\n    src: string;\n    color: string;\n  }\n}\n\nexport function getRandomBackground(type: BackgroundType) {\n  return `${process.env.PUBLIC_URL}/splash/${type}${Math.floor(Math.random() * 8)+1}.jpg`;\n}\n\nexport class SplashBackground extends React.Component<SplashBackgroundProps, SplashBackgroundState> {\n  state: SplashBackgroundState;\n\n  constructor(props: SplashBackgroundProps) {\n    super(props);\n\n    this.state = {\n      background: {\n        src: props.src || '',\n        color: ''\n      }\n    }\n  }\n\n  componentDidMount() {\n    this.loadBackground();\n  }\n\n  async loadBackground() {\n    const src = this.props.src || getRandomBackground(this.props.type);\n    const fac = new FastAverageColor();\n\n    const color = await fac.getColorAsync(src);\n\n    this.setState({ background: { src: src, color: color.hex } });\n  }\n\n  render() {\n    return (\n      <SplashBackgroundStyle imageSrc={this.props.src || this.state.background.src} bgColor={this.state.background.color}>\n        {this.props.children}\n      </SplashBackgroundStyle>\n    );\n  }\n}\n\nconst ChangeNameLink = styled.a`\n  color: #00d9ff;\n  text-decoration: underline;\n  cursor: pointer;\n`\n\nconst WelcomeStyle = styled.p`\n  color: #fff;\n  font-size: 24px;\n  text-shadow: 1px 1px 1px #000;\n  font-weight: bold;\n  user-select: none;\n`\n\nconst ChosenNameStyle = styled.a`\n  border-bottom: 1px dashed #fff;\n  cursor: pointer;\n`\n\nconst ChangeNameInput = styled.input`\n  padding: 2px;\n  font-size: 20px;\n  text-align: center;\n  margin-left: 10px;\n  width: 140px;\n`\n\nconst ErrorMessage = styled.div`\n  font-size: 20px;\n  color: #fff;\n  display: inline-block;\n  padding: 8px;\n  border-radius: 8px;\n  background: rgba(255, 0, 0, 0.5);\n`\n\nconst ColumnStyle = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: space-around;\n  height: 100%;\n`\n\nconst randomName = generateRandomName();\n\ninterface SplashProps {\n  hostLobby: (playerName: string) => void;\n  joinLobby: (code: string, playerName: string) => void;\n  errorMessage: string;\n}\n\nexport default function Splash(props: SplashProps) {\n  const [isChangingName, setIsChangingName] = useState(false);\n\n  const [name, setName] = useState(randomName);\n\n  const [code, setCode] = useState('');\n\n  const handleEnter = (i: any) => { \n    if (i.which === 13) {\n      setIsChangingName(false);\n    }\n  }\n\n  useEffect(() => {\n    if (window.location.pathname.length > 1) {\n      const c = window.location.pathname.replace('/','');\n\n      if (c.length === 4) {\n        setCode(c)\n      }\n    }\n  }, [])\n  \n  return (\n    <SplashScreenStyle>\n      <SplashBackground type={BackgroundType.Menu}>\n        <ColumnStyle>\n          <div>\n            <SplashTitle>Schmeckles</SplashTitle>\n          </div>\n          <div>\n            { props.errorMessage ? <ErrorMessage>{props.errorMessage}</ErrorMessage> : null}\n            <WelcomeStyle>\n              Welcome, \n              {isChangingName \n                ? (\n                  <ChangeNameInput type=\"text\" placeholder={name} autoFocus={true} onChange={v => setName(v.target.value)} onKeyPress={handleEnter} />\n                )\n                : (\n                  <>\n                    &nbsp;\n                    <ChosenNameStyle onClick={() => setIsChangingName(true)}>{name}</ChosenNameStyle>! \n                    &nbsp;\n                    <ChangeNameLink onClick={() => setIsChangingName(true)}>Change Name</ChangeNameLink>\n                  </>\n                )\n                }\n            </WelcomeStyle>\n            <HostButton onClick={() => props.hostLobby(name)}>\n              Host a game\n            </HostButton>\n            <JoinGameArea>\n              <JoinGameInput type=\"text\" placeholder=\"Code\" value={code} onChange={(e) => setCode(e.target.value)} />\n              <JoinGameButton disabled={code.length !== 4} onClick={() => props.joinLobby(code, name)}>Join Game</JoinGameButton>\n            </JoinGameArea>\n          </div>\n        </ColumnStyle>\n      </SplashBackground>\n    </SplashScreenStyle>\n  )\n}","import Peer from 'peerjs';\nimport { Player } from './Game';\n\nexport enum HostBroadcastType {\n  DISBANDED = 'DISBANDED',\n  DISCONNECTED = 'DISCONNECTED',\n  LOBBY_PLAYERS = 'LOBBY_PLAYERS',\n  ACTION = 'ACTION',\n  GAMESTATE = 'GAMESTATE'\n}\n\ninterface HostNetworkMessage {\n  type: HostBroadcastType,\n  payload?: any;\n}\n\nexport enum ClientMessageType {\n  DISCONNECTING = 'DISCONNECTING',\n  ACTION = 'ACTION'\n}\n\nexport interface ClientNetworkMessage {\n  type: ClientMessageType\n  payload?: any\n}\n\nexport abstract class Network {\n  onError = (err: any) =>  {};\n  player: Player;\n  connectionId: string;\n  peer: Peer;\n  debugLevel: number;\n\n  constructor(player: Player, onError: (err: any) => void) {\n    this.player = player;\n    this.debugLevel = 3;\n    this.connectionId = this.createConnectionId();\n    this.peer = new Peer(this.fullyQualifiedId(this.connectionId), { debug: this.debugLevel });\n    this.onError = onError;\n\n    this.peer.on('error', this.onError);\n  }\n\n  fullyQualifiedId(code: string) {\n    return  `schmeckles_${code}`;\n  }\n\n  abstract createConnectionId(): string;\n}\n\nexport class Host extends Network {\n  clients: Peer.DataConnection[] = [];\n  players: Player[] = [];\n\n  createConnectionId() {\n    return Math.random().toString(20).substr(2, 4).toUpperCase();\n  }\n\n  host(onConnect: (code: string) => void, onPlayerUpdate: (p: Player[]) => void, onClientAction: (m: ClientNetworkMessage) => void) {\n    this.player.connected = true;\n    this.players = [this.player];\n\n    this.peer.on('open', (id) => {\n      onConnect(this.connectionId);\n\n      this.peer.on('connection', (client) => {\n\n        client.peerConnection.onconnectionstatechange = (ev: any) => {\n          if (ev.target.connectionState === 'failed') {\n            this.players.splice(this.players.findIndex(p => p.id === client.metadata.id))\n            this.broadcast({ type: HostBroadcastType.LOBBY_PLAYERS, payload: this.players });\n            onPlayerUpdate(this.players);\n          }\n        };\n  \n        const player = client.metadata;\n        if (this.players.length < 4 && player.name.length > 0) {\n          this.players.push(player);\n          this.clients.push(client);\n\n          onPlayerUpdate(this.players);\n          this.broadcast({ type: HostBroadcastType.LOBBY_PLAYERS, payload: this.players });\n        }\n\n        client.on('open', () => {\n          client.metadata.connected = true;\n          this.broadcast({ type: HostBroadcastType.LOBBY_PLAYERS, payload: this.players });\n          onPlayerUpdate(this.players);\n        })\n\n        client.on('close', () => {\n          console.log('closed connection with ' + client.metadata.name);\n          this.players.splice(this.players.findIndex(p => p.id === client.peer), 1)\n          this.broadcast({ type: HostBroadcastType.LOBBY_PLAYERS, payload: this.players });\n          onPlayerUpdate(this.players);\n        })\n    \n        client.on('data', function(data: ClientNetworkMessage) {\n          console.log('Received from client: ', data);\n\n          onClientAction(data);\n        });\n      })\n    });\n  }\n\n  broadcast(m: HostNetworkMessage, exclude?: Player[]) {\n    let clients = this.clients;\n\n    const ids = exclude?.map(p => p.id);\n\n    if (exclude && ids!.length > 0) {\n      clients = this.clients.filter(c => ids!.indexOf(c.metadata.id) === -1)\n    }\n\n    console.log('Broadcasting to ' + clients.length + ' clients: ', m);\n\n    clients.forEach(c => {\n      c.send(m);\n    })\n  }\n\n  disconnect() {\n    this.broadcast({ type: HostBroadcastType.DISBANDED });\n    this.peer.disconnect();\n  }\n}\n\nexport class Client extends Network {\n  code: string = ''\n  host: Peer.DataConnection | null = null\n\n  createConnectionId() {\n    return Math.random().toString(20).substr(2, 10);\n  }\n\n  send(m: ClientNetworkMessage) {\n    console.log('Sending to host: ', m);\n\n    this.host?.send(m);\n  }\n\n  join(code: string, onHostBroadcast: (message: HostNetworkMessage) => void) {\n    this.peer.on('open', (id:string) => {\n      this.player.id = this.fullyQualifiedId(this.connectionId);\n\n      this.host = this.peer.connect(this.fullyQualifiedId(code), { metadata: this.player });\n      this.code = code;\n\n      this.host.peerConnection.onconnectionstatechange = (ev: any) => {\n        if (ev.target.connectionState === 'failed') {\n          this.onError(ev.target)\n        }\n      };\n\n      this.host.on('open', () => {\n        \n      })\n      this.host.on('data', (data) => {\n        console.log('Received broadcast: ', data);\n        onHostBroadcast(data);\n      })\n      this.host.on('close', () => {\n        console.log('closed');\n        onHostBroadcast({ type: HostBroadcastType.DISCONNECTED });\n      })\n\n      this.host.on('error', (err:any) => {\n        console.log(err);\n      });\n    });\n    this.peer.on('disconnected', () => {\n      console.log('disconnected');\n    })\n  }\n\n  disconnect() {\n    if (this.host) {\n      this.host.close();\n    }\n  }\n}\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m140.566 180.519 39.953-39.953-74.638-34.685z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m121 284.25v-56.5l-77.3 28.25z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m180.519 371.434-39.953-39.953-34.685 74.638z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m284.25 391h-56.5l28.25 77.3z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m396.479 197.812 115.521 42.218v-83.44c0-3.978-1.581-7.793-4.394-10.606l-59.426-59.426z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m227.75 121h56.5l-28.25-77.3z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m331.482 140.566 39.952 39.953 34.685-74.638z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m361 212.511-61.511-61.511h-86.978l-61.511 61.511v86.978l61.511 61.511h86.978l61.511-61.511z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m391 227.75v56.5l77.3-28.25z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m197.812 396.479-111.255 51.702 59.426 59.426c2.813 2.813 6.628 4.394 10.606 4.394h83.44z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m314.189 396.479-42.219 115.521h83.441c3.978 0 7.793-1.581 10.606-4.394l59.426-59.426z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m115.521 314.189-115.521-42.218v83.44c0 3.978 1.581 7.793 4.394 10.606l59.426 59.426z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m396.479 314.188 51.702 111.255 59.426-59.426c2.813-2.813 4.394-6.628 4.394-10.606v-83.441z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m197.811 115.521 42.218-115.521h-83.44c-3.978 0-7.793 1.581-10.606 4.394l-59.426 59.426z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m314.189 115.521 111.255-51.701-59.426-59.426c-2.813-2.813-6.629-4.394-10.607-4.394h-83.441z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m115.521 197.812-51.701-111.255-59.426 59.426c-2.813 2.813-4.394 6.628-4.394 10.606v83.44z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m371.434 331.481-39.953 39.953 74.638 34.685z\"\n}));\n\nfunction SvgRuby(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"Capa_1\",\n    enableBackground: \"new 0 0 512 512\",\n    height: 512,\n    viewBox: \"0 0 512 512\",\n    width: 512,\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgRuby);\nexport default __webpack_public_path__ + \"static/media/ruby.8217c173.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m120 120h272v272h-272z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m21.211 0 90 90h289.578l90-90z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m90 111.211-90-90v469.578l90-90z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m422 111.211v289.578l90 90v-469.578z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m400.789 422h-289.578l-90 90h469.578z\"\n}));\n\nfunction SvgEmerald(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"Capa_1\",\n    enableBackground: \"new 0 0 512 512\",\n    height: 512,\n    viewBox: \"0 0 512 512\",\n    width: 512,\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgEmerald);\nexport default __webpack_public_path__ + \"static/media/emerald.82157412.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m194.028 159.123h123.944l-61.972-92.958z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m274.028 39.123 70.115 105.174 52.587-105.174z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m326.114 189.123h-140.228l70.114 245.4z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m141.729 159.123-53.316-106.633-88.413 106.633z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m357.314 189.123-81.072 283.754 235.498-283.754z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m167.857 144.296 70.115-105.173h-122.701z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m370.27 159.123h141.73l-88.413-106.633z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m154.686 189.123h-154.426l235.498 283.754z\"\n}));\n\nfunction SvgDiamond(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"Capa_1\",\n    enableBackground: \"new 0 0 512 512\",\n    height: 512,\n    viewBox: \"0 0 512 512\",\n    width: 512,\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgDiamond);\nexport default __webpack_public_path__ + \"static/media/diamond.3e856e56.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m186.611 280.288-94.384 62.922 143.469 168.79 4.843-15.999z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m78 195.362v121.278l90.959-60.64z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m325.39 280.288-53.928 215.713 4.843 16 143.469-168.791z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m186.611 231.713 53.928-215.713-4.843-16-143.469 168.791z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m215.212 241h81.576l-40.787-163.153z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m343.042 256 90.958 60.639v-121.277z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m325.39 231.713 94.384-62.922-143.469-168.791-4.843 16.001z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m296.788 271h-81.576l40.788 163.155z\"\n}));\n\nfunction SvgOnyx(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"Capa_1\",\n    enableBackground: \"new 0 0 512.001 512.001\",\n    height: 512,\n    viewBox: \"0 0 512.001 512.001\",\n    width: 512,\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgOnyx);\nexport default __webpack_public_path__ + \"static/media/onyx.538ac46c.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m241 390.692c-38.763-1.159-65.283-6.786-83.243-15.238l-87.513 87.513c40.348 29.433 97.84 47.061 170.756 49.033z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m121 316c0-14.258 3.444-29.526 9.148-45h-124.019c-3.1 15.154-6.129 30.244-6.129 45 0 52.657 17.086 95.257 47.624 127.165l85.849-85.849c-9.948-12.389-12.473-26.9-12.473-41.316z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m143.859 241c8.589-15.899 18.964-31.419 30.106-45.824l-85.864-85.864c-32.246 39.121-59.119 85.077-74.126 131.688z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m354.243 375.454c-17.961 8.452-44.48 14.079-83.243 15.238v121.308c72.916-1.972 130.408-19.6 170.757-49.032z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m151 316c0 15.732 0 45 105 45s105-29.268 105-45c0-53.73-67.222-135.967-105-160.415-37.778 24.448-105 106.685-105 160.415z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m381.852 271c5.704 15.474 9.148 30.742 9.148 45 0 14.416-2.525 28.927-12.473 41.316l85.849 85.849c30.538-31.908 47.624-74.508 47.624-127.165 0-14.756-3.029-29.846-6.129-45z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m193.292 172.081c16.75-18.45 33.734-33.514 47.708-42.442v-129.639c-41.356 6.555-90.145 41.311-133.028 86.761z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m271 129.639c13.975 8.928 30.958 23.992 47.708 42.442l85.32-85.32c-42.883-45.45-91.672-80.206-133.028-86.761z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m423.899 109.312-85.864 85.864c11.142 14.405 21.517 29.925 30.106 45.824h129.884c-15.007-46.611-41.88-92.567-74.126-131.688z\"\n}));\n\nfunction SvgSapphire(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"Capa_1\",\n    enableBackground: \"new 0 0 512 512\",\n    height: 512,\n    viewBox: \"0 0 512 512\",\n    width: 512,\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgSapphire);\nexport default __webpack_public_path__ + \"static/media/sapphire.76e1c154.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m10.201,.758l2.478,5.865 6.344,.545c0.44,0.038 0.619,0.587 0.285,0.876l-4.812,4.169 1.442,6.202c0.1,0.431-0.367,0.77-0.745,0.541l-5.452-3.288-5.452,3.288c-0.379,0.228-0.845-0.111-0.745-0.541l1.442-6.202-4.813-4.17c-0.334-0.289-0.156-0.838 0.285-0.876l6.344-.545 2.478-5.864c0.172-0.408 0.749-0.408 0.921,0z\"\n}));\n\nfunction SvgStar(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 19.481 19.481\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    enableBackground: \"new 0 0 19.481 19.481\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgStar);\nexport default __webpack_public_path__ + \"static/media/star.6ddf6f51.svg\";\nexport { ForwardRef as ReactComponent };","import styled from 'styled-components';\nimport { ReactComponent as RubySvg } from './svg/ruby.svg';\nimport { ReactComponent as EmeraldSvg } from './svg/emerald.svg';\nimport { ReactComponent as DiamondSvg } from './svg/diamond.svg';\nimport { ReactComponent as OnyxSvg } from './svg/onyx.svg';\nimport { ReactComponent as SapphireSvg } from './svg/sapphire.svg';\nimport { ReactComponent as StarSvg } from './svg/star.svg';\nimport { GemStash, Gem } from '../Game';\n\n\nexport enum IconSize { xs = '12px', sm = '24px', md = '32px', lg = '48px', xl = '64px' };\n\ninterface IconProps {\n  size?: IconSize;\n}\n\n// With wrapper, target the svg\nconst Icon = styled.div.attrs((props: IconProps) => ({\n  size: props.size || IconSize.md\n}))`\n  svg {\n    width: ${props => props.size};\n    height: ${props => props.size};\n  }\n`;\n\nconst RubyIcon = styled(RubySvg)`\n  fill: var(--ruby);\n`;\n\nconst EmeraldIcon = styled(EmeraldSvg)`\nfill: var(--emerald);\n`;\n\nconst DiamondIcon = styled(DiamondSvg)`\n  fill: var(--diamond);\n  stroke-width: 10;\n  stroke: #666;\n`;\n\nconst SapphireIcon = styled(SapphireSvg)`\n  fill: var(--sapphire);\n`;\n\nconst OnyxIcon = styled(OnyxSvg)`\n  fill: var(--onyx);\n`\n\nconst StarIcon = styled(StarSvg)`\n  fill: var(--star);\n`;\n\nexport const Ruby = (props: IconProps) => (\n  <Icon {...props}>\n    <RubyIcon />\n  </Icon>\n);\n\nexport const Emerald = (props: IconProps) => (\n  <Icon {...props}>\n    <EmeraldIcon />\n  </Icon>\n);\n\nexport const Diamond = (props: IconProps) => (\n  <Icon {...props}>\n    <DiamondIcon />\n  </Icon>\n);\n\nexport const Onyx = (props: IconProps) => (\n  <Icon {...props}>\n    <OnyxIcon />\n  </Icon>\n);\n\nexport const Sapphire = (props: IconProps) => (\n  <Icon {...props}>\n    <SapphireIcon />\n  </Icon>\n);\n\nexport const Star = (props: IconProps) => (\n  <Icon {...props}>\n    <StarIcon />\n  </Icon>\n);\n\ninterface GemTypeProps {\n  gem: Gem\n}\n\ntype GemUIProps = GemTypeProps & IconProps;\n\nexport const GemUI = (props: GemUIProps) => {\n  const map = {\n    [Gem.Diamond]: Diamond,\n    [Gem.Emerald]: Emerald,\n    [Gem.Onyx]: Onyx,\n    [Gem.Ruby]: Ruby,\n    [Gem.Sapphire]: Sapphire,\n    [Gem.Star]: Star\n  }\n\n  const GemIconType = map[props.gem];\n\n  return <GemIconType {...props} />\n}\n\nexport enum GemCostSize { xs = '11px', sm = '15px', md = '18px', lg = '25px', xl = '32px' }\n\ninterface GemCostStyleProps {\n  size?: GemCostSize\n}\n\nconst GemCostStyle = styled.div.attrs((props: GemCostStyleProps) => ({\n  size: props.size || GemCostSize.md\n}))`\n  width: ${props => props.size};\n  height: ${props => props.size};\n  border-radius: 100%;\n  text-align: center;\n  font-family: Courgette;\n  position: relative;\n  border: 1px solid #000;\n  margin: 2px;\n`\n\nconst RubyCostStyle = styled(GemCostStyle)`\n  background: var(--ruby);\n`\n\nconst EmeraldCostStyle = styled(GemCostStyle)`\n  background: var(--emerald);\n`\n\nconst DiamondCostStyle = styled(GemCostStyle)`\n  background: var(--diamond);\n`\n\nconst SapphireCostStyle = styled(GemCostStyle)`\n  background: var(--sapphire);\n`\n\nconst OnyxCostStyle = styled(GemCostStyle)`\n  background: var(--onyx);\n`\n\ninterface CostProps {\n  cost: number;\n}\n\nconst PointValueStyle = styled.span`\n  font-size: 22px;\n  font-weight: bold;\n  line-height: 22px;\n  color: #fff;\n  -webkit-text-fill-color: white;\n  -webkit-text-stroke-width: 1px;\n  -webkit-text-stroke-color: #555;\n`\n\nconst OnyxPointValueStyle = styled(PointValueStyle)`\n-webkit-text-stroke-color: #bbb;\n`\n\nconst CostGemIcon = styled.div`\n  position: absolute;\n  left: 20px;\n  top: 2px;\n  svg {\n    width: 16px;\n    height: 16px;\n  }\n`\n\nconst CostDiamondIcon = styled(CostGemIcon)`\n  svg {\n    stroke-width: 5;\n    stroke: #222;\n  }\n`\n\nexport const RubyCostUI = (props: CostProps) => (\n  <RubyCostStyle>\n    <PointValueStyle>\n      {props.cost}\n    </PointValueStyle>\n    <CostGemIcon>\n      <RubyIcon />\n    </CostGemIcon>\n  </RubyCostStyle>\n)\n\nexport const EmeraldCostUI = (props: CostProps) => (\n  <EmeraldCostStyle>\n    <PointValueStyle>\n      {props.cost}\n    </PointValueStyle>\n    <CostGemIcon>\n      <EmeraldIcon />\n    </CostGemIcon>\n  </EmeraldCostStyle>\n)\n\nexport const SapphireCostUI = (props: CostProps) => (\n  <SapphireCostStyle>\n    <PointValueStyle>\n      {props.cost}\n    </PointValueStyle>\n    <CostGemIcon>\n      <SapphireIcon />\n    </CostGemIcon>\n  </SapphireCostStyle>\n)\n\n\nexport const OnyxCostUI = (props: CostProps) => (\n  <OnyxCostStyle>\n    <OnyxPointValueStyle>\n      {props.cost}\n    </OnyxPointValueStyle>\n    <CostGemIcon>\n      <OnyxIcon />\n    </CostGemIcon>\n  </OnyxCostStyle>\n)\n\nexport const DiamondCostUI = (props: CostProps) => (\n  <DiamondCostStyle>\n    <PointValueStyle>\n      {props.cost}\n    </PointValueStyle>\n    <CostDiamondIcon>\n      <DiamondIcon />\n    </CostDiamondIcon>\n  </DiamondCostStyle>\n)\n\nconst GemGroupedCostStyle = styled.div`\n  display: flex;\n  flex-direction: column;\n  position: absolute;\n  bottom: 0;\n`\n\nexport interface GemCostsUIProps {\n  gems: GemStash\n}\n\nexport const GemCostsUI = (props: GemCostsUIProps) => (\n  <GemGroupedCostStyle>\n    {props.gems.diamond > 0 ? <DiamondCostUI cost={props.gems.diamond} /> : null}\n    {props.gems.ruby > 0 ? <RubyCostUI cost={props.gems.ruby} /> : null}\n    {props.gems.emerald > 0 ? <EmeraldCostUI cost={props.gems.emerald} /> : null}\n    {props.gems.onyx > 0 ? <OnyxCostUI cost={props.gems.onyx} /> : null}\n    {props.gems.sapphire > 0 ? <SapphireCostUI cost={props.gems.sapphire} /> : null}\n  </GemGroupedCostStyle>\n)","import React from 'react';\nimport styled from 'styled-components';\nimport { Tier, Card } from '../Game';\nimport { GemCostsUI, GemUI } from './Gems';\n\nexport enum CardSize {\n  xs = 'xs',\n  sm = 'sm',\n  md = 'md',\n  lg = 'lg',\n  xl = 'xl'\n}\n\nconst CardSizes: { [key:string]: string[] } = {\n  xs: ['50px', '72x'],\n  sm: ['68px', '97px'],\n  md: ['90px', '129px'],\n  lg: ['120px', '172px'],\n  xl: ['160px', '230px']\n}\n\ninterface CardStyleProps {\n  size?: CardSize\n}\n\nconst CardStyle = styled.div.attrs((props: CardStyleProps) => ({\n  size: props.size || CardSize.md\n}))`\n  width: ${props => CardSizes[props.size][0]};\n  height ${props => CardSizes[props.size][1]};\n  border: 1px solid #000;\n  border-radius: 5px;\n  background: #fff;\n  margin: 5px;\n  position: relative;\n  user-select: none;\n`\n\n\nexport const VictoryPointsStyle = styled.div`\n  font-size: 30px;\n  font-weight: bold;\n  color: #000;\n  margin-left: 3px;\n`\n\ninterface CardUIProps {\n  card: Card\n  size?: CardSize\n  flipped?: boolean\n}\n\nconst GemAwardStyle = styled.div`\n  position: absolute;\n  right: 2px;\n  top: 2px;\n  svg {\n    width: 25px;\n    height: 25px;\n  }\n`\n\nexport const CardUI = (props: CardUIProps) => {\n  if (props.flipped) {\n    return <FlippedCardUI {...props} />\n  }\n\n  return (\n    <CardStyle size={props.size ? props.size : CardSize.md}>\n      {props.card.points ? <VictoryPointsStyle>{props.card.points}</VictoryPointsStyle> : null}\n      {props.card.costs \n        ? (\n          <GemCostsUI gems={props.card.costs} />\n        )\n        : null\n      }\n      {\n        props.card.gem\n        ? (\n          <GemAwardStyle>\n            <GemUI gem={props.card.gem} />\n          </GemAwardStyle>\n        )\n        : null\n      }\n    </CardStyle>\n  );\n} \n\ninterface DrawPileProps {\n  tier: Tier | undefined,\n  numberOfCards: number,\n  size?: CardSize\n}\n\nconst FlippedCardStyle = styled.div`\n  display: flex;\n  height: 100%;\n  width: 100%;\n  align-items: stretch;\n`\n\nconst FlippedCardInnerStyle = styled.div`\n  font-size: 36px;\n  background: #715027;\n  margin: 10px;\n  width: 100%;\n  border-radius: 2px;\n  justify-content: center;\n  align-items: center;\n  color: #fff;\n  display: flex;\n`\n\nexport const FlippedCardUI = (props: { children?: React.ReactNode, size?: CardSize }) => (\n  <CardStyle size={props.size}>\n    <FlippedCardStyle>\n      <FlippedCardInnerStyle>\n        {props.children}\n      </FlippedCardInnerStyle>\n    </FlippedCardStyle>\n  </CardStyle>\n)\n\nexport const DrawPileUI = (props: DrawPileProps) => (\n  <FlippedCardUI>\n    {props.tier ?\n      (\n        <>\n          {props.tier === Tier.I\n            ? (<></>)\n            : (props.tier === Tier.II)\n              ? (<></>)\n              : (props.tier === Tier.III) \n                ? (<></>)\n              : null}\n\n        </>\n      ) \n      : null\n    }    \n  </FlippedCardUI>\n);","import React from 'react';\nimport styled from 'styled-components';\nimport { Noble } from '../Game';\nimport { VictoryPointsStyle } from './Cards';\nimport { GemCostsUI } from './Gems';\n\nexport enum NobleSize { xs = '50px', sm = '68px', md = '90px', lg = '120px', xl = '160px' }\n\ninterface NobleSizeProps {\n  size?: NobleSize;\n}\n\n// With wrapper, target the svg\nconst NobleStyle = styled.div.attrs((props: NobleSizeProps) => ({\n  size: props.size || NobleSize.md\n}))`\n  width: ${props => props.size};\n  height: ${props => props.size}};\n  border: 1px solid #000;\n  border-radius: 4px;\n  margin: 5px;\n  background: #fff;\n  position: relative;\n`;\n\nexport interface NobleUIProps {\n  size?: NobleSize,\n  noble: Noble\n}\n\nexport const NobleUI = (props: NobleUIProps) => (\n  <NobleStyle>\n    <VictoryPointsStyle>{props.noble.points}</VictoryPointsStyle>\n    {props.noble.costs \n      ? (\n        <GemCostsUI gems={props.noble.costs} />\n      )\n      : null\n    }\n  </NobleStyle>\n);","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m512.001 84.853-84.853-84.853-171.147 171.147-171.148-171.147-84.853 84.853 171.148 171.147-171.148 171.148 84.853 84.853 171.148-171.147 171.147 171.147 84.853-84.853-171.148-171.148z\"\n}));\n\nfunction SvgCancel(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"Capa_1\",\n    enableBackground: \"new 0 0 512.001 512.001\",\n    height: 512,\n    viewBox: \"0 0 512.001 512.001\",\n    width: 512,\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgCancel);\nexport default __webpack_public_path__ + \"static/media/cancel.0fb77ae6.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M208.789,29.972l31.819,31.82L91.763,210.637L0,118.876l31.819-31.82l59.944,59.942L208.789,29.972z\"\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref6 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref7 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref8 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref9 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref10 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref11 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref12 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref13 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref14 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref15 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref16 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref17 = /*#__PURE__*/React.createElement(\"g\", null);\n\nfunction SvgConfirm(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"Capa_1\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 240.608 240.608\",\n    style: {\n      enableBackground: \"new 0 0 240.608 240.608\"\n    },\n    xmlSpace: \"preserve\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9, _ref10, _ref11, _ref12, _ref13, _ref14, _ref15, _ref16, _ref17);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgConfirm);\nexport default __webpack_public_path__ + \"static/media/confirm.b2cc96b7.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport styled from 'styled-components';\nimport { DrawPileUI, CardUI, CardSize } from './Cards';\nimport Game, { Tier, CardPile, Card, GameState, Gem, GemStash, Player, emptyGemStash } from '../Game';\nimport { NobleUI } from './Nobles';\nimport { GemUI, IconSize } from './Gems';\nimport { Action } from '../Actions';\nimport { ReactComponent as CancelSvg } from './svg/cancel.svg';\nimport { ReactComponent as ConfirmSvg } from './svg/confirm.svg';\n\nconst game = Game.getInstance();\n\nconst CardRowStyle = styled.div`\n  display: flex;\n  flex-direction: row;\n`\n\nconst NobleRowStyle = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n`\n\nconst InteractiveCardStyle = styled.div`\n  position: relative;\n  cursor: pointer;\n  border-radius: 4px;\n  border: 1px solid transparent;\n\n  &:hover {\n    border-color: #999;\n    background: #999;\n\n    & > div {\n      display: block;\n    }\n  }\n`\n\nconst CardButtonGutter = styled.div`\n  position: absolute;\n  display: none;\n  background: #999;\n  z-index: 101;\n  border-radius: 4px;\n  border: 1px solid #999;\n  margin-top: -4px;\n  padding: 4px;\n  margin-left: -1px;\n  margin-right: -1px;\n\n  & button {\n    width: 100%;\n    padding: 5px;\n\n    &:first-child {\n      margin-bottom: 4px;\n    }\n  }\n`\n\ninterface InteractiveCardUIProps {\n  card: Card\n  player: Player\n  index: number\n  cards: Card[]\n  disableReserve?: boolean\n  flipped?: boolean\n  size?: CardSize\n}\n\nconst purchaseCard = (player: Player, cards: Card[], ix: number) => {\n  game.sendAction(player, Action.PurchaseCard, { cards, index: ix });\n}\n\nconst reserveCard = (player: Player, cards: Card[], ix: number) => {\n  game.sendAction(player, Action.ReserveCard, { cards, index: ix });\n}\n\nexport const InteractiveCardUI = (props: InteractiveCardUIProps) => (\n  <InteractiveCardStyle>\n    <CardUI {...props} /> \n      <CardButtonGutter>\n        <button onClick={() => purchaseCard(props.player, props.cards, props.index)}>Buy</button>\n        {!props.card.reserved ? <button onClick={() => reserveCard(props.player, props.cards, props.index)}>Reserve</button> : null}\n      </CardButtonGutter>\n  </InteractiveCardStyle>\n);\n\ninterface CardRowUIProps {\n  tier: Tier\n  drawPile: CardPile\n  visibleCards: Card[]\n  player: Player\n}\n\nexport const CardRowUI = (props: CardRowUIProps ) => (\n  <CardRowStyle>\n    <DrawPileUI tier={props.drawPile.tier} numberOfCards={props.drawPile.cards.length}></DrawPileUI>\n    {props.visibleCards.map((card, i) => \n      <InteractiveCardUI card={card} index={i} key={i} player={props.player} cards={props.visibleCards} />  \n    )}\n  </CardRowStyle>\n)\nconst BoardStyle = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-self: center;\n`\nconst GemBankStyle = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-end;\n`\n\nconst GemBankHolderStyle = styled.div`\n  background: #708090;\n  border-radius: 5px;\n  border-bottom: 6px solid #434d57;\n  padding: 6px;\n`\n\nconst TilesStyle = styled.div`\n  display: flex;\n  flex-direction: column;\n  background: rgba(55,55,55,0.5);\n  border-radius: 4px;\n`\n\nconst SchmeckleStyle = styled.div`\n  width: 46px;\n  height: 46px;\n  margin: 2px 0;\n  position: relative;\n\n  svg {\n    background: #fff;\n    position: absolute;\n    z-index: 100;\n    border: 2px solid #666;\n    border-radius: 100%;\n    padding: 5px;\n  }\n`\n\nconst RubySchmeckleStyle = styled(SchmeckleStyle)`\n  svg {\n    border-color: var(--ruby);\n  }\n`\n\nconst EmeraldSchmeckleStyle = styled(SchmeckleStyle)`\n  svg {\n    border-color: var(--emerald);\n  }\n`\nconst DiamondSchmeckleStyle = styled(SchmeckleStyle)`\n  svg {\n    border-color: #999;\n    background: #fff;\n    stroke-width: 10;\n    stroke: #666;\n  }\n`\n\nconst OnyxSchmeckleStyle = styled(SchmeckleStyle)`\n  svg { border-color: var(--onyx); }\n`\n\nconst SapphireSchmeckleStyle = styled(SchmeckleStyle)`\n  svg { border-color: var(--sapphire); }\n`\n\nconst StarSchmeckleStyle = styled(SchmeckleStyle)`\n  svg { border-color: var(--star); }\n  cursor: default;\n\n  &:hover {\n    border: 0;\n    svg {\n      stroke-width: 0;\n      stroke: #000;\n    }\n  }\n`\n\nconst SchmeckleGemStash = styled.div`\n  display: flex;\n  flex-direction: row;\n  max-width: 80px;\n  background: #666;\n  border-radius: 46px;\n  padding-left: 2px;\n  box-shadow: -1px -1px 1px #4d4d4d;\n\n  &:not(:last-child) {\n    margin-bottom: 6px;\n  }\n  padding-right: 36px;\n\n  &:hover {\n    cursor: pointer;\n    svg {\n      border-color: #ffd900;\n      fill: #ffd900;\n      stroke: #ffd900;\n    }\n  }\n`\n\nexport const SchmeckleGemCoinUI = (props: { gem: Gem, size?: IconSize }) => {\n  const map = {\n    [Gem.Diamond]: DiamondSchmeckleStyle,\n    [Gem.Emerald]: EmeraldSchmeckleStyle,\n    [Gem.Onyx]: OnyxSchmeckleStyle,\n    [Gem.Sapphire]: SapphireSchmeckleStyle,\n    [Gem.Ruby]: RubySchmeckleStyle,\n    [Gem.Star]: StarSchmeckleStyle\n  }\n\n  const SchmeckleCoinWrapUI = map[props.gem]\n\n  return(\n    <SchmeckleCoinWrapUI>\n      <GemUI gem={props.gem} size={props.size ? props.size : IconSize.md} />\n    </SchmeckleCoinWrapUI>\n  )\n}\n\ninterface SchmeckleStackUIProps {\n  gem: Gem\n  amount: number\n  holdGem: (gem:Gem) => void\n}\n\nconst SchmeckleStackUI = (props: SchmeckleStackUIProps) => (\n  <SchmeckleGemStash onClick={() => props.holdGem(props.gem)} >\n    {[...Array(props.amount)].map((a, i) => \n        <SchmeckleGemCoinUI gem={props.gem} key={i} />\n    )}\n  </SchmeckleGemStash>\n)\n\ninterface GemBankProps {\n  gems: GemStash\n  setHeldGems: (gems:Gem[]) => void\n  heldGems: Gem[]\n}\n\nconst GemBankUI = (props: GemBankProps) => {\n\n  const subtracted = {\n    diamond: props.heldGems.filter((g) => g === Gem.Diamond).length,\n    ruby: props.heldGems.filter((g) => g === Gem.Ruby).length,\n    emerald: props.heldGems.filter((g) => g === Gem.Emerald).length,\n    onyx: props.heldGems.filter((g) => g === Gem.Onyx).length,\n    sapphire: props.heldGems.filter((g) => g === Gem.Sapphire).length,\n    star: props.heldGems.filter((g) => g === Gem.Star).length,\n  }\n\n  const holdGem = (gem: Gem) => {\n    if (props.heldGems.length < 3) {\n      const gems = props.heldGems;\n      \n      gems.push(gem);\n\n      props.setHeldGems(gems);\n    }\n  }\n\n  return (\n    <GemBankStyle>\n      <GemBankHolderStyle>\n        {props.gems.diamond > 0 ? <SchmeckleStackUI gem={Gem.Diamond} amount={props.gems.diamond-subtracted.diamond} holdGem={holdGem} /> : null}\n        {props.gems.ruby > 0 ? <SchmeckleStackUI gem={Gem.Ruby} amount={props.gems.ruby-subtracted.ruby} holdGem={holdGem} />  : null}\n        {props.gems.emerald > 0 ? <SchmeckleStackUI gem={Gem.Emerald} amount={props.gems.emerald-subtracted.emerald} holdGem={holdGem} />  : null}\n        {props.gems.onyx > 0 ? <SchmeckleStackUI gem={Gem.Onyx} amount={props.gems.onyx-subtracted.onyx} holdGem={holdGem} />  : null}\n        {props.gems.sapphire > 0 ? <SchmeckleStackUI gem={Gem.Sapphire} amount={props.gems.sapphire-subtracted.sapphire} holdGem={holdGem} />  : null}\n        {props.gems.star > 0 ? <SchmeckleStackUI gem={Gem.Star} amount={props.gems.star-subtracted.star} holdGem={holdGem} />  : null}\n      </GemBankHolderStyle>\n    </GemBankStyle>\n  )\n}\nconst HudGutterAreaStyle = styled.div`\n  display: flex;\n  justify-content: center;\n  height: 130px;\n`\n\nconst HoldUIStyle = styled.div`\n  align-self: center;\n`\nconst HoldGemSlotsStyle = styled.div`\n  display: flex;\n  border-radius: 40px;\n  background: #708090;\n  border-bottom: 6px solid #434d57;\n  padding: 5px;\n`\n\nconst GemSlotStyle = styled.div`\n  border-radius: 100%;\n  background: #666;\n  box-shadow: -1px -1px 1px #4d4d4d;\n  width: 41px;\n  height: 41px;\n  padding: 5px;\n  margin-right: 5px;\n\n  svg {\n    top: -5px;\n    left: -3px;\n    cursor: pointer;\n  }\n`\n\nconst ConfirmButtonStyle = styled.div`\n  width: 40px;\n  height: 40px;\n  padding: 5px;\n  cursor: pointer;\n\n  svg {\n    width: 40px;\n    height: 40px;\n    fill: var(--confirm);\n  }\n\n  &:hover {\n    svg { fill: var(--confirm-hover) }\n  }\n  `\n\nconst CancelButtonStyle = styled.div`\n  width: 40px;\n  height: 40px;\n  padding: 5px;\n  cursor: pointer;\n\n  svg {\n    margin-top: 4px;\n    width: 32px;\n    height: 32px;\n    fill: var(--cancel);\n  }\n\n  &:hover {\n    svg { fill: var(--cancel-hover) }\n  }\n`\n\ninterface HoldGemUIProps {\n  gems: Gem[]\n  player: Player\n  setHeldGems: (gems:Gem[]) => void\n}\n\nconst HoldGemUI = (props: HoldGemUIProps) => {\n  const removeGem = (ix: number) => {\n    const gems = props.gems.slice();\n\n    gems.splice(ix, 1);\n\n    props.setHeldGems(gems);\n  }\n\n  const confirmTakeGems = () => {\n    const gems = emptyGemStash();\n\n    props.gems.forEach(g => {\n      gems[g as Gem]++;\n    })\n\n    game.sendAction(props.player, Action.TakeGems, { gems });\n\n    props.setHeldGems([]);\n  }\n\n  return (\n    <HoldUIStyle>\n      <HoldGemSlotsStyle>\n        {props.gems.map((g,i) => \n          <GemSlotStyle key={i} onClick={() => removeGem(i)}>\n            <SchmeckleGemCoinUI gem={g} />\n          </GemSlotStyle>)\n        }\n        {[...Array(3-props.gems.length)].map((s,i) => <GemSlotStyle key={i} />)}\n        <ConfirmButtonStyle><ConfirmSvg onClick={() => confirmTakeGems()} /></ConfirmButtonStyle>\n        <CancelButtonStyle onClick={() => props.setHeldGems([])}><CancelSvg /></CancelButtonStyle>\n      </HoldGemSlotsStyle>       \n    </HoldUIStyle>\n  )\n}\n\ninterface BoardUIProps {\n  gameState: GameState\n  contextPlayer: Player\n}\n\ninterface BoardUIState {\n  heldGems: Gem[]\n}\n\nconst defaultState = {\n  heldGems: []\n}\n\nexport class BoardUI extends React.Component<BoardUIProps, BoardUIState> {\n\n  constructor(props: BoardUIProps) {\n    super(props)\n\n    this.state = defaultState;\n  }\n\n  setHeldGems(gems: Gem[]) {\n    this.setState({ heldGems: gems })\n  }\n\n  render() {\n    return (\n      <>\n        <BoardStyle>\n          <GemBankUI gems={this.props.gameState.gems} setHeldGems={(gems: Gem[]) => this.setHeldGems(gems)} heldGems={this.state.heldGems} />\n          <TilesStyle>\n            <NobleRowStyle>\n              {this.props.gameState.nobles.map((noble, i) => \n                <NobleUI noble={noble} key={i} />\n              )}\n            </NobleRowStyle>\n            <CardRowUI player={this.props.contextPlayer!} tier={Tier.III} drawPile={this.props.gameState.tierIIIDrawPile} visibleCards={this.props.gameState.tierIIICards.cards}></CardRowUI>\n            <CardRowUI player={this.props.contextPlayer!} tier={Tier.II} drawPile={this.props.gameState.tierIIDrawPile} visibleCards={this.props.gameState.tierIICards.cards}></CardRowUI>\n            <CardRowUI player={this.props.contextPlayer!} tier={Tier.I} drawPile={this.props.gameState.tierIDrawPile} visibleCards={this.props.gameState.tierICards.cards}></CardRowUI>\n          </TilesStyle>\n        </BoardStyle>\n        <HudGutterAreaStyle>\n          {this.state.heldGems.length > 0 ? <HoldGemUI player={this.props.contextPlayer!} gems={this.state.heldGems} setHeldGems={(gems: Gem[]) => this.setHeldGems(gems)} /> : null}\n        </HudGutterAreaStyle>\n        \n      </>\n    )\n  }\n}","import React, { useState } from 'react';\nimport styled from 'styled-components';\nimport { Player, Gem, GemStash, CardPile } from '../Game';\nimport { SchmeckleGemCoinUI, InteractiveCardUI } from './Board';\nimport { CardUI, CardSize } from './Cards';\nimport { GemUI, IconSize } from './Gems';\n\ninterface GemColumnUIProps {\n  cards: CardPile\n  gems: GemStash\n}\n\ninterface HudUIProps {\n  player: Player\n}\n\nconst HudStyle = styled.div`\n  z-index: 101;\n  display: flex;\n  justify-content: center;\n  min-height: 230px;\n  align-self: center;\n`;\n\nconst DashChromeStyle = styled.div`\n  border-radius: 4px;\n  background: rgb(25,25,25,0.7);\n  border: 4px solid #FFDC73;\n  box-shadow: -1px -1px 1px #BF9B30;\n  display: flex;\n`;\n\ninterface HudUIProps {\n  player: Player\n}\n\nconst GemColumnStyle = styled.div`\n  width: 110px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n`\n\nconst GemSchmeckleStashStyle = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  width: 80px;\n  margin-left: -10px;\n  \n  & > div:nth-child(2n) {\n    margin-top: 8px;\n  }\n`\n\nconst CardStackStyle = styled.div`\n  position: absolute;\n  margin-left: -80px;\n  margin-top: 45px;\n`\n\nconst StackedCardStyle = styled.div`\n  height: 35px;\n  & > div {\n    position: absolute;\n    z-index: 99;\n\n    &:hover {\n      opacity: 1.0;\n      z-index: 101;\n    }\n  }\n`\n\nconst GemHudIndicatorStyle = styled.div`\n  position: absolute;\n  margin-top: -34px;\n  display: flex;\n  flex-direction: row;\n  color: #fff;\n  font-size: 28px;\n  -webkit-text-stroke: 1px #000;\n  font-weight: bold;\n\n  svg {\n    margin-right: 10px;\n  }\n`\n\nconst ArcedText = (props: { text: string, arc: number, radius: number}) => {\n  const characters = props.text.split('');\n  const degree = props.arc / characters.length;\n\n  return (\n    <>\n      {characters.map((char, i) => (\n        <span\n          key={`arc-${i}`}\n          style={{\n            position: 'absolute',\n            height: `${props.radius}px`,\n            transform: `rotate(${degree * i - props.arc / 2}deg)`,\n            transformOrigin: `0 ${props.radius}px 0`\n          }}>\n            {char}\n          </span>\n      ))}\n    </>\n  )\n}\n\nconst VictoryPointsHudStyle = styled.div`\n  width: 200px;\n`\n\nexport const HudUI = (props: HudUIProps) => {\n  const [isReservedCardFacing, setIsReservedCardFacing] = useState(false);\n\n  const gems = Object.keys(Gem).filter(g => props.player.gems[Gem[g as keyof typeof Gem]] > 0 || props.player.cards.cards.filter(c => c.gem === Gem[g as keyof typeof Gem]).length > 0);\n\n  return (\n    <HudStyle>\n      <DashChromeStyle>\n      {Object.keys(Gem).map((g,i) =>\n        <GemColumnStyle key={i}>\n          <GemHudIndicatorStyle>\n            <GemUI gem={Gem[g as keyof typeof Gem]} size={IconSize.sm} />\n            {props.player.gems[Gem[g as keyof typeof Gem]] + props.player.cards.cards.filter(c => c.gem === Gem[g as keyof typeof Gem]).length}\n          </GemHudIndicatorStyle>\n          <GemSchmeckleStashStyle>\n            {[...Array(props.player.gems[Gem[g as keyof typeof Gem]])].map((_,ix) => <SchmeckleGemCoinUI gem={Gem[g as keyof typeof Gem]} size={IconSize.sm} key={`${props.player.id}_${g}_${ix}`} />)}\n          </GemSchmeckleStashStyle>\n          <CardStackStyle>\n            {props.player.cards.cards.sort((c1, c2) => c1.points > c2.points ? -1 : 1).filter(c => c.gem === Gem[g as keyof typeof Gem]).map(c => \n              <StackedCardStyle>\n                <CardUI card={c} size={CardSize.sm} />\n              </StackedCardStyle>\n            )}\n            {\n              Gem[g as keyof typeof Gem] === Gem.Star\n              ? (\n                <>\n                  {props.player.reservedCards.map((c, i) => \n                    <StackedCardStyle onMouseEnter={() => setIsReservedCardFacing(true)} onMouseLeave={() => setIsReservedCardFacing(false)}>\n                      <InteractiveCardUI player={props.player} index={i} card={c} size={CardSize.sm} flipped={!isReservedCardFacing} cards={props.player.reservedCards} />\n                    </StackedCardStyle>\n                  )}\n                </>\n              )\n              : null\n            }\n          </CardStackStyle>\n        </GemColumnStyle>  \n      )}    \n      </DashChromeStyle>\n    </HudStyle>\n  )\n}","import React from 'react';\nimport { BoardUI } from './Board';\nimport Game, { GameState, Player } from '../Game';\nimport { HudUI } from './Player';\nimport { Action } from '../Actions';\nimport styled from 'styled-components';\nimport { BackgroundType } from './Splash';\n\ninterface GameUIState {\n}\n\nconst defaultState = {\n  gameState: null\n}\n\nconst PlayerListStyle = styled.ul`\n  list-style-type: none;\n  margin: 0;\n  padding: 0;\n`\n\nconst PlayerListItemStyle = styled.li.attrs((props: { isContextPlayer: boolean }) => ({\n  isContextPlayer: props.isContextPlayer || false\n}))`\n  font-size: 20px;\n  font-weight: bold;\n  color: ${props => props.isContextPlayer ? '#fff' : '#000'};\n`\n\n\nconst GameStyle = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-around;\n`\n\nconst ColumnStyle = styled.div`\n  display: flex;\n  flex-direction: column;\n  width: 670px;\n`\n\nconst SideColumnStyle = styled.div`\n  display: flex;\n  flex-direction: column;\n  width: 200px;\n  align-self: flex-start;\n`\n\ninterface GameUIProps {\n  gameState: GameState | null\n  contextPlayer: Player\n}\n\nexport default class GameUI extends React.Component<GameUIProps, GameUIState> {\n  constructor(props: any) {\n    super(props);\n\n    this.state = defaultState;\n  }\n\n  render() {\n    return (\n      <GameStyle>\n        {this.props.gameState ?\n          (\n            <>\n              <SideColumnStyle />\n              <ColumnStyle>\n                <BoardUI gameState={this.props.gameState} contextPlayer={this.props.contextPlayer} />\n                {this.props.contextPlayer \n                  ? <HudUI player={this.props.contextPlayer} />\n                  : null\n                }\n              </ColumnStyle>\n              <SideColumnStyle>\n                <PlayerListStyle>\n                  {this.props.gameState.players.map((p,i) =>\n                    <PlayerListItemStyle \n                      key={p.id}\n                      isContextPlayer={p.id === this.props.contextPlayer!.id}\n                    >{this.props.gameState!.turn === (i+1) ? ' ' : null}{p.name}</PlayerListItemStyle>  \n                  )}\n                </PlayerListStyle>\n              </SideColumnStyle>\n            </>\n          )\n          : null\n        }\n      </GameStyle>\n    )\n  }\n}","import React from \"react\"\nimport styled from \"styled-components\"\nimport { GameTitle, BackgroundType, getRandomBackground } from './Splash';\nimport { Network, Host, Client, HostBroadcastType, ClientMessageType, ClientNetworkMessage } from '../Network';\nimport { Player, GameState } from '../Game';\nimport Game from '../Game';\nimport { Action, BaseAction } from '../Actions';\nimport GameUI from './Game';\n\n\nconst LobbyPageStyle = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n`\n\nconst ContentColumnStyle = styled.div`\n  flex-direction: column;\n  display: flex;\n  justify-content: center;\n  text-shadow: 1px 1px 1px #000;\n  text-align: center;\n  color: #fff;\n`\n\nconst PlayerBoxes = styled.div`\n  width: 450px;\n  display: flex;\n  flex-wrap: wrap;\n`\n\nconst PlayerBoxStyle = styled.div`\n  width: 200px;\n  border: 2px solid #ccc;\n  height: 200px;\n  margin: 10px;\n  background: rgba(55,55,55,0.5);\n  text-align: center;\n  color: #fff;\n  text-shadow: 1px 1px 1px #000;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n`\n\nconst LobbyCode = styled.div`\n  font-size: 24px;\n  padding: 20px;\n`\n\nconst CodeUnderline = styled.input`\n  background: rgba(55,55,55,0.6);\n  font-size: 24px;\n  text-align: center;\n  color: #fff;\n  border: 0;\n  display: inline;\n  width: 80px;\n  text-shadow: 1px 1px 1px #000;\n  text-decoration: underline;\n  padding: 4px 8px;\n  border-radius: 4px;\n  cursor: pointer;\n`\n\nconst ExitLink = styled.a`\n  font-size: 14px;\n  cursor: pointer;\n  border: 1px solid #ff0000;\n  border-radius: 3px;\n  color: #eee;\n  background: rgba(214, 38, 15, 0.5);\n  margin-left: 10px;\n  padding: 4px;\n`\n\nconst StartGameButtonStyle = styled.button`\n  border-radius: 0;\n  font-size: 28px;\n  padding: 10px;\n  background: #91a4e6;\n  border: 2px solid #3451b3;\n  margin: 10px;\n  width: auto;\n`\n\nconst PlayerNameConnectingStyle = styled.span`\n  color: #aaa;\n`\n\nconst PlayerTypeDropdownStyle = styled.select`\n  display: inline;\n  width: auto;\n`\n\ninterface LobbyHostProps {\n  playerName: string\n  setIsHostingLobby: (t: boolean) => void\n  setErrorMessage: (err: string) => void\n  setBgSrc: (bgSrc: string) => void\n}\n\ninterface LobbyHostState {\n  players: Player[]\n  code: string\n  contextPlayer: Player | null\n  gameState: GameState | null\n}\n\nconst defaultLobbyHostState = {\n  players: [],\n  code: '',\n  gameState: null,\n  contextPlayer: null\n}\n\n\nconst game = Game.getInstance();\n\nexport class LobbyHost extends React.Component<LobbyHostProps, LobbyHostState> {\n  player: Player\n  host: Host\n\n  constructor(props: LobbyHostProps) {\n    super(props);\n    this.player = new Player(props.playerName);\n    this.state = defaultLobbyHostState;\n    \n    this.host = new Host(this.player, (err) => this.networkErrorHandler(err));\n  }\n\n  componentDidMount() {\n    this.setState({\n      players: [this.player],\n      contextPlayer: this.player\n    });\n\n    const bgSrc = getRandomBackground(BackgroundType.Board);\n    this.props.setBgSrc(bgSrc);\n    \n    game.gameState.background = bgSrc;\n\n    this.setWindowCloseDialog();\n\n    window.onunload = () => this.host.disconnect();\n\n    this.host.host(\n      c => this.setState({ code: c }), \n      p => this.setState({ players: p }),\n      (msg: ClientNetworkMessage) => {\n        switch (msg.type) {\n          case ClientMessageType.DISCONNECTING:\n            break;\n          case ClientMessageType.ACTION:\n            game.sendAction(\n              msg.payload.player,\n              Action[msg.payload.action as Action],\n              msg.payload.meta\n            )\n            break;\n        }\n      }\n    );\n    \n    game.onStateUpdate((gameState: GameState) => {\n      this.setState({ gameState: gameState });\n    })\n    game.onAction((a: BaseAction) => {\n      this.broadcastAction(a.player, a.type!, a.meta, [a.player]);\n    })\n  }\n\n  componentWillUnmount() {\n    this.cleanupLobby();\n    game.cleanup();\n  }\n\n  disbandLobby() {\n    if (window.confirm('Are you sure you want to disband this lobby? Players will not be able to join with this lobby code.') && this.props.setIsHostingLobby) {\n      this.props.setIsHostingLobby(false);\n      window.history.pushState({}, 'Schmeckles', '/');\n      document.title = 'Schmeckles';\n    }\n  }\n\n  cleanupLobby() {\n    window.onbeforeunload = null;\n    this.host.disconnect();\n  }\n\n  setWindowCloseDialog() {\n    window.onbeforeunload = (e: any) => {\n      const message = 'Are you sure you want to disband this lobby?';\n      e = e || window.event;\n\n      if (e) {\n        e.returnValue = message;\n      }\n\n      return message;\n    }\n  }\n\n  addBot() {\n    \n  }\n\n  sendGameState() {\n    this.host.broadcast({ type: HostBroadcastType.GAMESTATE, payload: game.serialize() });\n  }\n\n  broadcastAction(p: Player, a: Action, meta: any, exclude?: Player[]) {\n    this.host.broadcast({ type: HostBroadcastType.ACTION, payload: { player: p, action: a, meta } }, exclude)\n  }\n\n  startGame() {\n    this.host.players.forEach(p => {\n      game.sendAction(this.player, Action.JoinGame, { joiningPlayer: p });\n    });\n    game.sendAction(this.player, Action.StartGame, {});\n\n    this.sendGameState();\n  }\n\n  networkErrorHandler(error: any) {\n    console.error(error);\n  }\n\n  render() {\n    if (this.state.gameState && this.state.gameState.started) {\n      return <GameUI gameState={this.state.gameState} contextPlayer={this.state.contextPlayer!} />\n    }\n    return (\n      <Lobby \n        code={this.state.code} \n        players={this.state.players}\n        disbandLobby={() => this.disbandLobby()} \n        startGame={() => this.startGame()} \n      />\n    )\n  }\n}\n\ninterface LobbyClientProps {\n  playerName: string\n  joinLobbyCode: string\n  setJoinLobbyCode: (c: string) => void\n  setErrorMessage: (err: string) => void\n  setBgSrc: (bgSrc: string) => void\n}\n\ninterface LobbyClientState {\n  code: string\n  players: Player[]\n  contextPlayer: Player | null\n  gameState: GameState | null\n}\n\nconst defaultLobbyClientState = {\n  players: [],\n  code: '',\n  contextPlayer: null,\n  gameState: null\n}\n\nexport class LobbyClient extends React.Component<LobbyClientProps,LobbyClientState> {\n  player: Player\n  client: Client\n\n  constructor(props: LobbyClientProps) {\n    super(props);\n    this.state = defaultLobbyClientState;\n    this.player = new Player(props.playerName);\n    this.client = new Client(this.player, (err) => this.networkErrorHandler(err));\n  }\n\n  componentDidMount() {\n    this.setState({ \n      code: this.props.joinLobbyCode.toUpperCase(),\n      contextPlayer: this.player\n    });\n\n    game.onStateUpdate((gameState: GameState) => {\n      this.setState({ gameState: gameState })\n    });\n\n    game.onAction((a: BaseAction) => {\n      this.client.send({ type: ClientMessageType.ACTION, payload: { player: a.player, action: a.type, meta: a.meta }});\n    })\n\n    window.onunload = () => this.client.disconnect();\n\n    this.client.join(this.props.joinLobbyCode, (msg) => {\n      switch (msg.type) {\n        case HostBroadcastType.DISBANDED:\n          this.exitWithErrorMessage('Lobby was disbanded by host');\n          break;\n        case HostBroadcastType.DISCONNECTED:\n          this.exitWithErrorMessage('Disconnected');\n          break;\n        case HostBroadcastType.LOBBY_PLAYERS:\n          this.setState({ players: msg.payload });\n          break;\n        case HostBroadcastType.ACTION:\n          game.receiveAction(BaseAction.create(\n            msg.payload.player,\n            Action[msg.payload.action as Action],\n            msg.payload.meta\n          ));\n          break;\n        case HostBroadcastType.GAMESTATE:\n          console.log('Updating game state: ', msg.payload);\n          game.updateGameState(Game.unserialize(msg.payload));\n          if (game.gameState.background) {\n            this.props.setBgSrc(game.gameState.background);\n          }\n          break;\n      }\n    });\n  }\n\n  componentWillUnmount() {\n    this.cleanupLobby();\n  }\n\n  exitWithErrorMessage(msg: string) {\n    this.props.setErrorMessage(msg);\n    this.props.setJoinLobbyCode('');\n  }\n\n  networkErrorHandler(error: any) {\n    if (error.type === 'peer-unavailable') {\n      this.exitWithErrorMessage('Lobby not found');\n    }\n    this.exitWithErrorMessage('Network error');\n    console.error(error);\n  }\n\n  cleanupLobbyAndExit() {\n    this.cleanupLobby();\n    this.client.disconnect();\n    this.props.setJoinLobbyCode('');\n  }\n\n  cleanupLobby() {\n    window.history.pushState({}, 'Schmeckles', '/');\n    document.title = 'Schmeckles';\n  }\n\n  render() {\n    if (this.state.gameState && this.state.gameState.started) {\n      return <GameUI gameState={this.state.gameState} contextPlayer={this.state.contextPlayer!} />\n    }\n\n    return (\n      <Lobby code={this.state.code} players={this.state.players} exitLobby={() => this.cleanupLobbyAndExit()} />\n    )\n  }\n}\n\ninterface LobbyProps {\n  code: string;\n  players: Player[];\n  startGame?: () => void;\n  disbandLobby?: () => void;\n  exitLobby?: () => void;\n}\n\nclass Lobby extends React.Component<LobbyProps> {\n  codeInput: React.RefObject<HTMLInputElement>;\n\n  constructor(props: LobbyProps) {\n    super(props);\n    this.codeInput = React.createRef();\n  }\n\n  componentDidUpdate(prevProps: LobbyProps) {\n    if (this.props.code !== prevProps.code) {\n      this.updateBrowserLocation(this.props.code);\n    }    \n  }\n\n  updateBrowserLocation = (c: string) => {\n    window.history.pushState({}, `[${c}] Schmeckles`, `/${c}`)\n    document.title = `[${c}] Schmeckles`\n  }\n\n  copyCodeToClipboard = () => {\n    this.codeInput.current!.select();\n    document.execCommand(\"copy\");\n  }\n\n  render() {\n    return (\n      <LobbyPageStyle>\n        <ContentColumnStyle>\n          <GameTitle />\n          {this.props.code \n            ? (\n              <>\n                <LobbyCode>\n                  Lobby Code: <CodeUnderline ref={this.codeInput} type=\"text\" value={this.props.code} readOnly={true} onClick={this.copyCodeToClipboard} />\n                  {this.props.disbandLobby\n                    ? (\n                    <ExitLink onClick={() => this.props.disbandLobby && this.props.disbandLobby()}>\n                      Disband Lobby\n                    </ExitLink>\n                    )\n                    : null\n                  }\n                  {this.props.exitLobby\n                    ? (\n                      <ExitLink onClick={() => this.props.exitLobby && this.props.exitLobby()}>\n                        Exit Lobby\n                      </ExitLink>\n                    ) \n                    : null\n                  }\n                </LobbyCode>\n              </>\n            )\n            : (\n                <>\n                  Establishing P2P network connection...\n                </>\n              )\n          }\n          <PlayerBoxes>\n          {[...Array(4)].map((p,i) =>\n            <PlayerBoxStyle key={i}>\n              {this.props.players[i] \n                ? (\n                  <>\n                    {!this.props.players[i].connected \n                      ? <PlayerNameConnectingStyle>{this.props.players[i].name}</PlayerNameConnectingStyle>\n                      : <>{this.props.players[i].name}</>\n                    }\n                  </>\n                )\n                : this.props.startGame \n                    ? (\n                      <span>\n                        Waiting for <PlayerTypeDropdownStyle><option>Player</option><option>Computer</option></PlayerTypeDropdownStyle>\n                      </span>\n                    )\n                    : (<>Waiting for players...</>)\n              }\n              \n            </PlayerBoxStyle>\n          )}\n          </PlayerBoxes>\n          {this.props.players.length < 2\n            ? <p>At least two players needed to start game.</p>\n            : null}\n\n          {this.props.startGame \n            ? (\n              <StartGameButtonStyle disabled={this.props.players.length < 2} onClick={() => this.props.startGame && this.props.startGame()}>Start Game</StartGameButtonStyle>\n            )\n            : <p>Game will begin when the host start the game.</p>\n          }\n        </ContentColumnStyle>\n      </LobbyPageStyle>\n    )\n  }\n}\n","import React, { useState } from 'react';\nimport styled from 'styled-components';\nimport GameUI from './Ui/Game';\nimport { LobbyClient, LobbyHost } from './Ui/Lobby';\nimport Splash, { BackgroundType, SplashBackground } from './Ui/Splash';\n\nconst AppStyle = styled.div`\n  height: 100%;\n`\n\nconst App = () => {\n\n  const [isHostingLobby, setIsHostingLobby] = useState(false);\n  const [playerName, setPlayerName] = useState('');\n  const [joinLobbyCode, setJoinLobbyCode] = useState('');\n  const [errorMessage, setErrorMessage] = useState('');\n  const [bgSrc, setBgSrc] = useState('');\n\n  const hostLobby = (playerName: string) => {\n    setIsHostingLobby(true);\n    setPlayerName(playerName);\n  }\n\n  const _setJoinLobbyCode = (code: string) => {\n    setJoinLobbyCode(code.toUpperCase());\n  }\n\n  const joinLobby = (code: string, playerName:string) => {\n    setJoinLobbyCode(code.toUpperCase());\n    setPlayerName(playerName);\n  }\n\n  return (\n    <SplashBackground type={BackgroundType.Board} src={bgSrc}>\n      <AppStyle>\n        {isHostingLobby ? <LobbyHost playerName={playerName} setIsHostingLobby={setIsHostingLobby} setErrorMessage={setErrorMessage} setBgSrc={setBgSrc} /> : null}\n        {joinLobbyCode ? <LobbyClient playerName={playerName} joinLobbyCode={joinLobbyCode} setErrorMessage={setErrorMessage} setJoinLobbyCode={_setJoinLobbyCode} setBgSrc={setBgSrc} /> : null}\n        {!isHostingLobby && !joinLobbyCode ? <Splash hostLobby={hostLobby} joinLobby={joinLobby} errorMessage={errorMessage} /> : null}\n      </AppStyle>\n    </SplashBackground>\n  )\n};\n\n\nexport default App;","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}