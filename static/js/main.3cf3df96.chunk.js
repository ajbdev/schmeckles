(this.webpackJsonpspender=this.webpackJsonpspender||[]).push([[0],{19:function(e){e.exports=JSON.parse('[{"gem":"onyx","tier":1,"points":null,"diamond":1,"sapphire":1,"emerald":1,"ruby":1,"onyx":null},{"gem":"onyx","tier":1,"points":null,"diamond":1,"sapphire":2,"emerald":1,"ruby":1,"onyx":null},{"gem":"onyx","tier":1,"points":null,"diamond":2,"sapphire":2,"emerald":null,"ruby":1,"onyx":null},{"gem":"onyx","tier":1,"points":null,"diamond":null,"sapphire":null,"emerald":1,"ruby":3,"onyx":1},{"gem":"onyx","tier":1,"points":null,"diamond":null,"sapphire":null,"emerald":2,"ruby":1,"onyx":null},{"gem":"onyx","tier":1,"points":null,"diamond":2,"sapphire":null,"emerald":2,"ruby":null,"onyx":null},{"gem":"onyx","tier":1,"points":null,"diamond":null,"sapphire":null,"emerald":3,"ruby":null,"onyx":null},{"gem":"onyx","tier":1,"points":1,"diamond":null,"sapphire":4,"emerald":null,"ruby":null,"onyx":null},{"gem":"sapphire","tier":1,"points":null,"diamond":1,"sapphire":null,"emerald":1,"ruby":1,"onyx":1},{"gem":"sapphire","tier":1,"points":null,"diamond":1,"sapphire":null,"emerald":1,"ruby":2,"onyx":1},{"gem":"sapphire","tier":1,"points":null,"diamond":1,"sapphire":null,"emerald":2,"ruby":2,"onyx":null},{"gem":"sapphire","tier":1,"points":null,"diamond":null,"sapphire":1,"emerald":3,"ruby":1,"onyx":null},{"gem":"sapphire","tier":1,"points":null,"diamond":1,"sapphire":null,"emerald":null,"ruby":null,"onyx":2},{"gem":"sapphire","tier":1,"points":null,"diamond":null,"sapphire":null,"emerald":2,"ruby":null,"onyx":2},{"gem":"sapphire","tier":1,"points":null,"diamond":null,"sapphire":null,"emerald":null,"ruby":null,"onyx":3},{"gem":"sapphire","tier":1,"points":1,"diamond":null,"sapphire":null,"emerald":null,"ruby":4,"onyx":null},{"gem":"diamond","tier":1,"points":null,"diamond":null,"sapphire":1,"emerald":1,"ruby":1,"onyx":1},{"gem":"diamond","tier":1,"points":null,"diamond":null,"sapphire":1,"emerald":2,"ruby":1,"onyx":1},{"gem":"diamond","tier":1,"points":null,"diamond":null,"sapphire":2,"emerald":2,"ruby":null,"onyx":1},{"gem":"diamond","tier":1,"points":null,"diamond":3,"sapphire":1,"emerald":null,"ruby":null,"onyx":1},{"gem":"diamond","tier":1,"points":null,"diamond":null,"sapphire":null,"emerald":null,"ruby":2,"onyx":1},{"gem":"diamond","tier":1,"points":null,"diamond":null,"sapphire":2,"emerald":null,"ruby":null,"onyx":2},{"gem":"diamond","tier":1,"points":null,"diamond":null,"sapphire":3,"emerald":null,"ruby":null,"onyx":null},{"gem":"diamond","tier":1,"points":1,"diamond":null,"sapphire":null,"emerald":4,"ruby":null,"onyx":null},{"gem":"emerald","tier":1,"points":null,"diamond":1,"sapphire":1,"emerald":null,"ruby":1,"onyx":1},{"gem":"emerald","tier":1,"points":null,"diamond":1,"sapphire":1,"emerald":null,"ruby":1,"onyx":2},{"gem":"emerald","tier":1,"points":null,"diamond":null,"sapphire":1,"emerald":null,"ruby":2,"onyx":2},{"gem":"emerald","tier":1,"points":null,"diamond":1,"sapphire":3,"emerald":1,"ruby":null,"onyx":null},{"gem":"emerald","tier":1,"points":null,"diamond":2,"sapphire":1,"emerald":null,"ruby":null,"onyx":null},{"gem":"emerald","tier":1,"points":null,"diamond":null,"sapphire":2,"emerald":null,"ruby":2,"onyx":null},{"gem":"emerald","tier":1,"points":null,"diamond":null,"sapphire":null,"emerald":null,"ruby":3,"onyx":null},{"gem":"emerald","tier":1,"points":1,"diamond":null,"sapphire":null,"emerald":null,"ruby":null,"onyx":4},{"gem":"ruby","tier":1,"points":null,"diamond":1,"sapphire":1,"emerald":1,"ruby":null,"onyx":1},{"gem":"ruby","tier":1,"points":null,"diamond":2,"sapphire":1,"emerald":1,"ruby":null,"onyx":1},{"gem":"ruby","tier":1,"points":null,"diamond":2,"sapphire":null,"emerald":1,"ruby":null,"onyx":2},{"gem":"ruby","tier":1,"points":null,"diamond":1,"sapphire":null,"emerald":null,"ruby":1,"onyx":3},{"gem":"ruby","tier":1,"points":null,"diamond":null,"sapphire":2,"emerald":1,"ruby":null,"onyx":null},{"gem":"ruby","tier":1,"points":null,"diamond":2,"sapphire":null,"emerald":null,"ruby":2,"onyx":null},{"gem":"ruby","tier":1,"points":null,"diamond":3,"sapphire":null,"emerald":null,"ruby":null,"onyx":null},{"gem":"ruby","tier":1,"points":1,"diamond":4,"sapphire":null,"emerald":null,"ruby":null,"onyx":null},{"gem":"onyx","tier":2,"points":1,"diamond":3,"sapphire":2,"emerald":2,"ruby":null,"onyx":null},{"gem":"onyx","tier":2,"points":1,"diamond":3,"sapphire":null,"emerald":3,"ruby":null,"onyx":2},{"gem":"onyx","tier":2,"points":2,"diamond":null,"sapphire":1,"emerald":4,"ruby":2,"onyx":null},{"gem":"onyx","tier":2,"points":2,"diamond":null,"sapphire":null,"emerald":5,"ruby":3,"onyx":null},{"gem":"onyx","tier":2,"points":2,"diamond":5,"sapphire":null,"emerald":null,"ruby":null,"onyx":null},{"gem":"onyx","tier":2,"points":3,"diamond":null,"sapphire":null,"emerald":null,"ruby":null,"onyx":6},{"gem":"sapphire","tier":2,"points":1,"diamond":null,"sapphire":2,"emerald":2,"ruby":3,"onyx":null},{"gem":"sapphire","tier":2,"points":1,"diamond":null,"sapphire":2,"emerald":3,"ruby":null,"onyx":3},{"gem":"sapphire","tier":2,"points":2,"diamond":5,"sapphire":3,"emerald":null,"ruby":null,"onyx":null},{"gem":"sapphire","tier":2,"points":2,"diamond":2,"sapphire":null,"emerald":null,"ruby":1,"onyx":4},{"gem":"sapphire","tier":2,"points":2,"diamond":null,"sapphire":5,"emerald":null,"ruby":null,"onyx":null},{"gem":"sapphire","tier":2,"points":3,"diamond":null,"sapphire":6,"emerald":null,"ruby":null,"onyx":null},{"gem":"diamond","tier":2,"points":1,"diamond":null,"sapphire":null,"emerald":3,"ruby":2,"onyx":2},{"gem":"diamond","tier":2,"points":1,"diamond":2,"sapphire":3,"emerald":null,"ruby":3,"onyx":null},{"gem":"diamond","tier":2,"points":2,"diamond":null,"sapphire":null,"emerald":1,"ruby":4,"onyx":2},{"gem":"diamond","tier":2,"points":2,"diamond":null,"sapphire":null,"emerald":null,"ruby":5,"onyx":3},{"gem":"diamond","tier":2,"points":2,"diamond":null,"sapphire":null,"emerald":null,"ruby":5,"onyx":null},{"gem":"diamond","tier":2,"points":3,"diamond":6,"sapphire":null,"emerald":null,"ruby":null,"onyx":null},{"gem":"emerald","tier":2,"points":1,"diamond":3,"sapphire":null,"emerald":2,"ruby":3,"onyx":null},{"gem":"emerald","tier":2,"points":1,"diamond":2,"sapphire":3,"emerald":null,"ruby":null,"onyx":2},{"gem":"emerald","tier":2,"points":2,"diamond":4,"sapphire":2,"emerald":null,"ruby":null,"onyx":1},{"gem":"emerald","tier":2,"points":2,"diamond":null,"sapphire":5,"emerald":3,"ruby":null,"onyx":null},{"gem":"emerald","tier":2,"points":2,"diamond":null,"sapphire":null,"emerald":5,"ruby":null,"onyx":null},{"gem":"emerald","tier":2,"points":3,"diamond":null,"sapphire":null,"emerald":6,"ruby":null,"onyx":null},{"gem":"ruby","tier":2,"points":1,"diamond":2,"sapphire":null,"emerald":null,"ruby":2,"onyx":3},{"gem":"ruby","tier":2,"points":1,"diamond":null,"sapphire":3,"emerald":null,"ruby":2,"onyx":3},{"gem":"ruby","tier":2,"points":2,"diamond":1,"sapphire":4,"emerald":2,"ruby":null,"onyx":null},{"gem":"ruby","tier":2,"points":2,"diamond":3,"sapphire":null,"emerald":null,"ruby":null,"onyx":5},{"gem":"ruby","tier":2,"points":2,"diamond":null,"sapphire":null,"emerald":null,"ruby":null,"onyx":5},{"gem":"ruby","tier":2,"points":3,"diamond":null,"sapphire":null,"emerald":null,"ruby":6,"onyx":null},{"gem":"onyx","tier":3,"points":3,"diamond":3,"sapphire":3,"emerald":5,"ruby":3,"onyx":null},{"gem":"onyx","tier":3,"points":4,"diamond":null,"sapphire":null,"emerald":null,"ruby":7,"onyx":null},{"gem":"onyx","tier":3,"points":4,"diamond":null,"sapphire":null,"emerald":3,"ruby":6,"onyx":3},{"gem":"onyx","tier":3,"points":5,"diamond":null,"sapphire":null,"emerald":null,"ruby":7,"onyx":3},{"gem":"sapphire","tier":3,"points":3,"diamond":3,"sapphire":null,"emerald":3,"ruby":3,"onyx":5},{"gem":"sapphire","tier":3,"points":4,"diamond":7,"sapphire":null,"emerald":null,"ruby":null,"onyx":null},{"gem":"sapphire","tier":3,"points":4,"diamond":6,"sapphire":3,"emerald":null,"ruby":null,"onyx":3},{"gem":"sapphire","tier":3,"points":5,"diamond":7,"sapphire":3,"emerald":null,"ruby":null,"onyx":null},{"gem":"diamond","tier":3,"points":3,"diamond":null,"sapphire":3,"emerald":3,"ruby":5,"onyx":3},{"gem":"diamond","tier":3,"points":4,"diamond":null,"sapphire":null,"emerald":null,"ruby":null,"onyx":7},{"gem":"diamond","tier":3,"points":4,"diamond":3,"sapphire":null,"emerald":null,"ruby":3,"onyx":6},{"gem":"diamond","tier":3,"points":5,"diamond":3,"sapphire":null,"emerald":null,"ruby":null,"onyx":7},{"gem":"emerald","tier":3,"points":3,"diamond":5,"sapphire":3,"emerald":null,"ruby":3,"onyx":3},{"gem":"emerald","tier":3,"points":4,"diamond":null,"sapphire":7,"emerald":null,"ruby":null,"onyx":null},{"gem":"emerald","tier":3,"points":4,"diamond":3,"sapphire":6,"emerald":3,"ruby":null,"onyx":null},{"gem":"emerald","tier":3,"points":5,"diamond":null,"sapphire":7,"emerald":3,"ruby":null,"onyx":null},{"gem":"ruby","tier":3,"points":3,"diamond":3,"sapphire":5,"emerald":3,"ruby":null,"onyx":3},{"gem":"ruby","tier":3,"points":4,"diamond":null,"sapphire":null,"emerald":7,"ruby":null,"onyx":null},{"gem":"ruby","tier":3,"points":4,"diamond":null,"sapphire":3,"emerald":6,"ruby":3,"onyx":null},{"gem":"ruby","tier":3,"points":5,"diamond":null,"sapphire":null,"emerald":7,"ruby":3,"onyx":null}]')},20:function(e){e.exports=JSON.parse('[{"points":3,"diamond":null,"sapphire":null,"emerald":null,"ruby":4,"onyx":4},{"points":3,"diamond":null,"sapphire":null,"emerald":4,"ruby":4,"onyx":null},{"points":3,"diamond":4,"sapphire":null,"emerald":null,"ruby":null,"onyx":4},{"points":3,"diamond":4,"sapphire":4,"emerald":null,"ruby":null,"onyx":null},{"points":3,"diamond":null,"sapphire":3,"emerald":3,"ruby":3,"onyx":null},{"points":3,"diamond":null,"sapphire":null,"emerald":3,"ruby":3,"onyx":3},{"points":3,"diamond":3,"sapphire":null,"emerald":null,"ruby":3,"onyx":3},{"points":3,"diamond":null,"sapphire":4,"emerald":4,"ruby":null,"onyx":null},{"points":3,"diamond":3,"sapphire":3,"emerald":3,"ruby":null,"onyx":null},{"points":3,"diamond":3,"sapphire":3,"emerald":null,"ruby":null,"onyx":3}]')},32:function(e,n,t){},33:function(e,n){function t(e){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}t.keys=function(){return[]},t.resolve=t,e.exports=t,t.id=33},38:function(e,n,t){"use strict";t.r(n);var r,i=t(1),a=t.n(i),l=t(18),o=t.n(l),s=(t(32),t(9)),u=t(3),d=t(4),c=t(6),p=t(5),h=t(13),m=t(2),b=t(19),y=t(20),f=t(8),g=t(7),x=t(21),j=function(e){return{passed:e.length>1,message:"There must be at least two players to start"}},v=function(e){return{passed:!e,message:"Game has already started."}},O=function(e){return{passed:e,message:"Game must be started first."}},k=function(e,n,t){return{passed:n.indexOf(e)+1===t,message:"Players can only act when it is their turn."}};!function(e){e.JoinGame="JoinGame",e.StartGame="StartGame",e.TakeGems="TakeGems",e.ReserveCard="ReserveCard",e.PurchaseCard="PurchaseCard"}(r||(r={}));var I,w,C=function(){function e(n){Object(p.a)(this,e),this.type=void 0,this.player=void 0,this.rules=void 0,this.failedRules=void 0,this.player=n,this.rules=[],this.failedRules=[]}return Object(c.a)(e,[{key:"checkRules",value:function(e){var n=this;return this.rules.forEach((function(t){var r=t(e);r.passed||n.failedRules.push(r)})),!(this.failedRules.length>0)}},{key:"nextTurn",value:function(e){var n=e.turn+1;n>e.players.length&&(n=1),e.turn=n}}],[{key:"create",value:function(e,n,t){var i;return new(0,(i={},Object(m.a)(i,r.JoinGame,E),Object(m.a)(i,r.StartGame,L),Object(m.a)(i,r.TakeGems,D),Object(m.a)(i,r.PurchaseCard,P),Object(m.a)(i,r.ReserveCard,N),i)[n])(e,Object(x.a)({},t))}}]),e}(),S=function(e,n,t){Object.keys(e).forEach((function(r){e[r]-=t[r],n[r]+=t[r]}))},L=function(e){Object(f.a)(t,e);var n=Object(g.a)(t);function t(e,i){var a;return Object(p.a)(this,t),(a=n.call(this,e)).type=r.StartGame,a.rules=[function(e){return j(e.players)},function(e){return v(e.started)}],a}return Object(c.a)(t,[{key:"act",value:function(e){e.started=!0,e.turn=1}}]),t}(C),E=function(e){Object(f.a)(t,e);var n=Object(g.a)(t);function t(e,i){var a;return Object(p.a)(this,t),(a=n.call(this,e)).isContextPlayer=void 0,a.type=r.JoinGame,a.isContextPlayer=i.isContextPlayer,a.rules=[function(e){return{passed:e.players.length<4,message:"This game is full."}},function(e){return v(e.started)}],a}return Object(c.a)(t,[{key:"act",value:function(e){e.players.push(this.player),this.isContextPlayer&&(e.contextPlayer=this.player)}}]),t}(C),D=function(e){Object(f.a)(t,e);var n=Object(g.a)(t);function t(e,i){var a;return Object(p.a)(this,t),(a=n.call(this,e)).gems=void 0,a.type=r.TakeGems,a.gems=i.gems,a.rules=[function(e){return O(e.started)},function(e){return j(e.players)},function(e){return k(a.player,e.players,e.turn)},function(e){return n=a.gems,t=e.gems,{passed:0===Object.keys(n).filter((function(e){return n[e]>t[e]})).length,message:"Not enough gems in the bank to complete this action."};var n,t},function(e){return{passed:0===a.gems.star,message:"Only valid gems can be selected."}},function(e){var n,t=Object.values(a.gems).reduce((function(e,n){return e+n}));if(2===t){var r=(n=a.gems,{passed:1===Object.values(n).filter((function(e){return e>0})).length,message:"Gems must be of the same type when taking two gems."});return r.passed?function(e,n){return{passed:n[e]>=4,message:"There must be at least four gems of the desired type in the bank to take two gems."}}(Object.keys(a.gems).filter((function(e){return 2===a.gems[e]}))[0],e.gems):r}return 3===t?function(e){return{passed:0===Object.keys(e).filter((function(n){return e[n]>1})).length,message:"Gems must be of different types to take three gems."}}(a.gems):function(e){return{passed:e>=2&&e<=3,message:"Only two or three gems can be taken per turn."}}(t)}],a}return Object(c.a)(t,[{key:"act",value:function(e){S(e.gems,this.player.gems,this.gems),this.nextTurn(e)}}]),t}(C),P=function(e){Object(f.a)(t,e);var n=Object(g.a)(t);function t(e,i){var a;return Object(p.a)(this,t),(a=n.call(this,e)).cards=void 0,a.index=void 0,a.type=r.PurchaseCard,a.index=i.index,a.cards=i.cards,a.rules=[function(e){return O(e.started)},function(e){return j(e.players)},function(e){return k(a.player,e.players,e.turn)},function(e){return function(e,n){return{passed:0===Object.keys(e.costs).filter((function(t){return e.costs[t]>n.gems[t]+n.cards.cards.filter((function(e){return e.gem===G[t]})).length})).length,message:"Not enough gems to purchase this card."}}(a.cards[a.index],a.player)}],a}return Object(c.a)(t,[{key:"act",value:function(e){var n=this.cards.splice(this.index,1)[0];S(this.player.gems,e.gems,n.costs),n.reserved&&(n.reserved=!1),this.player.cards.cards.push(n),this.nextTurn(e)}}]),t}(C),N=function(e){Object(f.a)(t,e);var n=Object(g.a)(t);function t(e,i){var a;return Object(p.a)(this,t),(a=n.call(this,e)).cards=void 0,a.index=void 0,a.type=r.ReserveCard,a.cards=i.cards,a.index=i.index,a.rules=[function(e){return O(e.started)},function(e){return j(e.players)},function(e){return k(a.player,e.players,e.turn)},function(e){return{passed:a.player.reservedCards.length<3,message:"A maximum of three cards may be reserved."}}],a}return Object(c.a)(t,[{key:"act",value:function(e){var n=this.cards.splice(this.index,1)[0],t=J();t.star=1,S(e.gems,this.player.gems,t),n.reserved=!0,this.player.reservedCards.push(n),this.nextTurn(e)}}]),t}(C),A=t(22),B=t.n(A);!function(e){e.DISBANDED="DISBANDED",e.DISCONNECTED="DISCONNECTED",e.LOBBY_PLAYERS="LOBBY_PLAYERS"}(I||(I={})),function(e){e.DISCONNECTING="DISCONNECTING"}(w||(w={}));var G,M,R=function(){function e(n,t){Object(p.a)(this,e),this.onError=function(e){},this.player=void 0,this.connectionId=void 0,this.peer=void 0,this.debugLevel=void 0,this.player=n,this.debugLevel=3,this.connectionId=this.createConnectionId(),this.peer=new B.a(this.fullyQualifiedId(this.connectionId),{debug:this.debugLevel}),this.peer.on("error",t)}return Object(c.a)(e,[{key:"destroy",value:function(){this.peer.connections.forEach((function(e){return e.disconnect()})),this.peer.disconnect(),this.peer.destroy()}},{key:"fullyQualifiedId",value:function(e){return"schmeckles_".concat(e)}}]),e}(),F=function(e){Object(f.a)(t,e);var n=Object(g.a)(t);function t(){var e;Object(p.a)(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=n.call.apply(n,[this].concat(i))).clients=[],e.players=[],e}return Object(c.a)(t,[{key:"createConnectionId",value:function(){return Math.random().toString(20).substr(2,4).toUpperCase()}},{key:"destroy",value:function(){this.peer.connections.forEach((function(e){return e.disconnect()})),this.peer.disconnect(),this.peer.destroy()}},{key:"host",value:function(e,n){var t=this;this.player.connected=!0,this.players=[this.player],this.peer.on("open",(function(r){e(t.connectionId),t.peer.on("connection",(function(e){var r=e.metadata;t.players.length<4&&r.name.length>0&&(t.players.push(r),t.clients.push(e),n(t.players),t.broadcast({type:I.LOBBY_PLAYERS,meta:t.players})),e.on("open",(function(){e.metadata.connected=!0,t.broadcast({type:I.LOBBY_PLAYERS,meta:t.players}),n(t.players)})),e.on("close",(function(){console.log("closed connection with "+e.metadata.name),t.players.splice(t.players.findIndex((function(n){return n.connectionId===e.peer})),1),t.broadcast({type:I.LOBBY_PLAYERS,meta:t.players}),n(t.players)})),e.on("data",(function(e){console.log("Received",e)}))}))}))}},{key:"broadcast",value:function(e){console.log("Broadcasting: ",e),this.clients.forEach((function(n){n.send(e)}))}},{key:"disconnect",value:function(){this.broadcast({type:I.DISBANDED}),this.peer.disconnect()}}]),t}(R),T=function(e){Object(f.a)(t,e);var n=Object(g.a)(t);function t(){var e;Object(p.a)(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=n.call.apply(n,[this].concat(i))).code="",e}return Object(c.a)(t,[{key:"createConnectionId",value:function(){return Math.random().toString(20).substr(2,10)}},{key:"join",value:function(e,n){var t=this;this.peer.on("open",(function(r){t.player.connectionId=t.fullyQualifiedId(t.connectionId);var i=t.peer.connect(t.fullyQualifiedId(e),{metadata:t.player});t.code=e,i.on("open",(function(){i.on("data",(function(e){console.log("Received broadcast: ",e),n(e)})),i.on("close",(function(){n({type:I.DISCONNECTED})}))}))}))}},{key:"disconnect",value:function(){this.peer.connections[this.fullyQualifiedId(this.code)][0].close()}}]),t}(R);!function(e){e.Ruby="ruby",e.Sapphire="sapphire",e.Onyx="onyx",e.Emerald="emerald",e.Diamond="diamond",e.Star="star"}(G||(G={})),function(e){e[e.I=1]="I",e[e.II=2]="II",e[e.III=3]="III"}(M||(M={}));var J=function(){var e;return e={},Object(m.a)(e,G.Ruby,0),Object(m.a)(e,G.Sapphire,0),Object(m.a)(e,G.Diamond,0),Object(m.a)(e,G.Onyx,0),Object(m.a)(e,G.Emerald,0),Object(m.a)(e,G.Star,0),e},z=function(e){return Object(h.a)(e).reduceRight((function(e,n,t,r){return e.push(r.splice(0|Math.random()*r.length,1)[0]),e}),[])},H=function e(n,t,r,i){Object(p.a)(this,e),this.points=void 0,this.gem=void 0,this.tier=void 0,this.costs=void 0,this.reserved=void 0,this.points=n,this.gem=t,this.tier=r,this.costs=i},U=function(){function e(n,t){Object(p.a)(this,e),this.cards=void 0,this.tier=void 0,n&&(this.tier=n),this.cards=t?z(t):[]}return Object(c.a)(e,[{key:"draw",value:function(e,n){this.cards.splice(0,e).forEach((function(e){return n.cards.push(e)}))}}]),e}(),Y=function(){function e(){var n;Object(p.a)(this,e),this.tierICards=void 0,this.tierIICards=void 0,this.tierIIICards=void 0,this.tierIDrawPile=void 0,this.tierIIDrawPile=void 0,this.tierIIIDrawPile=void 0,this.nobles=void 0,this.gems=void 0,this.players=void 0,this.started=void 0,this.contextPlayer=void 0,this.turn=void 0,this.background=void 0;var t=b.map((function(e){var n;return new H(e.points||0,e.gem,e.tier,(n={},Object(m.a)(n,G.Ruby,e.ruby||0),Object(m.a)(n,G.Sapphire,e.sapphire||0),Object(m.a)(n,G.Diamond,e.diamond||0),Object(m.a)(n,G.Onyx,e.onyx||0),Object(m.a)(n,G.Emerald,e.emerald||0),Object(m.a)(n,G.Star,0),n))})),r=z(y.map((function(e){var n;return{points:e.points,costs:(n={},Object(m.a)(n,G.Ruby,e.ruby||0),Object(m.a)(n,G.Sapphire,e.sapphire||0),Object(m.a)(n,G.Diamond,e.diamond||0),Object(m.a)(n,G.Onyx,e.onyx||0),Object(m.a)(n,G.Emerald,e.emerald||0),n)}})));this.background="",this.players=[],this.nobles=r.splice(0,3),this.tierICards=new U(M.I,[]),this.tierIICards=new U(M.II,[]),this.tierIIICards=new U(M.III,[]),this.tierIDrawPile=new U(M.I,t.filter((function(e){return e.tier===M.I}))),this.tierIIDrawPile=new U(M.II,t.filter((function(e){return e.tier===M.II}))),this.tierIIIDrawPile=new U(M.III,t.filter((function(e){return e.tier===M.III}))),this.drawVisibleCards(),this.turn=1,this.started=!1,this.gems=(n={},Object(m.a)(n,G.Ruby,7),Object(m.a)(n,G.Sapphire,7),Object(m.a)(n,G.Diamond,7),Object(m.a)(n,G.Onyx,7),Object(m.a)(n,G.Emerald,7),Object(m.a)(n,G.Star,5),n)}return Object(c.a)(e,[{key:"drawVisibleCards",value:function(){this.tierIDrawPile.draw(4-this.tierICards.cards.length,this.tierICards),this.tierIIDrawPile.draw(4-this.tierIICards.cards.length,this.tierIICards),this.tierIIIDrawPile.draw(4-this.tierIIICards.cards.length,this.tierIIICards)}}]),e}(),W=function e(n){Object(p.a)(this,e),this.id=void 0,this.name=void 0,this.gems=void 0,this.cards=void 0,this.reservedCards=void 0,this.nobles=void 0,this.connected=void 0,this.connectionId=void 0,this.id=n,this.name=n,this.gems=J(),this.cards=new U,this.reservedCards=[],this.nobles=[],this.connected=!1,this.connectionId=""},_=function(){function e(){Object(p.a)(this,e),this.gameState=void 0,this.host=void 0,this.client=void 0,this.onStateUpdateCallback=void 0,this.gameState=new Y,this.onStateUpdateCallback=null}return Object(c.a)(e,[{key:"newClient",value:function(e,n){return this.client&&this.client.destroy(),this.client=new T(e,n),this.client}},{key:"newHost",value:function(e,n){return this.host&&this.host.destroy(),this.host=new F(e,n),this.host}},{key:"getPlayer",value:function(e){return this.gameState.players.filter((function(n){return n.id===e}))[0]}},{key:"onStateUpdate",value:function(e){this.onStateUpdateCallback=e}},{key:"sendAction",value:function(e,n,t){var r=C.create(e,n,t);this.receiveAction(r)}},{key:"receiveAction",value:function(e){e.checkRules(this.gameState)?e.act(this.gameState):e.failedRules.map((function(e){return alert(e.message)})),this.onStateUpdateCallback&&this.onStateUpdateCallback(this.gameState)}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}},{key:"reset",value:function(){return e.instance=void 0,this.getInstance()}}]),e}();_.instance=void 0;var Q,V,K,q,X,Z,$,ee,ne,te,re,ie,ae,le,oe,se,ue,de,ce,pe,he,me,be=t(15),ye=t.n(be),fe=t(23),ge=t(24),xe=t(0),je=d.a.div(Q||(Q=Object(u.a)(["\n  width: 100%;\n  background: #999;\n  text-align: center;\n  height: 100%;\n"]))),ve=d.a.div.attrs((function(e){return{imageSrc:e.imageSrc,bgColor:e.bgColor||"#555555"}}))(V||(V=Object(u.a)(["\n  background-image: url(",");\n  background-color: ",";\n  background-size: contain;\n  background-position: center center;\n  background-repeat: no-repeat;\n  height: 100%;\n"])),(function(e){return e.imageSrc}),(function(e){return e.bgColor})),Oe=d.a.h1(K||(K=Object(u.a)(["\n  font-size: 70px;\n  color: #FFDC73;\n  -webkit-text-stroke: 1px #BF9B30;\n  margin: 0;\n  padding: 20px 0 50px 0;\n"]))),ke=d.a.h2(q||(q=Object(u.a)(["\n  font-size: 36px;\n  color: #FFDC73;\n  -webkit-text-stroke: 0.5px #BF9B30;\n  text-shadow: 1px 1px 1px #000;\n  margin: 0;\n  text-align: center;\n"]))),Ie=function(){return Object(xe.jsx)(ke,{children:"Schmeckles"})},we=d.a.button(X||(X=Object(u.a)(["\n  border-radius: 0;\n  font-size: 28px;\n  padding: 10px;\n  background: #91a4e6;\n  border: 2px solid #3451b3;\n  width: 400px;\n"]))),Ce=d.a.div(Z||(Z=Object(u.a)(["\n  display: flex;\n  margin: 20px auto;\n  width: 400px;\n"]))),Se=d.a.input($||($=Object(u.a)(["\n  font-size: 28px;\n  padding: 10px;\n  border: 2px solid #ccc;\n  text-align: center;\n  text-transform: uppercase;\n  width: 150px;\n"]))),Le=d.a.button(ee||(ee=Object(u.a)(["\n  border-radius: 0;\n  font-size: 28px;\n  padding: 10px;\n  border: 2px solid #2f8a33;\n  background: #5ee465;\n  margin-left: 20px;\n  width: 230px;\n"]))),Ee=function(e){Object(f.a)(t,e);var n=Object(g.a)(t);function t(e){var r;return Object(p.a)(this,t),(r=n.call(this,e)).state=void 0,r.state={background:{src:e.src||"",color:""}},r}return Object(c.a)(t,[{key:"componentDidMount",value:function(){this.loadBackground()}},{key:"loadBackground",value:function(){var e=Object(fe.a)(ye.a.mark((function e(){var n,t,r;return ye.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props.src||"".concat("/schmeckles","/splash/splash").concat(Math.floor(16*Math.random())+1,".jpg"),t=new ge.a,e.next=4,t.getColorAsync(n);case 4:r=e.sent,this.setState({background:{src:n,color:r.hex}});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(xe.jsx)(ve,{imageSrc:this.state.background.src,bgColor:this.state.background.color,children:this.props.children})}}]),t}(a.a.Component),De=d.a.a(ne||(ne=Object(u.a)(["\n  color: #00d9ff;\n  text-decoration: underline;\n  cursor: pointer;\n"]))),Pe=d.a.p(te||(te=Object(u.a)(["\n  color: #fff;\n  font-size: 24px;\n  text-shadow: 1px 1px 1px #000;\n  font-weight: bold;\n  user-select: none;\n"]))),Ne=d.a.a(re||(re=Object(u.a)(["\n  border-bottom: 1px dashed #fff;\n  cursor: pointer;\n"]))),Ae=d.a.input(ie||(ie=Object(u.a)(["\n  padding: 2px;\n  font-size: 20px;\n  text-align: center;\n  margin-left: 10px;\n  width: 140px;\n"]))),Be=d.a.div(ae||(ae=Object(u.a)(["\n  font-size: 20px;\n  color: #fff;\n  display: inline-block;\n  padding: 8px;\n  border-radius: 8px;\n  background: rgba(255, 0, 0, 0.5);\n"]))),Ge=["Helgi","Finnbogi","Abu","Jean","Samo","Giovanni","Lu\xeds","Jeanne","Gregorio","Domini","Andres","Guglielmo","Hugo","Muhammad","Eldad","Wulfstan","Joseph","Aldo","Alessio","Cosimo","Fabritio","Francesca","Galileo","Isabetta","Lavinia","Madalena","Minerva","Nencia","Vinci"],Me=Ge[Math.floor(Math.random()*Ge.length)];function Re(e){var n=Object(i.useState)(!1),t=Object(s.a)(n,2),r=t[0],a=t[1],l=Object(i.useState)(Me),o=Object(s.a)(l,2),u=o[0],d=o[1],c=Object(i.useState)(""),p=Object(s.a)(c,2),h=p[0],m=p[1];return Object(i.useEffect)((function(){if(window.location.pathname.length>1){var e=window.location.pathname.replace("/","");4===e.length&&m(e)}}),[]),Object(xe.jsx)(je,{children:Object(xe.jsxs)(Ee,{src:"".concat("/schmeckles","/splash/splash17.jpg"),children:[Object(xe.jsx)(Oe,{children:"Schmeckles"}),e.errorMessage?Object(xe.jsx)(Be,{children:e.errorMessage}):null,Object(xe.jsxs)(Pe,{children:["Welcome,",r?Object(xe.jsx)(Ae,{type:"text",placeholder:u,autoFocus:!0,onChange:function(e){return d(e.target.value)},onKeyPress:function(e){13===e.which&&a(!1)}}):Object(xe.jsxs)(xe.Fragment,{children:["\xa0",Object(xe.jsx)(Ne,{onClick:function(){return a(!0)},children:u}),"! \xa0",Object(xe.jsx)(De,{onClick:function(){return a(!0)},children:"Change Name"})]})]}),Object(xe.jsx)(we,{onClick:function(){return e.hostLobby(u)},children:"Host a game"}),Object(xe.jsxs)(Ce,{children:[Object(xe.jsx)(Se,{type:"text",placeholder:"Code",value:h,onChange:function(e){return m(e.target.value)}}),Object(xe.jsx)(Le,{disabled:4!==h.length,onClick:function(){return e.joinLobby(h,u)},children:"Join Game"})]})]})})}var Fe,Te=d.a.div(le||(le=Object(u.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n"]))),Je=d.a.div(oe||(oe=Object(u.a)(["\n  flex-direction: column;\n  display: flex;\n  justify-content: center;\n  text-shadow: 1px 1px 1px #000;\n  text-align: center;\n  color: #fff;\n"]))),ze=d.a.div(se||(se=Object(u.a)(["\n  width: 450px;\n  display: flex;\n  flex-wrap: wrap;\n"]))),He=d.a.div(ue||(ue=Object(u.a)(["\n  width: 200px;\n  border: 2px solid #ccc;\n  height: 200px;\n  margin: 10px;\n  background: rgba(55,55,55,0.5);\n  text-align: center;\n  color: #fff;\n  text-shadow: 1px 1px 1px #000;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n"]))),Ue=d.a.div(de||(de=Object(u.a)(["\n  font-size: 24px;\n  padding: 20px;\n"]))),Ye=d.a.input(ce||(ce=Object(u.a)(["\n  background: rgba(55,55,55,0.6);\n  font-size: 24px;\n  text-align: center;\n  color: #fff;\n  border: 0;\n  display: inline;\n  width: 80px;\n  text-shadow: 1px 1px 1px #000;\n  text-decoration: underline;\n  padding: 4px 8px;\n  border-radius: 4px;\n  cursor: pointer;\n"]))),We=d.a.a(pe||(pe=Object(u.a)(["\n  font-size: 14px;\n  cursor: pointer;\n  border: 1px solid #ff0000;\n  border-radius: 3px;\n  color: #eee;\n  background: rgba(214, 38, 15, 0.5);\n  margin-left: 10px;\n  padding: 4px;\n"]))),_e=d.a.button(he||(he=Object(u.a)(["\n  border-radius: 0;\n  font-size: 28px;\n  padding: 10px;\n  background: #91a4e6;\n  border: 2px solid #3451b3;\n  margin: 10px;\n  width: auto;\n"]))),Qe=d.a.span(me||(me=Object(u.a)(["\n  color: #aaa;\n"]))),Ve={players:[],code:""},Ke=_.getInstance(),qe=function(e){Object(f.a)(t,e);var n=Object(g.a)(t);function t(e){var r;return Object(p.a)(this,t),(r=n.call(this,e)).player=void 0,r.host=null,r.player=new W(e.playerName),r.state=Ve,r}return Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({players:[this.player]}),this.host=Ke.newHost(this.player,(function(n){return e.props.setErrorMessage(n)})),this.setWindowCloseDialog(),window.onunload=function(){e.disconnectHost()},this.host.host((function(n){return e.setState({code:n})}),(function(n){return e.setState({players:n})}))}},{key:"disbandLobby",value:function(){window.confirm("Are you sure you want to disband this lobby? Players will not be able to join with this lobby code.")&&this.props.setIsHostingLobby&&(this.props.setIsHostingLobby(!1),window.history.pushState({},"Schmeckles","/"),document.title="Schmeckles")}},{key:"disconnectHost",value:function(){this.host&&this.host.disconnect()}},{key:"cleanupLobby",value:function(){window.onbeforeunload=null,this.disconnectHost()}},{key:"componentWillUnmount",value:function(){this.cleanupLobby()}},{key:"setWindowCloseDialog",value:function(){window.onbeforeunload=function(e){var n="Are you sure you want to disband this lobby?";return(e=e||window.event)&&(e.returnValue=n),n}}},{key:"render",value:function(){var e=this;return Object(xe.jsx)($e,{code:this.state.code,players:this.state.players,disbandLobby:function(){return e.disbandLobby()}})}}]),t}(a.a.Component),Xe={players:[],code:""},Ze=function(e){Object(f.a)(t,e);var n=Object(g.a)(t);function t(e){var r;return Object(p.a)(this,t),(r=n.call(this,e)).player=void 0,r.client=null,r.state=Xe,r.player=new W(e.playerName),r}return Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({code:this.props.joinLobbyCode}),this.client=Ke.newClient(this.player,(function(n){return e.networkErrorHandler(n)})),window.onunload=function(){return e.disconnectClient()},this.client.join(this.props.joinLobbyCode,(function(n){switch(n.type){case I.DISBANDED:e.exitWithErrorMessage("Lobby was disbanded by host");break;case I.DISCONNECTED:e.exitWithErrorMessage("Disconnected");break;case I.LOBBY_PLAYERS:e.setState({players:n.meta})}}))}},{key:"disconnectClient",value:function(){this.client&&this.client.disconnect()}},{key:"componentWillUnmount",value:function(){this.cleanupLobby()}},{key:"exitWithErrorMessage",value:function(e){this.props.setErrorMessage(e),this.props.setJoinLobbyCode("")}},{key:"networkErrorHandler",value:function(e){"peer-unavailable"===e.type&&this.exitWithErrorMessage("Lobby not found")}},{key:"cleanupLobbyAndExit",value:function(){this.cleanupLobby(),this.disconnectClient(),this.props.setJoinLobbyCode("")}},{key:"cleanupLobby",value:function(){window.history.pushState({},"Schmeckles","/"),document.title="Schmeckles"}},{key:"render",value:function(){var e=this;return Object(xe.jsx)($e,{code:this.state.code,players:this.state.players,exitLobby:function(){return e.cleanupLobbyAndExit()}})}}]),t}(a.a.Component),$e=function(e){Object(f.a)(t,e);var n=Object(g.a)(t);function t(e){var r;return Object(p.a)(this,t),(r=n.call(this,e)).codeInput=void 0,r.updateBrowserLocation=function(e){window.history.pushState({},"[".concat(e,"] Schmeckles"),"/".concat(e)),document.title="[".concat(e,"] Schmeckles")},r.copyCodeToClipboard=function(){r.codeInput.current.select(),document.execCommand("copy")},r.codeInput=a.a.createRef(),r}return Object(c.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.code!==e.code&&this.updateBrowserLocation(this.props.code)}},{key:"render",value:function(){var e=this;return Object(xe.jsx)(Te,{children:Object(xe.jsxs)(Je,{children:[Object(xe.jsx)(Ie,{}),this.props.code?Object(xe.jsx)(xe.Fragment,{children:Object(xe.jsxs)(Ue,{children:["Lobby Code: ",Object(xe.jsx)(Ye,{ref:this.codeInput,type:"text",value:this.props.code,readOnly:!0,onClick:this.copyCodeToClipboard}),this.props.disbandLobby?Object(xe.jsx)(We,{onClick:function(){return e.props.disbandLobby&&e.props.disbandLobby()},children:"Disband Lobby"}):null,this.props.exitLobby?Object(xe.jsx)(We,{onClick:function(){return e.props.exitLobby&&e.props.exitLobby()},children:"Exit Lobby"}):null]})}):Object(xe.jsx)(xe.Fragment,{children:"Establishing P2P network connection..."}),Object(xe.jsx)(ze,{children:Object(h.a)(Array(4)).map((function(n,t){return Object(xe.jsx)(He,{children:e.props.players[t]?Object(xe.jsx)(xe.Fragment,{children:e.props.players[t].connected?Object(xe.jsx)(xe.Fragment,{children:e.props.players[t].name}):Object(xe.jsx)(Qe,{children:e.props.players[t].name})}):Object(xe.jsx)(xe.Fragment,{children:"Waiting for players..."})},t)}))}),this.props.players.length<2?Object(xe.jsx)("p",{children:"At least two players needed to start game."}):null,this.props.startGame?Object(xe.jsx)(_e,{disabled:this.props.players.length<2,onClick:function(){return e.props.startGame&&e.props.startGame()},children:"Start Game"}):null]})})}}]),t}(a.a.Component),en=d.a.div(Fe||(Fe=Object(u.a)(["\n  height: 100%;\n"]))),nn=_.getInstance(),tn=function(){var e=Object(i.useState)(!1),n=Object(s.a)(e,2),t=n[0],r=n[1],a=Object(i.useState)(""),l=Object(s.a)(a,2),o=l[0],u=l[1],d=Object(i.useState)(""),c=Object(s.a)(d,2),p=c[0],h=c[1],m=Object(i.useState)(""),b=Object(s.a)(m,2),y=b[0],f=b[1],g=Object(i.useState)({background:""}),x=Object(s.a)(g,2),j=x[0],v=x[1];Object(i.useEffect)((function(){nn.onStateUpdate((function(e){v(e)}))}),[]);return Object(xe.jsx)(xe.Fragment,{children:t||p?Object(xe.jsx)(Ee,{src:j.background,children:Object(xe.jsxs)(en,{children:[t?Object(xe.jsx)(qe,{playerName:o,setIsHostingLobby:r,setErrorMessage:f}):null,p?Object(xe.jsx)(Ze,{playerName:o,joinLobbyCode:p,setErrorMessage:f,setJoinLobbyCode:h}):null]})}):Object(xe.jsx)(Re,{hostLobby:function(e){r(!0),u(e)},joinLobby:function(e,n){h(e),u(n)},errorMessage:y})})},rn=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,39)).then((function(n){var t=n.getCLS,r=n.getFID,i=n.getFCP,a=n.getLCP,l=n.getTTFB;t(e),r(e),i(e),a(e),l(e)}))};o.a.render(Object(xe.jsx)(a.a.StrictMode,{children:Object(xe.jsx)(tn,{})}),document.getElementById("root")),rn()}},[[38,1,2]]]);
//# sourceMappingURL=main.3cf3df96.chunk.js.map